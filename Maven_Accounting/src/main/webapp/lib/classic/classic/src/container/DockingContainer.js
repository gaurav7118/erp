Ext.define("Ext.container.DockingContainer",{requires:["Ext.util.MixedCollection","Ext.Element"],isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:false,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="'+Ext.baseCSSPrefix+"tab-guard "+Ext.baseCSSPrefix+'tab-guard-{tabGuard}" ></div>',addDocked:function(F,I){var H=this,B=H.rendered,C=0,J=H.dockedItems,D=J.getCount(),E,G,K,A;F=H.prepareItems(F);A=F.length;if(B){Ext.suspendLayouts()}if(I===undefined){I=D}else{I=Math.min(I,D)}for(;C<A;C++){K=F[C];K.dock=K.dock||"top";if(K.dock==="left"||K.dock==="right"){H.horizontalDocks++}E=I+C;J.insert(E,K);G=!!K.instancedCmp;delete K.instancedCmp;K.onAdded(H,E,G);delete K.$initParent;if(H.onDockedAdd!==Ext.emptyFn){H.onDockedAdd(K)}if(H.hasListeners.dockedadd){H.fireEvent("dockedadd",H,K,E)}}if(H.rendered){H.updateLayout();Ext.resumeLayouts(true)}return F},destroyDockedItems:function(){var A=this.dockedItems,B;if(A){while((B=A.first())){this.removeDocked(B,true)}}},doRenderDockedItems:function(D,G,H){var F=G.$comp,E=F.componentLayout,C=F.tabGuard&&F.getTpl("tabGuardTpl"),B,A;if(E.getDockedItems&&!G.$skipDockedItems){if(C&&!H){G.tabGuard="before";F.addChildEl(G.tabGuardEl="tabGuardBeforeEl");C.applyOut(G,D)}B=E.getDockedItems("render",!H);A=B&&E.getItemsRenderTree(B);if(A){Ext.DomHelper.generateMarkup(A,D)}if(C&&H){G.tabGuard="after";F.addChildEl(G.tabGuardEl="tabGuardAfterEl");C.applyOut(G,D)}}},getDockedComponent:function(A){if(Ext.isObject(A)){A=A.getItemId()}return this.dockedItems.get(A)},getDockedItems:function(A,C){var B=this.getComponentLayout().getDockedItems("render",C);if(A&&B.length){B=Ext.ComponentQuery.query(A,B)}return B},getDockingRefItems:function(B,E){var A=B&&"*,* *",D=this.getDockedItems(A,true),C;D.push.apply(D,E);C=this.getDockedItems(A,false);D.push.apply(D,C);return D},initDockingItems:function(){var B=this,A=B.dockedItems;if(!A||!A.isMixedCollection){B.dockedItems=new Ext.util.ItemCollection();if(A){B.addDocked(A)}}},insertDocked:function(B,A){this.addDocked(A,B)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(E,B){var D=this,C,A;B=B===true||(B!==false&&D.autoDestroy);if(!D.dockedItems.contains(E)){return E}if(E.dock==="left"||E.dock==="right"){D.horizontalDocks--}C=D.componentLayout;A=C&&D.rendered;if(A){C.onRemove(E)}D.dockedItems.remove(E);E.onRemoved(E.destroying||B);D.onDockedRemove(E);if(B){E.destroy()}else{if(A){C.afterRemove(E)}}if(D.hasListeners.dockedremove){D.fireEvent("dockedremove",D,E)}if(!D.destroying){D.updateLayout()}return E},moveDocked:function(C,A){var B=this;if(B.rendered){Ext.suspendLayouts()}B.removeDocked(C,false);C.dock=A;B.addDocked(C);if(B.rendered){if(C.frame){Ext.getDetachedBody().appendChild(C.el);C.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(A){A.renderDockedItems=this.doRenderDockedItems}})