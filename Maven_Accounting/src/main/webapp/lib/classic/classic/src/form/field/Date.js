Ext.define("Ext.form.field.Date",{extend:"Ext.form.field.Picker",alias:"widget.datefield",requires:["Ext.picker.Date"],alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",ariaFormat:"M j Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date cannot be selected",minText:"The date in this field must be equal to or after {0}",ariaMinText:"The date must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",ariaMaxText:"The date must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",formatText:"Expected date format: {0}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:true,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,valuePublishEvent:["select","blur"],ariaRole:"combobox",initComponent:function(){var D=this,B=Ext.isString,C,A;C=D.minValue;A=D.maxValue;if(B(C)){D.minValue=D.parseDate(C)}if(B(A)){D.maxValue=D.parseDate(A)}D.disabledDatesRE=null;D.initDisabledDays();D.callParent()},initValue:function(){var A=this,B=A.value;if(Ext.isString(B)){A.value=A.rawToValue(B)}A.callParent()},initDisabledDays:function(){if(this.disabledDates){var B=this.disabledDates,A=B.length-1,E="(?:",F,D=B.length,C;for(F=0;F<D;F++){C=B[F];E+=Ext.isDate(C)?"^"+Ext.String.escapeRegex(C.dateFormat(this.format))+"$":C;if(F!==A){E+="|"}}this.disabledDatesRE=new RegExp(E+")")}},setDisabledDates:function(C){var B=this,A=B.picker;B.disabledDates=C;B.initDisabledDays();if(A){A.setDisabledDates(B.disabledDatesRE)}},setDisabledDays:function(B){var A=this.picker;this.disabledDays=B;if(A){A.setDisabledDays(B)}},setMinValue:function(D){var B=this,A=B.picker,C=(Ext.isString(D)?B.parseDate(D):D);B.minValue=C;if(A){A.minText=Ext.String.format(B.minText,B.formatDate(B.minValue));A.setMinDate(C)}},setMaxValue:function(C){var B=this,A=B.picker,D=(Ext.isString(C)?B.parseDate(C):C);B.maxValue=D;if(A){A.maxText=Ext.String.format(B.maxText,B.formatDate(B.maxValue));A.setMaxDate(D)}},getErrors:function(O){O=arguments.length>0?O:this.formatDate(this.processRawValue(this.getRawValue()));var H=this,N=Ext.String.format,I=Ext.Date.clearTime,M=H.callParent([O]),L=H.disabledDays,D=H.disabledDatesRE,K=H.minValue,G=H.maxValue,F=L?L.length:0,E=0,A,B,J,C;if(O===null||O.length<1){return M}A=O;O=H.parseDate(O);if(!O){M.push(N(H.invalidText,A,Ext.Date.unescapeFormat(H.format)));return M}C=O.getTime();if(K&&C<I(K).getTime()){M.push(N(H.minText,H.formatDate(K)))}if(G&&C>I(G).getTime()){M.push(N(H.maxText,H.formatDate(G)))}if(L){J=O.getDay();for(;E<F;E++){if(J===L[E]){M.push(H.disabledDaysText);break}}}B=H.formatDate(O);if(D&&D.test(B)){M.push(N(H.disabledDatesText,B))}return M},rawToValue:function(A){return this.parseDate(A)||A||null},valueToRaw:function(A){return this.formatDate(this.parseDate(A))},safeParse:function(F,G){var E=this,C=Ext.Date,A=null,B=E.useStrict,D;if(C.formatContainsHourInfo(G)){A=C.parse(F,G,B)}else{D=C.parse(F+" "+E.initTime,G+" "+E.initTimeFormat,B);if(D){A=C.clearTime(D)}}return A},getSubmitValue:function(){var B=this.submitFormat||this.format,A=this.getValue();return A?Ext.Date.format(A,B):""},parseDate:function(E){if(!E||Ext.isDate(E)){return E}var D=this,G=D.safeParse(E,D.format),B=D.altFormats,F=D.altFormatsArray,C=0,A;if(!G&&B){F=F||B.split("|");A=F.length;for(;C<A&&!G;++C){G=D.safeParse(E,F[C])}}return G},formatDate:function(A,B){return Ext.isDate(A)?Ext.Date.dateFormat(A,B||this.format):A},createPicker:function(){var A=this,B=Ext.String.format;return new Ext.picker.Date({pickerField:A,floating:true,preventRefocus:true,hidden:true,minDate:A.minValue,maxDate:A.maxValue,disabledDatesRE:A.disabledDatesRE,disabledDatesText:A.disabledDatesText,ariaDisabledDatesText:A.ariaDisabledDatesText,disabledDays:A.disabledDays,disabledDaysText:A.disabledDaysText,ariaDisabledDaysText:A.ariaDisabledDaysText,format:A.format,showToday:A.showToday,startDay:A.startDay,minText:B(A.minText,A.formatDate(A.minValue)),ariaMinText:B(A.ariaMinText,A.formatDate(A.minValue,A.ariaFormat)),maxText:B(A.maxText,A.formatDate(A.maxValue)),ariaMaxText:B(A.ariaMaxText,A.formatDate(A.maxValue,A.ariaFormat)),listeners:{scope:A,select:A.onSelect,tabout:A.onTabOut},keyNavConfig:{esc:function(){A.inputEl.focus();A.collapse()}}})},onSelect:function(A,C){var B=this;B.setValue(C);B.fireEvent("select",B,C);B.onTabOut(A)},onTabOut:function(A){this.inputEl.focus();this.collapse()},onExpand:function(){var A=this.getValue();this.picker.setValue(Ext.isDate(A)?A:new Date())},onBlur:function(C){var B=this,A=B.rawToValue(B.getRawValue());if(Ext.isDate(A)){B.setValue(A)}B.callParent([C])}})