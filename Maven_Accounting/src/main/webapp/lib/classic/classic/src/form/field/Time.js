Ext.define("Ext.form.field.Time",{extend:"Ext.form.field.ComboBox",alias:"widget.timefield",requires:["Ext.form.field.Date","Ext.picker.Time","Ext.view.BoundListKeyNav","Ext.Date"],alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",formatText:"Expected time format: HH:MM space am/pm",increment:15,pickerMaxHeight:300,selectOnTab:true,snapToIncrement:false,valuePublishEvent:["select","blur"],initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var C=this,B=C.minValue,A=C.maxValue;if(B){C.setMinValue(B)}if(A){C.setMaxValue(A)}C.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+C.displayField+'"])]}<tpl if="xindex < xcount">'+C.delimiter+"</tpl></tpl>",{formatDate:C.formatDate.bind(C)});C.store=Ext.picker.Time.createStore(C.format,C.increment);C.callParent();C.getPicker()},isEqual:function(F,E){var B=Ext.Array.from,D=Ext.Date.isEqual,C,A;F=B(F);E=B(E);A=F.length;if(A!==E.length){return false}for(C=0;C<A;C++){if(!(E[C] instanceof Date)||!(F[C] instanceof Date)||!D(E[C],F[C])){return false}}return true},setMinValue:function(C){var B=this,A=B.picker;B.setLimit(C,true);if(A){A.setMinValue(B.minValue)}},setMaxValue:function(C){var B=this,A=B.picker;B.setLimit(C,false);if(A){A.setMaxValue(B.maxValue)}},setLimit:function(B,E){var A=this,D,C;if(Ext.isString(B)){D=A.parseDate(B)}else{if(Ext.isDate(B)){D=B}}if(D){C=A.getInitDate();C.setHours(D.getHours(),D.getMinutes(),D.getSeconds(),D.getMilliseconds())}else{C=null}A[E?"minValue":"maxValue"]=C},getInitDate:function(A,B,D){var C=this.initDateParts;return new Date(C[0],C[1],C[2],A||0,B||0,D||0,0)},valueToRaw:function(A){return this.formatDate(this.parseDate(A))},getErrors:function(J){J=arguments.length>0?J:this.getRawValue();var F=this,I=Ext.String.format,H=F.callParent([J]),G=F.minValue,E=F.maxValue,C=F.displayTplData,K=F.getRawValue(),B,D,A,L;if(C&&C.length>0){for(B=0,D=C.length;B<D;B++){L=C[B];L=L.date||L.disp;A=F.parseDate(L);if(!A){H.push(I(F.invalidText,L,Ext.Date.unescapeFormat(F.format)));continue}if(G&&A<G){H.push(I(F.minText,F.formatDate(G)))}if(E&&A>E){H.push(I(F.maxText,F.formatDate(E)))}}}else{if(K.length&&!F.parseDate(K)){H.push(I(F.invalidText,K,Ext.Date.unescapeFormat(F.format)))}}return H},formatDate:function(B){var D=[],C,A;B=Ext.Array.from(B);for(C=0,A=B.length;C<A;C++){D.push(Ext.form.field.Date.prototype.formatDate.call(this,B[C]))}return D.join(this.delimiter)},parseDate:function(E){var D=this,G=E,B=D.altFormats,F=D.altFormatsArray,C=0,A;if(E&&!Ext.isDate(E)){G=D.safeParse(E,D.format);if(!G&&B){F=F||B.split("|");A=F.length;for(;C<A&&!G;++C){G=D.safeParse(E,F[C])}}}if(G&&D.snapToIncrement){G=new Date(Ext.Number.snap(G.getTime(),D.increment*60*1000))}return G},safeParse:function(E,F){var D=this,B=Ext.Date,C,A=null;if(B.formatContainsDateInfo(F)){A=B.parse(E,F)}else{C=B.parse(D.initDate+" "+E,D.initDateFormat+" "+F);if(C){A=C}}return A},getSubmitValue:function(){var A=this,C=A.submitFormat||A.format,B=A.getValue();return B?Ext.Date.format(B,C):null},createPicker:function(){var A=this;A.listConfig=Ext.apply({xtype:"timepicker",pickerField:A,cls:undefined,minValue:A.minValue,maxValue:A.maxValue,increment:A.increment,format:A.format,maxHeight:A.pickerMaxHeight},A.listConfig);return A.callParent()},completeEdit:function(){var A=this,B=A.getValue();A.callParent(arguments);if(A.validateValue(B)){A.setValue(B)}},findRecordByValue:function(A){if(typeof A==="string"){A=this.parseDate(A)}return this.callParent([A])},rawToValue:function(F){var E=this,C,B,D,A;if(E.multiSelect){B=[];C=Ext.Array.from(F);for(D=0,A=C.length;D<A;D++){B.push(E.parseDate(C[D]))}return B}return E.parseDate(F)},setValue:function(A){var B=this;if(B.creatingPicker){return }B.getPicker();if(Ext.isDate(A)){A=B.getInitDate(A.getHours(),A.getMinutes(),A.getSeconds())}return B.callParent([A])},getValue:function(){return this.rawToValue(this.callParent(arguments))}})