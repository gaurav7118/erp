Ext.define("Ext.grid.filters.filter.TriFilter",{extend:"Ext.grid.filters.filter.Base",menuItems:["lt","gt","-","eq"],constructor:function(D){var H=this,F=false,A={},E,G,C,I,B;H.callParent([D]);I=H.value;G=H.getStoreFilter("lt");E=H.getStoreFilter("gt");C=H.getStoreFilter("eq");if(G||E||C){F=H.active=true;if(G){H.onStateRestore(G)}if(E){H.onStateRestore(E)}if(C){H.onStateRestore(C)}}else{if(H.grid.stateful&&H.getGridStore().saveStatefulFilters){I=undefined}H.active=H.getActiveState(D,I)}A.lt=G||H.createFilter({operator:"lt",value:(!F&&I&&Ext.isDefined(I.lt))?I.lt:null},"lt");A.gt=E||H.createFilter({operator:"gt",value:(!F&&I&&Ext.isDefined(I.gt))?I.gt:null},"gt");A.eq=C||H.createFilter({operator:"eq",value:(!F&&I&&Ext.isDefined(I.eq))?I.eq:null},"eq");H.filter=A;if(H.active){H.setColumnActive(true);if(!F){for(B in I){H.addStoreFilter(H.filter[B])}}}},activate:function(E){var F=this,B=F.filter,D=F.fields,A,H,C,I,G;if(F.preventFilterRemoval){return }for(C in B){A=B[C];H=D[C];I=A.getValue();if(I||I===0){H.setValue(I);if(G===undefined){G=F.owner.activeFilterMenuItem===H.up("menuitem")}if(!G){H.up("menuitem").setChecked(true,true)}if(!E){F.addStoreFilter(A)}}}},deactivate:function(){var C=this,B=C.filter,E,A,D;if(!C.countActiveFilters()||C.preventFilterRemoval){return }C.preventFilterRemoval=true;for(E in B){A=B[E];D=A.getValue();if(D||D===0){C.removeStoreFilter(A)}}C.preventFilterRemoval=false},countActiveFilters:function(){var C=this.filter,E=this.getGridStore().getFilters(),D=this.getBaseIdPrefix(),A=0,B;if(E.length){for(B in C){if(E.get(D+"-"+B)){A++}}}return A},onFilterRemove:function(A){var B=this,C;if(!B.menu&&B.countActiveFilters()){B.active=false}else{if(B.menu){C={};C[A]=null;B.setValue(C)}}},onStateRestore:Ext.emptyFn,setValue:function(K){var I=this,B=I.filter,N=[],G=[],D=false,F=I.getGridStore().getFilters(),J,A,M,E,H,L,C;if(I.preventFilterRemoval){return }I.preventFilterRemoval=true;if("eq" in K){M=B.lt.getValue();if(M||M===0){G.push(B.lt)}M=B.gt.getValue();if(M||M===0){G.push(B.gt)}M=K.eq;if(M||M===0){N.push(B.eq);B.eq.setValue(M)}else{G.push(B.eq)}}else{M=B.eq.getValue();if(M||M===0){G.push(B.eq)}if("lt" in K){M=K.lt;if(M||M===0){N.push(B.lt);B.lt.setValue(M)}else{G.push(B.lt)}}if("gt" in K){M=K.gt;if(M||M===0){N.push(B.gt);B.gt.setValue(M)}else{G.push(B.gt)}}}L=G.length;C=N.length;D=!!(I.countActiveFilters()+C-L);if(L||C||D!==I.active){F.beginUpdate();if(L){for(E=0;E<L;E++){A=G[E];I.fields[A.getOperator()].setValue(null);A.setValue(null);I.removeStoreFilter(A)}}if(C){for(E=0;E<C;E++){I.addStoreFilter(N[E])}}I.setActive(D);F.endUpdate()}I.preventFilterRemoval=false}})