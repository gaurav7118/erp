Ext.define("Ext.grid.locking.HeaderContainer",{extend:"Ext.grid.header.Container",requires:["Ext.grid.ColumnManager"],headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(B){var A=this,D=B.lockedGrid,C=B.normalGrid;A.lockable=B;A.callParent();D.visibleColumnManager.rootColumns=C.visibleColumnManager.rootColumns=B.visibleColumnManager=A.visibleColumnManager=new Ext.grid.ColumnManager(true,D.headerCt,C.headerCt);D.columnManager.rootColumns=C.columnManager.rootColumns=B.columnManager=A.columnManager=new Ext.grid.ColumnManager(false,D.headerCt,C.headerCt);A.lockedEventRelayers=A.relayEvents(D.headerCt,A.headerCtRelayEvents);A.normalEventRelayers=A.relayEvents(C.headerCt,A.headerCtRelayEvents)},destroy:function(){var A=this;Ext.destroy(A.lockedEventRelayers,A.normalEventRelayers);A.lockedEventRelayers=A.normalEventRelayers=null;A.callParent()},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var B=this,A=B.lockable.lockedGrid.headerCt.getColumnsState(),C=B.lockable.normalGrid.headerCt.getColumnsState();return A.concat(C)},applyColumnsState:function(H,D){var O=this,F=O.lockable.lockedGrid,G=F.headerCt,M=O.lockable.normalGrid.headerCt,P=Ext.Array.toValueMap(G.items.items,"stateId"),I=Ext.Array.toValueMap(M.items.items,"stateId"),L=[],N=[],K=1,B=H.length,J,A,E,C;for(J=0;J<B;J++){C=H[J];E=P[C.id];A=E||I[C.id];if(A){if(A.applyColumnState){A.applyColumnState(C,D)}if(A.locked===undefined){A.locked=!!E}if(A.locked){L.push(A);if(!A.hidden&&typeof A.width==="number"){K+=A.width}}else{N.push(A)}}}if(L.length+N.length===G.items.getCount()+M.items.getCount()){G.removeAll(false);M.removeAll(false);G.add(L);M.add(N);F.setWidth(K)}},disable:function(){var A=this.lockable;A.lockedGrid.headerCt.disable();A.normalGrid.headerCt.disable()},enable:function(){var A=this.lockable;A.lockedGrid.headerCt.enable();A.normalGrid.headerCt.enable()}})