Ext.define("Ext.layout.Layout",{mixins:["Ext.mixin.Factoryable"],requires:["Ext.XTemplate","Ext.layout.SizeModel"],uses:["Ext.layout.Context"],factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(A){var B=this;B.id=Ext.id(null,B.type+"-");B.initConfig(A);delete B.type;B.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(C){var B=this,A=B.context,D;if(B.lastWidthModel!==C.widthModel){if(B.lastWidthModel){D=true}B.lastWidthModel=C.widthModel}if(B.lastHeightModel!==C.heightModel){if(B.lastWidthModel){D=true}B.lastHeightModel=C.heightModel}if(D){(A=C.context).clearTriggers(B,false);A.clearTriggers(B,true);B.triggerCount=0}},finishedLayout:function(A){this.lastWidthModel=A.widthModel;this.lastHeightModel=A.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(A){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(A){return false},isItemLayoutRoot:function(D){var C=D.getSizeModel(),B=C.width,A=C.height;if(!D.componentLayout.lastComponentSize&&(B.calculated||A.calculated)){return false}return !B.shrinkWrap&&!A.shrinkWrap},isItemShrinkWrap:function(A){return A.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(D,B){var G=D.length,E,F,C,A;if(G){A=[];for(E=0;E<G;++E){F=D[E];if(!F.rendered){if(B&&(B[F.id]!==undefined)){C=B[F.id]}else{this.configureItem(F);C=F.getRenderTree();if(B){B[F.id]=C}}if(C){A.push(C)}}}}return A},finishRender:Ext.emptyFn,finishRenderItems:function(E,A){var D=A.length,B,C;for(B=0;B<D;B++){C=A[B];if(C.rendering){C.finishRender(B)}}},renderChildren:function(){var B=this,A=B.getLayoutItems(),C=B.getRenderTarget();B.renderItems(A,C)},renderItems:function(A,F){var E=this,D=A.length,B=0,C;if(D){Ext.suspendLayouts();for(;B<D;B++){C=A[B];if(C&&!C.rendered){E.renderItem(C,F,B)}else{if(!E.isValidParent(C,F,B)){E.moveItem(C,F,B)}else{E.configureItem(C)}}}Ext.resumeLayouts(true)}},isValidParent:function(D,E,A){var C=(E&&E.dom)||E,B=this.getItemLayoutEl(D);if(B&&C){if(typeof A==="number"){A=this.getPositionOffset(A);return B===C.childNodes[A]}return B.parentNode===C}return false},getItemLayoutEl:function(C){var D=C.el?C.el.dom:Ext.getDom(C),A=D.parentNode,B;if(A){B=A.className;if(B&&B.indexOf(Ext.baseCSSPrefix+"resizable-wrap")!==-1){D=D.parentNode}}return D},getPositionOffset:function(A){return A},configureItem:function(A){A.ownerLayout=this},renderItem:function(C,D,A){var B=this;if(!C.rendered){B.configureItem(C);C.render(D,A)}},moveItem:function(B,C,A){C=C.dom||C;if(typeof A==="number"){A=C.childNodes[A]}C.insertBefore(B.el.dom,A||null);B.container=Ext.get(C);this.configureItem(B)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(A){this.owner=A},getLayoutItems:function(){return[]},onAdd:function(A){A.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(E){var D=this,C=E.el,B=D.owner,A;if(E.rendered){A=[].concat(D.itemCls||[]);if(B.itemCls){A=Ext.Array.push(A,B.itemCls)}if(A.length){C.removeCls(A)}}delete E.ownerLayout},afterCollapse:function(A,B){if(B){this.onContentChange(A)}},afterExpand:function(A,B){if(B){this.onContentChange(A)}},destroy:function(){var A=this,B;if(A.targetCls){B=A.getTarget();if(B){B.removeCls(A.targetCls)}}A.onDestroy();A.callParent()},sortWeightedItems:function(A,D){for(var B=0,C=A.length;B<C;++B){A[B].$i=B}Ext.Array.sort(A,function(F,E){var G=E.weight-F.weight;if(!G){G=F.$i-E.$i;if(F[D]){G=-G}}return G});for(B=0;B<C;++B){delete A[B].$i}}},function(){var A=this;A.prototype.sizeModels=A.sizeModels=Ext.layout.SizeModel.sizeModels})