Ext.define("Ext.layout.container.Accordion",{extend:"Ext.layout.container.VBox",alias:"layout.accordion",type:"accordion",alternateClassName:"Ext.layout.AccordionLayout",targetCls:Ext.baseCSSPrefix+"accordion-layout-ct",itemCls:[Ext.baseCSSPrefix+"box-item",Ext.baseCSSPrefix+"accordion-item"],align:"stretch",enableSplitters:false,fill:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:undefined,animate:true,activeOnTop:false,multi:false,wrapOver:true,panelCollapseMode:"header",defaultAnimatePolicy:{y:true,height:true},constructor:function(){var A=this;A.callParent(arguments);if(A.animate){A.animatePolicy={};A.animatePolicy[A.names.x]=true;A.animatePolicy[A.names.width]=true}else{A.animatePolicy=null}},beforeRenderItems:function(G){var H=this,F=G.length,B=H.owner,I=H.collapseFirst,A=Ext.isDefined(I),J=H.getExpanded(true)[0],E=H.multi,D,C;for(C=0;C<F;C++){D=G[C];if(!D.rendered){D.isAccordionPanel=true;D.bodyAriaRole="tabpanel";D.accordionWrapOver=H.wrapOver;if(!E||D.collapsible!==false){D.collapsible=true}if(D.collapsible){if(A){D.collapseFirst=I}if(H.hideCollapseTool){D.hideCollapseTool=H.hideCollapseTool;D.titleCollapse=true}else{if(H.titleCollapse&&D.titleCollapse===undefined){D.titleCollapse=H.titleCollapse}}}D.hideHeader=D.width=null;D.title=D.title||"&#160;";D.addBodyCls(Ext.baseCSSPrefix+"accordion-body");if(!E){if(J){D.collapsed=J!==D}else{if(D.hasOwnProperty("collapsed")&&D.collapsed===false){J=D}else{D.collapsed=true}}B.mon(D,"show",H.onComponentShow,H)}D.headerOverCls=Ext.baseCSSPrefix+"accordion-hd-over"}}if(!H.processing&&!E){if(!J){if(F){G[0].collapsed=false}}else{if(H.activeOnTop){J.collapsed=false;H.configureItem(J);if(B.items.indexOf(J)>0){B.insert(0,J)}}}}},getItemsRenderTree:function(A){this.beforeRenderItems(A);return this.callParent(arguments)},renderItems:function(A,B){this.beforeRenderItems(A);this.callParent(arguments)},configureItem:function(A){this.callParent(arguments);A.ignoreHeaderBorderManagement=true;A.animCollapse=false;if(this.fill){A.flex=1}},beginLayout:function(A){this.callParent(arguments);this.innerCt.dom.setAttribute("role","tablist");this.innerCt.dom.setAttribute("aria-multiselectable",true);this.updatePanelClasses(A)},updatePanelClasses:function(E){var C=E.visibleItems,D=C.length,A=true,B,G,F;for(B=0;B<D;B++){G=C[B];F=G.header;F.addCls(Ext.baseCSSPrefix+"accordion-hd");if(A){F.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded")}else{F.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded")}if(B+1===D&&G.collapsed){F.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed")}else{F.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed")}A=G.collapsed}},onBeforeComponentExpand:function(H){var D=this,A=D.owner,G=D.multi,F=!G&&!D.animate&&D.activeOnTop,C,B,E;if(!D.processing){D.processing=true;B=A.deferLayouts;A.deferLayouts=true;if(!G){C=D.getExpanded()[0];if(C&&C!==H){E=C.$layoutAnim;if(E){E.jumpToEnd()}C.collapse()}}if(F){Ext.suspendLayouts();A.insert(0,H);Ext.resumeLayouts()}A.deferLayouts=B;D.processing=false}},onBeforeComponentCollapse:function(D){var E=this,A=E.owner,F,C,B;if(E.owner.items.getCount()===1){return false}if(!E.processing){E.processing=true;B=A.deferLayouts;A.deferLayouts=true;F=D.next()||D.prev();if(E.multi){C=E.getExpanded();if(C.length===1){F.expand()}}else{if(F){F.expand()}}A.deferLayouts=B;E.processing=false}},onComponentShow:function(A){this.onBeforeComponentExpand(A)},onAdd:function(B){var A=this;A.callParent(arguments);if(B.collapseMode==="placeholder"){B.collapseMode=A.panelCollapseMode}B.collapseDirection=B.headerPosition;if(A.layoutCount&&!A.multi&&A.owner.items.getCount()>1){A.processing=true;B.collapse();A.processing=false}},onRemove:function(A,D){var C=this,B;C.callParent(arguments);if(!C.owner.destroying&&!C.multi&&!A.collapsed){B=C.owner.items.first();if(B){B.expand()}}},getExpanded:function(G){var B=this.owner.items.items,A=B.length,D=0,C=[],F,E;for(;D<A;++D){E=B[D];if(!E.hidden){if(G){F=E.hasOwnProperty("collapsed")&&E.collapsed===false}else{F=!E.collapsed}if(F){C.push(E)}}}return C},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn})