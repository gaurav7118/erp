Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(F){var E=this,D=0,H,A,G,B,C;E.callParent(arguments);G=F.childItems;C=G.length;for(B=0;B<C;++B){A=G[B];H=A.target.anchorSpec;if(H){if(A.widthModel.calculated&&H.right){D|=1}if(A.heightModel.calculated&&H.bottom){D|=2}if(D===3){break}}}F.anchorDimensions=D;E.sanityCheck(F)},calculateItems:function(G,A){var O=this,J=G.childItems,F=J.length,M=A.gotHeight,H=A.gotWidth,E=A.height,C=A.width,B=(H?1:0)|(M?2:0),N=G.anchorDimensions,K,Q,L,P,I,D;if(!N){return true}for(I=0;I<F;I++){Q=J[I];L=Q.getMarginInfo();K=Q.target.anchorSpec;if(H&&Q.widthModel.calculated){D=K.right(C)-L.width;D=O.adjustWidthAnchor(D,Q);Q.setWidth(D)}if(M&&Q.heightModel.calculated){P=K.bottom(E)-L.height;P=O.adjustHeightAnchor(P,Q);Q.setHeight(P)}}return(B&N)===N},sanityCheck:function(C){var H=C.widthModel.shrinkWrap,E=C.heightModel.shrinkWrap,B=C.childItems,F,G,I,D,A;for(D=0,A=B.length;D<A;++D){I=B[D];G=I.target;F=G.anchorSpec;if(F){if(I.widthModel.calculated&&F.right){if(H){Ext.log({level:"warn",msg:"Right anchor on "+G.id+" in shrinkWrap width container"})}}if(I.heightModel.calculated&&F.bottom){if(E){Ext.log({level:"warn",msg:"Bottom anchor on "+G.id+" in shrinkWrap height container"})}}}}},anchorFactory:{offset:function(A){return function(B){return B+A}},ratio:function(A){return function(B){return Math.floor(B*A)}},standard:function(A){return function(B){return B-A}}},parseAnchor:function(B,E,A){if(B&&B!=="none"){var C=this.anchorFactory,D;if(this.parseAnchorRE.test(B)){return C.standard(A-E)}if(B.indexOf("%")!==-1){return C.ratio(parseFloat(B.replace("%",""))*0.01)}D=parseInt(B,10);if(!isNaN(D)){return C.offset(D)}}return null},adjustWidthAnchor:function(B,A){return B},adjustHeightAnchor:function(B,A){return B},configureItem:function(F){var E=this,A=E.owner,D=F.anchor,B,C,G;E.callParent(arguments);if(!F.anchor&&F.items&&!Ext.isNumber(F.width)){F.anchor=D=E.defaultAnchor}if(A.anchorSize){if(typeof A.anchorSize==="number"){C=A.anchorSize}else{C=A.anchorSize.width;G=A.anchorSize.height}}else{C=A.initialConfig.width;G=A.initialConfig.height}if(D){B=D.split(" ");F.anchorSpec={right:E.parseAnchor(B[0],F.initialConfig.width,C),bottom:E.parseAnchor(B[1],F.initialConfig.height,G)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(C){var E=C.anchorSpec,A="$",D=this.sizePolicy,B;if(E){B=this.owner.getSizeModel();if(E.right&&!B.width.shrinkWrap){D=D.r}if(E.bottom&&!B.height.shrinkWrap){A="b"}}return D[A]}})