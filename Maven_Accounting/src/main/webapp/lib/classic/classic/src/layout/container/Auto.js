Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.container.Container",type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:Ext.baseCSSPrefix+"autocontainer-outerCt",innerCtCls:Ext.baseCSSPrefix+"autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(A){this.callParent(arguments);this.initContextItems(A)},beforeLayoutCycle:function(D){var B=this.owner,C=B.inheritedState,A=B.inheritedStateInner;if(!C||C.invalid){C=B.getInherited();A=B.inheritedStateInner}if(D.widthModel.shrinkWrap){A.inShrinkWrapTable=true}else{delete A.inShrinkWrapTable}},beginLayoutCycle:function(D){var I=this,B=I.outerCt,G=I.lastOuterCtWidth||"",F=I.lastOuterCtHeight||"",J=I.lastOuterCtTableLayout||"",A=D.state,K,E,L,C,H;I.callParent(arguments);E=L=C="";if(!D.widthModel.shrinkWrap){E="100%";H=I.owner.inheritedStateInner;K=I.getOverflowXStyle(D);C=(H.inShrinkWrapTable||K==="auto"||K==="scroll")?"":"fixed"}if(!D.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){L="100%"}if((E!==G)||I.hasOuterCtPxWidth){B.setStyle("width",E);I.lastOuterCtWidth=E;I.hasOuterCtPxWidth=false}if(C!==J){B.setStyle("table-layout",C);I.lastOuterCtTableLayout=C}if((L!==F)||I.hasOuterCtPxHeight){B.setStyle("height",L);I.lastOuterCtHeight=L;I.hasOuterCtPxHeight=false}if(I.hasInnerCtPxHeight){I.innerCt.setStyle("height","");I.hasInnerCtPxHeight=false}A.overflowAdjust=A.overflowAdjust||I.lastOverflowAdjust},calculate:function(C){var A=this,B=C.state,E=A.getContainerSize(C,true),D=B.calculatedItems||(B.calculatedItems=A.calculateItems?A.calculateItems(C,E):true);A.setCtSizeIfNeeded(C,E);if(D&&C.hasDomProp("containerChildrenSizeDone")){A.calculateContentSize(C);if(E.gotAll){if(A.manageOverflow&&!C.state.secondPass&&!A.reserveScrollbar){A.calculateOverflow(C,E)}return }}A.done=false},calculateContentSize:function(F){var E=this,A=((F.widthModel.shrinkWrap?1:0)|(F.heightModel.shrinkWrap?2:0)),C=(A&1)||undefined,G=(A&2)||undefined,D=0,B=F.props;if(C){if(isNaN(B.contentWidth)){++D}else{C=undefined}}if(G){if(isNaN(B.contentHeight)){++D}else{G=undefined}}if(D){if(C&&!F.setContentWidth(E.measureContentWidth(F))){E.done=false}if(G&&!F.setContentHeight(E.measureContentHeight(F))){E.done=false}}},calculateOverflow:function(C){var G=this,B,I,A,F,E,D,H;E=(G.getOverflowXStyle(C)==="auto");D=(G.getOverflowYStyle(C)==="auto");if(E||D){A=Ext.getScrollbarSize();H=C.overflowContext.el.dom;F=0;if(H.scrollWidth>H.clientWidth){F|=1}if(H.scrollHeight>H.clientHeight){F|=2}B=(D&&(F&2))?A.width:0;I=(E&&(F&1))?A.height:0;if(B!==G.lastOverflowAdjust.width||I!==G.lastOverflowAdjust.height){G.done=false;C.invalidate({state:{overflowAdjust:{width:B,height:I},overflowState:F,secondPass:true}})}}},completeLayout:function(A){this.lastOverflowAdjust=A.state.overflowAdjust},doRenderBody:function(C,E){var D=E.$layout,A=Ext.XTemplate,F=D.beforeBodyTpl,B=D.afterBodyTpl;if(F){A.getTpl(D,"beforeBodyTpl").applyOut(E,C)}this.renderItems(C,E);this.renderContent(C,E);if(B){A.getTpl(D,"afterBodyTpl").applyOut(E,C)}},doRenderPadding:function(B,D){var C=D.$layout,A=D.$layout.owner,E=A[A.contentPaddingProperty];if(C.managePadding&&E){B.push("padding:",A.unitizeBox(E))}},finishedLayout:function(B){var A=this.innerCt;this.callParent(arguments);if(Ext.isIE8){A.repaint()}if(Ext.isOpera){A.setStyle("position","relative");A.dom.scrollWidth;A.setStyle("position","")}},getContainerSize:function(B,C){var A=this.callParent(arguments),D=B.state.overflowAdjust;if(D){A.width-=D.width;A.height-=D.height}return A},getRenderData:function(){var A=this,B=A.callParent();B.innerCtCls=A.innerCtCls;B.outerCtCls=A.outerCtCls;return B},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(A){return A.overflowXStyle||(A.overflowXStyle=this.owner.scrollFlags.overflowX||A.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(A){return A.overflowYStyle||(A.overflowYStyle=this.owner.scrollFlags.overflowY||A.overflowContext.getStyle("overflow-y"))},initContextItems:function(B){var A=this,D=B.target,C=A.owner.getOverflowEl();B.outerCtContext=B.getEl("outerCt",A);B.innerCtContext=B.getEl("innerCt",A);B.overflowContext=(C===B.el)?B:B.getEl(C);if(D[D.contentPaddingProperty]!==undefined){B.paddingContext=B.innerCtContext}},initLayout:function(){var C=this,B=Ext.getScrollbarSize().width,A=C.owner;C.callParent();if(B&&C.manageOverflow&&!C.hasOwnProperty("lastOverflowAdjust")){if(A.scrollable||C.reserveScrollbar){C.lastOverflowAdjust={width:B,height:0}}}},measureContentHeight:function(B){var A=this.outerCt.getHeight(),C=B.target;if(this.managePadding&&(C[C.contentPaddingProperty]===undefined)){A+=B.targetContext.getPaddingInfo().height}return A},measureContentWidth:function(D){var F,C,B,A,E;if(this.chromeCellMeasureBug){F=this.innerCt.dom;C=F.style;B=C.display;if(B==="table-cell"){C.display="";F.offsetWidth;C.display=B}}if(Ext.isSafari){F=this.outerCt.dom;C=F.style;C.display="table-cell";F.offsetWidth;F.style.display=""}A=this.outerCt.getWidth();E=D.target;if(this.managePadding&&(E[E.contentPaddingProperty]===undefined)){A+=D.targetContext.getPaddingInfo().width}return A},setCtSizeIfNeeded:function(D,B){var E=this,K=B.height,G=D.paddingContext.getPaddingInfo(),I=E.getTarget(),J=E.getOverflowXStyle(D),C=(J==="auto"||J==="scroll"),A=Ext.getScrollbarSize(),F,H;if(K&&!D.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){F=true}if(Ext.isIE8){H=true}if((F||H)&&C&&(I.dom.scrollWidth>I.dom.clientWidth)){K=Math.max(K-A.height,0)}if(F){D.outerCtContext.setProp("height",K+G.height);E.hasOuterCtPxHeight=true}if(H){D.innerCtContext.setProp("height",K);E.hasInnerCtPxHeight=true}}},setupRenderTpl:function(A){this.callParent(arguments);A.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26})