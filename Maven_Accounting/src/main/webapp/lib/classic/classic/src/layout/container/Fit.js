Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.FitLayout",alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",type:"fit",manageMargins:true,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(B,C){var A=C||this.owner.getSizeModel(),D=(A.width.shrinkWrap?0:1)|(A.height.shrinkWrap?0:2);return this.sizePolicies[D]},beginLayoutCycle:function(H,E){var Q=this,R=Q.lastHeightModel&&Q.lastHeightModel.calculated,F=Q.lastWidthModel&&Q.lastWidthModel.calculated,L=F||R,I=0,J=0,P,B,M,O,D,A,G,K,N,C;Q.callParent(arguments);if(L&&H.targetContext.el.dom.tagName.toUpperCase()!=="TD"){L=F=R=false}B=H.childItems;D=B.length;for(M=0;M<D;++M){O=B[M];if(E){P=O.target;G=P.minHeight;K=P.minWidth;if(K||G){A=O.marginInfo||O.getMarginInfo();G+=A.height;K+=A.height;if(I<G){I=G}if(J<K){J=K}}}if(L){N=O.el.dom.style;if(R){N.height=""}if(F){N.width=""}}}if(E){H.maxChildMinHeight=I;H.maxChildMinWidth=J}P=H.target;H.overflowX=(!H.widthModel.shrinkWrap&&H.maxChildMinWidth&&P.scrollFlags.x)||C;H.overflowY=(!H.heightModel.shrinkWrap&&H.maxChildMinHeight&&P.scrollFlags.y)||C},calculate:function(F){var M=this,J=F.childItems,D=J.length,C=M.getContainerSize(F),E={length:D,ownerContext:F,targetSize:C},P=F.widthModel.shrinkWrap,K=F.heightModel.shrinkWrap,I=F.overflowX,G=F.overflowY,L,B,N,H,A,O;F.state.info=E;if(I||G){L=M.getScrollbarsNeeded(I&&C.width,G&&C.height,F.maxChildMinWidth,F.maxChildMinHeight);if(L){B=Ext.getScrollbarSize();if(L&1){C.height-=B.height}if(L&2){C.width-=B.width}}}if(D>0){for(H=0;H<D;++H){E.index=H;M.fitItem(J[H],E)}}else{E.contentWidth=E.contentHeight=0}if(K||P){N=F.targetContext.getPaddingInfo();if(P){if(G&&!C.gotHeight){M.done=false}else{A=E.contentWidth+N.width;if(L&2){A+=B.width}if(!F.setContentWidth(A)){M.done=false}}}if(K){if(I&&!C.gotWidth){M.done=false}else{O=E.contentHeight+N.height;if(L&1){O+=B.height}if(!F.setContentHeight(O)){M.done=false}}}}},fitItem:function(B,C){var A=this;if(B.invalid){A.done=false;return }C.margins=B.getMarginInfo();C.needed=C.got=0;A.fitItemWidth(B,C);A.fitItemHeight(B,C);if(C.got!==C.needed){A.done=false}},fitItemWidth:function(C,D){var A,B;if(D.ownerContext.widthModel.shrinkWrap){B=C.getProp("width")+D.margins.width;A=D.contentWidth;if(A===undefined){D.contentWidth=B}else{D.contentWidth=Math.max(A,B)}}else{if(C.widthModel.calculated){++D.needed;if(D.targetSize.gotWidth){++D.got;this.setItemWidth(C,D)}else{return }}}this.positionItemX(C,D)},fitItemHeight:function(C,D){var B,A;if(D.ownerContext.heightModel.shrinkWrap){A=C.getProp("height")+D.margins.height;B=D.contentHeight;if(B===undefined){D.contentHeight=A}else{D.contentHeight=Math.max(B,A)}}else{if(C.heightModel.calculated){++D.needed;if(D.targetSize.gotHeight){++D.got;this.setItemHeight(C,D)}else{return }}}this.positionItemY(C,D)},positionItemX:function(A,C){var B=C.margins;if(C.index||B.left){A.setProp("x",B.left)}if(B.width&&C.ownerContext.widthModel.shrinkWrap){A.setProp("margin-right",B.width)}},positionItemY:function(A,C){var B=C.margins;if(C.index||B.top){A.setProp("y",B.top)}if(B.height&&C.ownerContext.heightModel.shrinkWrap){A.setProp("margin-bottom",B.height)}},setItemHeight:function(A,B){A.setHeight(B.targetSize.height-B.margins.height)},setItemWidth:function(A,B){A.setWidth(B.targetSize.width-B.margins.width)}})