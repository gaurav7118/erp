Ext.define("Ext.menu.CheckItem",{extend:"Ext.menu.Item",alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:false,checkChangeDisabled:false,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:Ext.baseCSSPrefix+"menu-item-checkbox",initComponent:function(){var A=this;A.checked=!!A.checked;A.callParent(arguments);if(A.group){Ext.menu.Manager.registerCheckable(A);if(A.initialConfig.hideOnClick!==false){A.hideOnClick=true}}},beforeRender:function(){var B=this,A;B.callParent();Ext.apply(B.renderData,{checkboxCls:B.checkboxCls,showCheckbox:B.showCheckbox});A=(B.ariaRenderAttributes||(B.ariaRenderAttributes={}));A["aria-checked"]=B.menu?"mixed":B.checked;if(B.menu){A["aria-label"]=Ext.String.formatEncode(B.submenuText,B.text)}},afterRender:function(){var A=this;A.callParent();A.checked=!A.checked;A.setChecked(!A.checked,true);if(A.checkChangeDisabled){A.disableCheckChange()}if(Ext.isGecko&&A.checkEl){A.checkEl.on("mousedown",A.onMouseDownCheck)}},disableCheckChange:function(){var B=this,A=B.checkEl;if(A){A.addCls(B.disabledCls)}if(Ext.isIE8&&B.rendered){B.el.repaint()}B.checkChangeDisabled=true},enableCheckChange:function(){var B=this,A=B.checkEl;if(A){A.removeCls(B.disabledCls)}B.checkChangeDisabled=false},onMouseDownCheck:function(A){A.preventDefault()},onClick:function(B){var A=this;if(!(A.disabled||A.checkChangeDisabled||A.checked&&A.group||A.menu&&"touch"===B.pointerType&&!A.checkEl.contains(B.target))){A.setChecked(!A.checked);if(B.type==="keydown"&&A.menu){return false}}this.callParent([B])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);this.callParent(arguments)},setText:function(C){var B=this,A=B.ariaEl.dom;B.callParent([C]);if(A&&B.menu){A.setAttribute("aria-label",Ext.String.formatEncode(B.submenuText,C))}},setChecked:function(E,C){var D=this,F=D.checkedCls,G=D.uncheckedCls,B=D.el,A=D.ariaEl.dom;if(D.checked!==E&&(C||D.fireEvent("beforecheckchange",D,E)!==false)){if(B){if(E){B.addCls(F);B.removeCls(G)}else{B.addCls(G);B.removeCls(F)}}if(A){A.setAttribute("aria-checked",D.menu?"mixed":!!E)}D.checked=E;Ext.menu.Manager.onCheckChange(D,E);if(!C){Ext.callback(D.checkHandler,D.scope,[D,E],0,D);D.fireEvent("checkchange",D,E)}}}})