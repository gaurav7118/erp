Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:true,mixins:["Ext.mixin.Queryable"],activated:false,activeCls:Ext.baseCSSPrefix+"menu-item-active",clickHideDelay:0,destroyMenu:true,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:Ext.baseCSSPrefix+"menu-item",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",linkHrefCls:Ext.baseCSSPrefix+"menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",initComponent:function(){var B=this,A=B.cls?[B.cls]:[],C;if(B.hasOwnProperty("canActivate")){B.focusable=B.canActivate}if(B.plain){A.push(Ext.baseCSSPrefix+"menu-item-plain")}if(A.length){B.cls=A.join(" ")}if(B.menu){C=B.menu;B.menu=null;B.setMenu(C)}B.callParent(arguments)},canFocus:function(){var A=this;return A.focusable&&A.rendered&&A.canActivate!==false&&!A.destroying&&!A.destroyed&&A.isVisible(true)},onFocus:function(B){var A=this;A.callParent([B]);if(!A.disabled){if(!A.plain){A.addCls(A.activeCls)}A.activated=true;if(A.hasListeners.activate){A.fireEvent("activate",A)}}},onFocusLeave:function(B){var A=this;A.callParent([B]);if(A.activated){if(!A.plain){A.removeCls(A.activeCls)}A.doHideMenu();A.activated=false;if(A.hasListeners.deactivate){A.fireEvent("deactivate",A)}}},doHideMenu:function(){var A=this.menu;this.cancelDeferExpand();if(A&&A.isVisible()){A.hide()}},deferHideParentMenus:function(){for(var A=this.getRefOwner();A&&((A.isMenu&&A.floating)||A.isMenuItem);A=A.getRefOwner()){if(A.isMenu){A.hide()}}},expandMenu:function(C,A){var B=this;if(B.activated&&B.menu){B.hideOnClick=false;B.cancelDeferHide();A=A==null?B.menuExpandDelay:A;if(A===0){B.doExpandMenu(C)}else{B.cancelDeferExpand();B.expandMenuTimer=Ext.defer(B.doExpandMenu,A,B,[C])}}},doExpandMenu:function(A){var B=this,C=B.menu;if(!C.isVisible()){B.parentMenu.activeChild=C;C.ownerCmp=B;C.parentMenu=B.parentMenu;C.constrainTo=document.body;C.autoFocus=!A||!A.pointerType;C.showBy(B,B.menuAlign)}},getRefItems:function(A){var C=this.menu,B;if(C){B=C.getRefItems(A);B.unshift(C)}return B||[]},getValue:function(){return this.value},hideMenu:function(A){var B=this;if(B.menu){B.cancelDeferExpand();B.hideMenuTimer=Ext.defer(B.doHideMenu,Ext.isNumber(A)?A:B.menuHideDelay,B)}},onClick:function(E){var D=this,C=D.clickHideDelay,F=E.browserEvent,B,A;if(!D.href||D.disabled){E.stopEvent();if(D.disabled){return false}}if(D.disabled||D.handlingClick){return }if(D.hideOnClick){if(!C){D.deferHideParentMenus()}else{D.deferHideParentMenusTimer=Ext.defer(D.deferHideParentMenus,C,D)}}B=D.fireEvent("click",D,E);if(D.destroyed){return }if(B!==false&&D.handler){Ext.callback(D.handler,D.scope,[D,E],0,D)}if(Ext.isIE9m){A=F.returnValue===false?true:false}else{A=!!F.defaultPrevented}if(D.href&&E.type!=="click"&&!A){D.handlingClick=true;D.itemEl.dom.click();D.handlingClick=false}if(!D.hideOnClick){D.focus()}return B},onRemoved:function(){var A=this;if(A.activated&&A.parentMenu.activeItem===A){A.parentMenu.deactivateActiveItem()}A.callParent(arguments);A.parentMenu=A.ownerCmp=null},beforeDestroy:function(){var A=this;if(A.rendered){A.clearTip()}A.callParent()},onDestroy:function(){var A=this;A.cancelDeferExpand();A.cancelDeferHide();clearTimeout(A.deferHideParentMenusTimer);A.setMenu(null);A.callParent(arguments)},beforeRender:function(){var I=this,J=I.glyph,H=Ext._glyphFontFamily,E=!!(I.icon||I.iconCls||J),K=!!I.menu,F=((I.iconAlign==="right")&&!K),C=I.isMenuCheckItem,A=[],D=I.ownerCt,G=D.plain,B;if(I.plain){I.ariaEl="el"}I.callParent();if(E){if(K&&I.showCheckbox){E=false}}if(typeof J==="string"){B=J.split("@");J=B[0];H=B[1]}if(!G||(E&&!F)||C){if(D.showSeparator&&!G){A.push(I.indentCls)}else{A.push(I.indentNoSeparatorCls)}}if(K){A.push(I.indentRightArrowCls)}else{if(E&&(F||C)){A.push(I.indentRightIconCls)}}Ext.applyIf(I.renderData,{hasHref:!!I.href,href:I.href||"#",hrefTarget:I.hrefTarget,icon:I.icon,iconCls:I.iconCls,glyph:J,glyphCls:J?Ext.baseCSSPrefix+"menu-item-glyph":undefined,glyphFontFamily:H,hasIcon:E,hasMenu:K,indent:!G||E||C,isCheckItem:C,rightIcon:F,plain:I.plain,text:I.text,arrowCls:I.arrowCls,baseIconCls:I.baseIconCls,textCls:I.textCls,indentCls:A.join(" "),linkCls:I.linkCls,linkHrefCls:I.linkHrefCls,groupCls:I.group?I.groupCls:"",tabIndex:I.tabIndex})},onRender:function(){var A=this;A.callParent(arguments);if(A.tooltip){A.setTooltip(A.tooltip,true)}},getMenu:function(){return this.menu||null},setMenu:function(H,G){var F=this,C=F.menu,B=F.arrowEl,A=F.ariaEl.dom,E,D;if(C){C.ownerCmp=C.parentMenu=null;if(G===true||(G!==false&&F.destroyMenu)){Ext.destroy(C)}if(A){A.removeAttribute("aria-haspopup");A.removeAttribute("aria-owns")}else{E=(F.ariaRenderAttributes||(F.ariaRenderAttributes={}));delete E["aria-haspopup"];delete E["aria-owns"]}}if(H){D=H.isMenu;H=F.menu=Ext.menu.Manager.get(H,{ownerCmp:F,focusOnToFront:false});H.setOwnerCmp(F,D);if(A){A.setAttribute("aria-haspopup",true);A.setAttribute("aria-owns",H.id)}else{E=(F.ariaRenderAttributes||(F.ariaRenderAttributes={}));E["aria-haspopup"]=true;E["aria-owns"]=H.id}}else{H=F.menu=null}if(H&&F.rendered&&!F.destroying&&B){B[H?"addCls":"removeCls"](F.arrowCls)}},setHandler:function(B,A){this.handler=B||null;this.scope=A},setIcon:function(B){var A=this.iconEl,C=this.icon;if(A){A.src=B||Ext.BLANK_IMAGE_URL}this.icon=B;this.fireEvent("iconchange",this,C,B)},setIconCls:function(B){var D=this,A=D.iconEl,C=D.iconCls;if(A){if(D.iconCls){A.removeCls(D.iconCls)}if(B){A.addCls(B)}}D.iconCls=B;D.fireEvent("iconchange",D,C,B)},setText:function(D){var C=this,B=C.textEl||C.el,A=C.text;C.text=D;if(C.rendered){B.setHtml(D||"");C.updateLayout()}C.fireEvent("textchange",C,A,D)},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(C,A){var B=this;if(B.rendered){if(!A){B.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(C)){Ext.tip.QuickTipManager.register(Ext.apply({target:B.itemEl.id},C));B.tooltip=C}else{B.itemEl.dom.setAttribute(B.getTipAttr(),C)}}else{B.tooltip=C}return B},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}})