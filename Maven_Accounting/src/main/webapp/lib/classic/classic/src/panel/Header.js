Ext.define("Ext.panel.Header",{extend:"Ext.panel.Bar",xtype:"header",requires:["Ext.panel.Title","Ext.panel.Tool"],mixins:["Ext.util.FocusableContainer"],isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(B,A){if(typeof B!=="object"){B={text:B}}return Ext.merge(A?Ext.Object.chain(A):{},B)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var D=this,C=D.items,B=D.itemPosition,A=[D.headerCls];D.tools=D.tools||[];D.items=C=(C?C.slice():[]);if(B!==undefined){D._userItems=C.slice();D.items=C=[]}D.indicateDragCls=D.headerCls+"-draggable";if(D.indicateDrag){A.push(D.indicateDragCls)}D.addCls(A);D.syncNoBorderCls();D.enableFocusableContainer=!D.isAccordionHeader&&D.tools.length>0;if(D.enableFocusableContainer){D.ariaRole="toolbar"}Ext.Array.push(C,D.tools);D.tools.length=0;D.callParent();D.on({dblclick:D.onDblClick,click:D.onClick,element:"el",scope:D})},addTool:function(A){var B=this;B.add(Ext.ComponentManager.create(A,"tool"));if(!B.isAccordionHeader&&B.tools.length>0&&!B.enableFocusableContainer){B.enableFocusableContainer=true;B.ariaRole="toolbar";if(B.rendered){B.ariaEl.dom.setAttribute("role","toolbar");B.initFocusableContainer(true)}}},afterLayout:function(){var B=this,E,A,C,D;if(B.vertical){A=B.frameTR;if(A){E=B.frameBR;C=B.frameTL;D=(B.getWidth()-A.getPadding("r")-((C)?C.getPadding("l"):B.el.getBorderWidth("l")))+"px";E.setStyle("background-position-x",D);A.setStyle("background-position-x",D)}}this.callParent()},applyTitle:function(E,C){var D=this,A,B;E=E||"";A=typeof E==="string";if(A){E={text:E}}if(C){Ext.suspendLayouts();C.setConfig(E);Ext.resumeLayouts(true);E=C}else{if(A){E.xtype="title"}E.ui=D.ui;B=("rotation" in E);E.id=D.id+"-title";if(D.isAccordionHeader){E.ariaRole="tab";E.textElRole=null;E.focusable=true}E=Ext.create(E);if(!B&&D.vertical&&D.titleRotation==="default"){E.rotation=1}}return E},applyTitlePosition:function(B){var A=this.items.getCount();if(this._titleInItems){--A}return Math.max(Math.min(B,A),0)},beforeLayout:function(){this.callParent();this.syncBeforeAfterTitleClasses()},beforeRender:function(){var B=this,A=B.itemPosition;B.protoEl.unselectable();B.callParent();if(A!==undefined){B.insert(A,B._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(B,A){var C=this.tools;this.callParent([B,A]);if(B.isTool){C.push(B);C[B.type]=B}},onAdded:function(B,C,A){this.syncNoBorderCls();this.callParent([B,C,A])},onRemoved:function(B,C,A){this.syncNoBorderCls();this.callParent([B,C,A])},setDock:function(C){var B=this,E=B.getTitle(),A=B.getTitleRotation(),D=E.getRotation();Ext.suspendLayouts();B.callParent([C]);if(A==="default"){A=(B.vertical?1:0);if(A!==D){E.setRotation(A)}if(B.rendered){B.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(A){this.getTitle().setGlyph(A)},updateIcon:function(A){this.getTitle().setIcon(A)},updateIconAlign:function(B,A){this.getTitle().setIconAlign(B)},updateIconCls:function(A){this.getTitle().setIconCls(A)},updateTitle:function(B,A){if(!A){this.insert(this.getTitlePosition(),B);this._titleInItems=true}this.titleCmp=B},updateTitleAlign:function(B,A){this.getTitle().setTextAlign(B)},updateTitlePosition:function(A){this.insert(A,this.getTitle())},updateTitleRotation:function(A){if(A==="default"){A=(this.vertical?1:0)}this.getTitle().setRotation(A)},privates:{fireClickEvent:function(A,C){var B="."+Ext.panel.Tool.prototype.baseCls;if(!C.getTarget(B)){this.fireEvent(A,this,C)}},getFramingInfoCls:function(){var C=this,B=C.callParent(),A=C.ownerCt;if(!C.expanding&&A&&(A.collapsed||C.isCollapsedExpander)){B+="-"+A.collapsedCls}return B+"-"+C.dock},onClick:function(A){this.fireClickEvent("click",A)},onDblClick:function(A){this.fireClickEvent("dblclick",A)},onFocusableContainerMousedown:function(C,B){var A=Ext.Component.fromElement(B);if(A===this){C.preventDefault()}else{this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)}},syncBeforeAfterTitleClasses:function(C){var I=this,H=I.items,F=H.items,B=I.getTitlePosition(),A=F.length,G=H.generation,J=I.syncBeforeAfterGen,L,E,D,K;if(!C&&(J===G)){return }I.syncBeforeAfterGen=G;for(D=0;D<A;++D){K=F[D];L=K.afterTitleCls||(K.afterTitleCls=K.baseCls+"-after-title");E=K.beforeTitleCls||(K.beforeTitleCls=K.baseCls+"-before-title");if(!I.title||D<B){if(J){K.removeCls(L)}K.addCls(E)}else{if(D>B){if(J){K.removeCls(E)}K.addCls(L)}}}},syncNoBorderCls:function(){var B=this,A=this.ownerCt,C=B.headerCls+"-noborder";if(A?(A.border===false&&!A.frame):B.border===false){B.addCls(C)}else{B.removeCls(C)}}}})