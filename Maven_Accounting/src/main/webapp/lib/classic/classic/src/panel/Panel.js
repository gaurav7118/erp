Ext.define("Ext.panel.Panel",{extend:"Ext.container.Container",alias:"widget.panel",alternateClassName:"Ext.Panel",requires:["Ext.panel.Header","Ext.util.MixedCollection","Ext.toolbar.Toolbar","Ext.fx.Anim","Ext.util.KeyMap","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock","Ext.util.Memento"],mixins:{docking:"Ext.container.DockingContainer"},childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',Ext.baseCSSPrefix,'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",closeToolText:"Close panel",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:Ext.baseCSSPrefix+"panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(B){var C=this,A=C.rendered?C.body:C.getProtoBody();A.addCls(B);return C},addTool:function(E){if(!Ext.isArray(E)){E=[E]}var D=this,G=D.header,A=E.length,F=D.tools,C,B;if(!G||!G.isHeader){G=null;if(!F){D.tools=F=[]}}for(C=0;C<A;C++){B=E[C];B.toolOwner=D;if(G){G.addTool(B)}else{F.push(B)}}D.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(C){var B=this,D=B.collapsible,A=B.collapseTool;B.collapsible=C;if(C&&!D){B.updateCollapseTool();A=B.collapseTool;if(A){A.show()}}else{if(!C&&D){if(A){A.hide()}}}},addUIClsToElement:function(B){var C=this,A=C.callParent(arguments);C.addBodyCls([Ext.baseCSSPrefix+B,C.baseCls+"-body-"+B,C.baseCls+"-body-"+C.ui+"-"+B]);return A},afterCollapse:function(C){var B=this,A=B.ariaEl.dom,D=B.ownerLayout;B.isCollapsingOrExpanding=0;B.updateCollapseTool();if(C){B.removeCls(Ext.baseCSSPrefix+"animating-size")}if(D){D.afterCollapse(B,C)}if(A){A.setAttribute("aria-expanded",false)}if(B.isAccordionPanel){B.body.dom.setAttribute("aria-hidden",true)}B.setHiddenDocked();B.fireEvent("collapse",B)},afterExpand:function(C){var B=this,A=B.ariaEl.dom,D=B.ownerLayout;B.isCollapsingOrExpanding=0;B.updateCollapseTool();if(C){B.removeCls(Ext.baseCSSPrefix+"animating-size")}if(D){D.afterExpand(B,C)}if(A){A.setAttribute("aria-expanded",true)}if(B.isAccordionPanel){B.body.dom.setAttribute("aria-hidden",false)}B.fireEvent("expand",B);B.fireHierarchyEvent("expand")},beforeDestroy:function(){var A=this;Ext.destroy(A.placeholder,A.ghostPanel,A.dd,A.accordionKeyNav,A.defaultButtonKeyNav);A.destroyDockedItems();A.callParent()},destroy:function(){this.callParent();this.dockedItems=this.bodyContainer=null},beforeRender:function(){var B=this,A;B.getProtoBody();B.callParent();B.initTools();if(!(B.preventHeader||(B.header===false))||B.isViewportBorderChild){B.updateHeader()}B.afterHeaderInit=true;if(B.collapsed){if(B.isPlaceHolderCollapse()){if(!B.hidden){B.setHiddenState(true);B.preventCollapseFire=true;B.placeholderCollapse();delete B.preventCollapseFire;A=B.collapsed;B.collapsed=false}}else{B.beginCollapse();B.addClsWithUI(B.collapsedCls)}}if(A){B.collapsed=A}},getMemento:function(A){var B=this;if(A&&typeof A==="string"){A+="Memento";return B[A]||(B[A]=new Ext.util.Memento(B))}},beginCollapse:function(){var E=this,C=E.lastBox,G=E.rendered,B=E.getMemento("collapse"),D=E.getSizeModel(),F=E.header,A;B.capture(["height","minHeight","width","minWidth"]);if(C){B.capture(E.restoreDimension(),C,"last.")}if(E.collapsedVertical()){if(D.width.shrinkWrap){E.width=G?E.getWidth():E.width||E.minWidth||100}delete E.height;E.minHeight=0}else{if(E.collapsedHorizontal()){if(D.height.shrinkWrap){E.height=G?E.getHeight():E.height||E.minHeight||100}delete E.width;E.minWidth=0}}if(E.ownerCt){E.ownerCt.getLayout().beginCollapse(E)}if(!E.isPlaceHolderCollapse()&&F!==false){if(F===(A=E.getReExpander())){F.collapseImmune=true;F.getInherited().collapseImmune=true;F.addClsWithUI(E.getHeaderCollapsedClasses(F));if(F.rendered){F.updateFrame()}}else{if(A.el){A.el.show();A.hidden=false}}}if(E.resizer){E.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var E=this,D=E.lastBox,C=E.getMemento("collapse"),A=E.restoreDimension(),F=E.header,B;if(C){C.restore(["minHeight","minWidth",A]);if(D){C.restore(A,true,D,"last.")}}if(E.ownerCt){E.ownerCt.getLayout().beginExpand(E)}if(!E.isPlaceHolderCollapse()&&F!==false){if(F===(B=E.getReExpander())){delete F.collapseImmune;delete F.getInherited().collapseImmune;F.removeClsWithUI(E.getHeaderCollapsedClasses(F));if(F.rendered){F.expanding=true;F.updateFrame();delete F.expanding}}else{B.hidden=true;B.el.hide()}}if(E.resizer){E.resizer.enable()}},bridgeToolbars:function(){var A=this,F=[],E=A.minButtonWidth,C,B;function D(G,I,H){if(Ext.isArray(G)){G={xtype:"toolbar",items:G}}else{if(!G.xtype){G.xtype="toolbar"}}G.dock=I;if(H){G.layout=Ext.applyIf(G.layout||{},{pack:{left:"start",center:"center"}[A.buttonAlign]||"end"})}return G}if(A.tbar){F.push(D(A.tbar,"top"));A.tbar=null}if(A.bbar){F.push(D(A.bbar,"bottom"));A.bbar=null}if(A.buttons){A.fbar=A.buttons;A.buttons=null}if(A.fbar){C=D(A.fbar,"bottom",true);C.ui="footer";if(E){B=C.defaults;C.defaults=function(I){var J=B||{},H=!I.xtype||I.isButton,G;if(!H){G=Ext.ClassManager.getByAlias("widget."+I.xtype);if(G){H=G.prototype.isButton}}if(H&&!("minWidth" in J)){J=Ext.apply({minWidth:E},J)}return J}}F.push(C);A.fbar=null}if(A.lbar){F.push(D(A.lbar,"left"));A.lbar=null}if(A.rbar){F.push(D(A.rbar,"right"));A.rbar=null}if(A.dockedItems){if(A.dockedItems.isMixedCollection){A.addDocked(F)}else{if(!Ext.isArray(A.dockedItems)){A.dockedItems=[A.dockedItems]}A.dockedItems=A.dockedItems.concat(F)}}else{A.dockedItems=F}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(E,A){var D=this,F=E||D.collapseDirection,B=D.ownerCt,C=D.ownerLayout,G=D.rendered;if(D.isCollapsingOrExpanding){return D}if(arguments.length<2){A=D.animCollapse}if(D.collapsed||D.fireEvent("beforecollapse",D,E,A)===false){return D}if(C&&C.onBeforeComponentCollapse){if(C.onBeforeComponentCollapse(D)===false){return D}}if(G&&B&&D.isPlaceHolderCollapse()){return D.placeholderCollapse(E,A)}D.collapsed=F;if(G){D.beginCollapse()}D.getInherited().collapsed=true;D.fireHierarchyEvent("collapse");if(G){D.doCollapseExpand(1,A)}return D},collapsedHorizontal:function(){var A=this.getCollapsed();return A==="left"||A==="right"},collapsedVertical:function(){var A=this.getCollapsed();return A==="top"||A==="bottom"},convertCollapseDir:function(A){return A.substr(0,1)},createGhost:function(A){var B=this,D=B.header,C=B.frame&&!B.alwaysFramed;return{xtype:"panel",hidden:false,header:D?{titleAlign:D.getTitleAlign()}:null,ui:C?B.ui.replace(/-framed$/,""):B.ui,id:B.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,focusable:false,floating:true,shadow:false,frame:C,shim:B.shim,alwaysFramed:B.alwaysFramed,overlapHeader:B.overlapHeader,headerPosition:B.getHeaderPosition(),titleRotation:B.getTitleRotation(),baseCls:B.baseCls,getRefOwner:function(){return B.getRefOwner()},cls:B.baseCls+"-ghost "+(A||"")}},createReExpander:function(F,E){var D=this,H=F==="left",C=F==="right",G=H||C,B=D.ownerCt,A=Ext.apply({hideMode:"offsets",title:D.getTitle(),titleAlign:D.getTitleAlign(),vertical:G,textCls:D.headerTextCls,icon:D.getIcon(),iconCls:D.getIconCls(),iconAlign:D.getIconAlign(),glyph:D.getGlyph(),baseCls:D.self.prototype.baseCls+"-header",ui:D.ui,frame:D.frame&&D.frameHeader,ignoreParentFrame:D.frame||D.overlapHeader,ignoreBorderManagement:D.frame||D.ignoreHeaderBorderManagement,indicateDrag:D.draggable,collapseImmune:true,ariaRole:D.ariaRole,preventRefocus:true,ownerCt:(B&&D.collapseMode==="placeholder")?B:D,ownerLayout:D.componentLayout,forceOrientation:true,margin:D.margin},E);if(D.collapseMode==="mini"){if(G){A.width=1}else{A.height=1}}if(!D.hideCollapseTool){if(H||(C&&D.isPlaceHolderCollapse())){A.titlePosition=1}A.tools=[{xtype:"tool",type:"expand-"+D.getOppositeDirection(F),isDefaultExpandTool:true,uiCls:["top"],handler:D.toggleCollapse,scope:D,tooltip:D.expandToolText}]}A=new Ext.panel.Header(A);A.addClsWithUI(D.getHeaderCollapsedClasses(A));A.expandTool=A.down("tool[isDefaultExpandTool=true]");return A},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(A,B){var D=this,C=D.animCollapse,E=D.ownerLayout;D.animCollapse=B;D.isCollapsingOrExpanding=A;if(B){D.addCls(Ext.baseCSSPrefix+"animating-size")}if(E&&!B){E.onContentChange(D)}else{D.updateLayout({isRoot:true})}D.animCollapse=C;return D},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(A){var C=this,B=C.ownerLayout,D=C.rendered;if(C.isCollapsingOrExpanding){return C}if(!arguments.length){A=C.animCollapse}if(!C.collapsed&&!C.floatedFromCollapse){return C}if(C.fireEvent("beforeexpand",C,A)===false){return C}if(B&&B.onBeforeComponentExpand){if(B.onBeforeComponentExpand(C)===false){return C}}delete C.getInherited().collapsed;if(D&&C.isPlaceHolderCollapse()){return C.placeholderExpand(A)}C.restoreHiddenDocked();if(D){C.beginExpand()}C.collapsed=false;if(C.rendered){C.doCollapseExpand(2,A)}return C},findReExpander:function(F){var E=this,G=Ext.Component,D=E.dockedItems.items,A=D.length,B,C;if(E.collapseMode==="mini"){return }switch(F){case G.DIRECTION_TOP:case G.DIRECTION_BOTTOM:for(C=0;C<A;C++){B=D[C];if(!B.hidden){if(B.isHeader&&(!B.dock||B.dock==="top"||B.dock==="bottom")){return B}}}break;case G.DIRECTION_LEFT:case G.DIRECTION_RIGHT:for(C=0;C<A;C++){B=D[C];if(!B.hidden){if(B.isHeader&&(B.dock==="left"||B.dock==="right")){return B}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var G=this,H=G.placeholder,A=H.getSize(),F=Ext.panel.Panel.floatCls,D=G.collapsed,I=G.ownerCt||G,B,C,E;if(G.isSliding){return }if(G.el.hasCls(F)){G.slideOutFloatedPanel();return }G.isSliding=true;H.el.hide();H.hidden=true;G.el.show();G.setHiddenState(false);G.collapsed=false;I.updateLayout();H.el.show();H.hidden=false;G.el.hide();G.setHiddenState(true);G.collapsed=D;I.updateLayout();E=G.getBox(false,true);G.slideOutTask=G.slideOutTask||new Ext.util.DelayedTask(G.slideOutFloatedPanel,G);if(Ext.supports.Touch){Ext.on("mousedown",C=function(J){if(!J.within(G.el)){Ext.un("mousedown",C);G.slideOutFloatedPanel()}})}if(!G.placeholderListener){G.placeholderListener=H.on({resize:G.onPlaceholderResize,scope:G,destroyable:true})}H.el.on("mouseleave",G.onMouseLeaveFloated,G);G.el.on("mouseleave",G.onMouseLeaveFloated,G);H.el.on("mouseenter",G.onMouseEnterFloated,G);G.el.on("mouseenter",G.onMouseEnterFloated,G);G.el.addCls(F);G.floated=D;if(G.collapseTool){G.collapseTool.el.hide()}switch(G.collapsed){case"top":G.width=A.width;G.setLocalXY(E.x,E.y+A.height);break;case"right":G.height=A.height;G.setLocalXY(E.x-A.width,E.y);break;case"bottom":G.width=A.width;G.setLocalXY(E.x,E.y-A.height);break;case"left":G.height=A.height;G.setLocalXY(E.x+A.width,E.y);break}B=G.convertCollapseDir(G.collapsed);G.floatedFromCollapse=G.collapsed;G.collapsed=false;G.setHiddenState(false);G.el.slideIn(B,{preserveScroll:true,duration:Ext.Number.from(G.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){G.isSliding=false;G.fireEvent("float",G)}}})},onPlaceholderResize:function(E,C,A){var B=this,D=B.getBox(false,true),F=E.getBox(false,true);switch(B.floated){case"top":B.width=C;B.setLocalY(F.y+F.height);break;case"right":B.height=A;B.setLocalX(F.x-D.width);break;case"bottom":B.width=C;B.setLocalY(F.y-D.height);break;case"left":B.height=A;B.setLocalX(F.x+F.width);break}B.updateLayout({isRoot:true})},getAnimationProps:function(){var B=this,C=B.animCollapse,A;A=B.callParent();if(typeof C==="number"){A.duration=C}return A},getCollapsed:function(){var A=this;if(A.collapsed===true){return A.collapseDirection}return A.collapsed},getCollapsedDockedItems:function(){var A=this;return A.header===false||A.collapseMode==="placeholder"?A.emptyArray:[A.getReExpander()]},getComponent:function(A){var B=this.callParent(arguments);if(B===undefined&&!Ext.isNumber(A)){B=this.getDockedComponent(A)}return B},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(D){var B=this,C=B.collapsedCls,A;A=[C,C+"-"+D.getDockName()];if(B.border&&(!B.frame||(B.frame&&Ext.supports.CSS3BorderRadius))){A.push(C+"-border-"+D.getDockName())}return A},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(A){var B=Ext.Component;switch(A){case B.DIRECTION_TOP:return B.DIRECTION_BOTTOM;case B.DIRECTION_RIGHT:return B.DIRECTION_LEFT;case B.DIRECTION_BOTTOM:return B.DIRECTION_TOP;case B.DIRECTION_LEFT:return B.DIRECTION_RIGHT}},getPlaceholder:function(E){var D=this,G=E||D.collapseDirection,C=null,F=D.placeholder,B=D.floatable,A=D.titleCollapse;if(!F){if(B||(D.collapsible&&A)){C={click:{fn:(!A&&B)?D.floatCollapsedPanel:D.toggleCollapse,element:"el",scope:D}}}D.placeholder=F=Ext.widget(D.createReExpander(G,{id:D.id+"-placeholder",listeners:C}))}if(!F.placeholderFor){if(!F.isComponent){D.placeholder=F=D.lookupComponent(F)}Ext.applyIf(F,{margin:D.margin,placeholderFor:D,synthetic:true});F.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+G+"-placeholder",D.collapsedCls])}return F},getProtoBody:function(){var B=this,A=B.protoBody;if(!A){B.protoBody=A=new Ext.util.ProtoElement({cls:B.bodyCls,style:B.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return A},getReExpander:function(C){var B=this,D=C||B.collapseDirection,A=B.reExpander||B.findReExpander(D);B.expandDirection=B.getOppositeDirection(D);if(!A){B.reExpander=A=B.createReExpander(D,{dock:D,cls:Ext.baseCSSPrefix+"docked "+B.baseCls+"-"+B.ui+"-collapsed",isCollapsedExpander:true});B.dockedItems.insert(0,A)}return A},getRefItems:function(A){var B=this.callParent(arguments);return this.getDockingRefItems(A,B)},getState:function(){var A=this,C=A.callParent()||{},E=A.collapsed,B=A.floated,D;if(B){A.collapsed=B}C=A.addPropertyToState(C,"collapsed");if(B){A.collapsed=E}if(A.getCollapsed()){D=A.getMemento("collapse").data;C=A.addPropertyToState(C,"collapsed",D);if(A.collapsedVertical()){delete C.height;if(D){C=A.addPropertyToState(C,"height",D.height)}}else{delete C.width;if(D){C=A.addPropertyToState(C,"width",D.width)}}}return C},applyState:function(C){var B=this,A={},D;if(C){D=C.collapsed;if(D){A=B.getMemento("collapse");Ext.Object.merge(A.data,D);C.collapsed=true}B.callParent(arguments)}},ghost:function(K){var G=this,A=G.ghostPanel,D=G.getBox(),C=G.header,I,E,H,J,F,B;if(!A){G.ghostPanel=A=Ext.widget(G.createGhost(K));A.el.dom.removeAttribute("tabIndex")}else{A.el.show()}A.setHiddenState(false);A.floatParent=G.floatParent;A.toFront();if(C&&!G.preventHeader){I=A.header;I.suspendLayouts();E=I.query("tool");for(B=E.length;B--;){I.remove(E[B])}I.setTitlePosition(0);A.addTool(G.ghostTools());A.setTitle(G.getTitle());I.setTitlePosition(C.titlePosition);J=G.getIconCls();if(J){A.setIconCls(J)}else{H=G.getIcon();if(H){A.setIcon(H)}else{F=G.getGlyph();if(F){A.setGlyph(F)}}}I.addCls(Ext.baseCSSPrefix+"header-ghost");I.resumeLayouts()}A.setPagePosition(D.x,D.y);A.setSize(D.width,D.height);G.el.hide();return A},ghostTools:function(){var E=[],F=this.header,D=F?F.query("tool[hidden=false]"):[],C,A,B;if(D.length){C=0;A=D.length;for(;C<A;C++){B=D[C];E.push({type:B.type,tooltip:B.tooltip})}}else{E=[{type:"placeholder"}]}return E},initBodyBorder:function(){var A=this;if(A.frame&&A.bodyBorder){if(!Ext.isNumber(A.bodyBorder)){A.bodyBorder=1}A.getProtoBody().setStyle("border-width",this.unitizeBox(A.bodyBorder))}},initBodyStyles:function(){var B=this,A=B.getProtoBody();if(B.bodyPadding!==undefined){if(B.layout.managePadding){A.setStyle("padding",0)}else{A.setStyle("padding",this.unitizeBox((B.bodyPadding===true)?5:B.bodyPadding))}}B.initBodyBorder()},initBorderProps:function(){var A=this;if(A.frame&&A.border&&A.bodyBorder===undefined){A.bodyBorder=false}if(A.frame&&A.border&&(A.bodyBorder===false||A.bodyBorder===0)){A.manageBodyBorders=true}},initComponent:function(){var A=this;if(A.collapsible){A.addStateEvents(["expand","collapse"])}if(A.unstyled){A.setUI("plain")}if(A.frame){A.setUI(A.ui+"-framed")}A.bridgeToolbars();A.initBorderProps();A.callParent();A.collapseDirection=A.collapseDirection||A.getHeaderPosition()||Ext.Component.DIRECTION_TOP;A.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){this.callParent();this.initDockingItems()},initRenderData:function(){var A=this,B=A.callParent();A.initBodyStyles();A.protoBody.writeTo(B);delete A.protoBody;if(A.headingText){B.headingText=A.headingText;A.addChildEl("headingEl")}if(A.bodyAriaRole){B.bodyAriaAttributes={role:A.bodyAriaRole};if(!A.ariaStaticRoles[A.bodyAriaRole]&&A.bodyAriaRenderAttributes){Ext.apply(B.bodyAriaAttributes,A.bodyAriaRenderAttributes)}}return B},calculateConstrainedPosition:function(F,B,E,A){var G=this,H=G.header,D,C;if(G.constrainHeader){D=H.lastBox;if(A){if(!H.vertical){A=[A[0],D?D.height:A[1]]}else{A=[D?D.width:A[0],A[1]]}}else{if(D){A=[D.width,D.height]}}C=G.floatParent;F=F||G.constrainTo||(C?C.getTargetEl():null)||G.container||G.el.parent()}return G.callParent([F,B,E,A])},initTools:function(){var C=this,E=C.tools,B,D,A;C.tools=[];for(B=E&&E.length;B;){--B;C.tools[B]=A=E[B];A.toolOwner=C}if(C.collapsible&&!(C.hideCollapseTool||C.header===false||C.preventHeader)){C.updateCollapseTool();if(C.collapseFirst){C.tools.unshift(C.collapseTool)}}C.addTools();if(C.pinnable){C.initPinnable()}if(C.closable){C.addClsWithUI("closable");D={xtype:"tool",type:"close",scope:C,handler:C.close,tooltip:C.closeToolText};if(C.isAccordionPanel){D.focusable=false;D.ariaRole="presentation"}C.addTool(D)}if(C.collapseTool&&!C.collapseFirst){C.addTool(C.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return this.callParent()},isPlaceHolderCollapse:function(){return this.collapseMode==="placeholder"},isVisible:function(A){var B=this;if(B.collapsed&&B.placeholder){return B.placeholder.isVisible(A)}return B.callParent(arguments)},onBoxReady:function(){var A=this,B;A.callParent(arguments);if(A.collapsed){A.setHiddenDocked()}if(A.isAccordionPanel){A.ariaEl=A.header.titleCmp.el;A.ariaEl.dom.setAttribute("aria-expanded",!A.collapsed);A.body.dom.setAttribute("aria-labelledby",A.header.titleCmp.id);A.body.dom.setAttribute("aria-hidden",!!A.collapsed);A.accordionKeyNav=new Ext.util.KeyNav({target:A.header.titleCmp.el,scope:A,left:A.navigateAccordion,right:A.navigateAccordion,left:A.navigateAccordion,up:A.navigateAccordion,down:A.navigateAccordion,home:A.navigateAccordion,end:A.navigateAccordion,space:A.toggleCollapse,enter:A.toggleCollapse,del:{alt:true,fn:A.maybeClose}})}if(A.defaultButton){B=A.defaultButtonTarget?A[A.defaultButtonTarget]:A.body;A.defaultButtonKeyNav=new Ext.util.KeyNav({target:B,scope:A,defaultEventAction:"stopEvent",enter:A.fireDefaultButton})}},onHide:function(E,B,C){var D=this,A=D.dd;if(D.floatedFromCollapse){D.slideOutFloatedPanel(true)}if(D.draggable&&A){A.endDrag()}if(D.collapsed&&D.placeholder){if(D.splitter){Ext.suspendLayouts();D.splitter.hide();Ext.resumeLayouts()}D.placeholder.hide()}else{D.callParent([E,B,C])}},onMouseEnterFloated:function(A){this.slideOutTask.cancel()},onMouseLeaveFloated:function(A){this.slideOutTask.delay(500)},onRemoved:function(B){var A=this;if(A.placeholder&&!B){A.ownerCt.remove(A.placeholder,false)}A.callParent(arguments)},onShow:function(){var A=this;if(A.collapsed&&A.isPlaceHolderCollapse()){if(A.splitter){Ext.suspendLayouts();A.splitter.show();Ext.resumeLayouts()}A.setHiddenState(true);A.placeholderCollapse()}else{A.callParent(arguments)}},placeholderCollapse:function(F,A){var E=this,B=E.ownerCt,I=F||E.collapseDirection,D=Ext.panel.Panel.floatCls,C=E.collapseTool,G=E.getPlaceholder(I),H;E.isCollapsingOrExpanding=1;E.setHiddenState(true);E.collapsed=I;if(G.rendered){if(G.el.dom.parentNode!==E.el.dom.parentNode){E.el.dom.parentNode.insertBefore(G.el.dom,E.el.dom)}G.hidden=false;G.setHiddenState(false);G.el.show();B.updateLayout()}else{B.insert(B.items.indexOf(E),G)}if(E.rendered){if(C&&Ext.ComponentManager.getActiveComponent()===C){E.focusPlaceholderExpandTool=true}E.el.setVisibilityMode(E.placeholderCollapseHideMode);if(A){E.el.addCls(D);G.el.hide();H=E.convertCollapseDir(I);E.el.slideOut(H,{preserveScroll:true,duration:Ext.Number.from(A,Ext.fx.Anim.prototype.duration),listeners:{scope:E,afteranimate:function(){var J=this;J.el.removeCls(D);J.placeholder.el.show().setStyle("display","none").slideIn(H,{easing:"linear",duration:100,listeners:{afteranimate:J.doPlaceholderCollapse,scope:J}})}}})}else{E.el.hide();E.doPlaceholderCollapse()}}else{E.isCollapsingOrExpanding=0;if(!E.preventCollapseFire){E.fireEvent("collapse",E)}}return E},doPlaceholderCollapse:function(){var A=this,B=A.placeholder,C=B.expandTool;if(A.focusPlaceholderExpandTool&&C){C.focus()}else{B.focus()}A.focusPlaceholderExpandTool=false;B.setHiddenState(false);B.ariaEl.dom.setAttribute("aria-hidden",false);B.ariaEl.dom.setAttribute("aria-expanded",false);A.ariaEl.dom.setAttribute("aria-hidden",true);A.ariaEl.dom.setAttribute("aria-expanded",false);A.isCollapsingOrExpanding=0;A.fireEvent("collapse",A)},placeholderExpand:function(C){var E=this,G=E.collapsed,H=E.placeholder.expandTool,D=Ext.panel.Panel.floatCls,B=E.ownerLayout?E.ownerLayout.centerRegion:null,F,A;if(Ext.Component.layoutSuspendCount){C=false}if(E.floatedFromCollapse){A=E.getPosition(true);E.slideOutFloatedPanelBegin();E.slideOutFloatedPanelEnd();E.floated=false}if(H&&Ext.ComponentManager.getActiveComponent()===H){E.focusHeaderCollapseTool=true;H._ariaRole=H.ariaEl.dom.getAttribute("role");H._ariaLabel=H.ariaEl.dom.getAttribute("aria-label");H.ariaEl.dom.setAttribute("role","presentation");H.ariaEl.dom.removeAttribute("aria-label")}if(C){Ext.suspendLayouts();E.placeholder.hide();E.el.show();E.collapsed=false;E.setHiddenState(false);if(B&&!A){B.hidden=true}Ext.resumeLayouts(true);B.hidden=false;E.el.addCls(D);E.isCollapsingOrExpanding=2;if(A){F=E.getXY();E.setLocalXY(A[0],A[1]);E.setXY([F[0],F[1]],{duration:Ext.Number.from(C,Ext.fx.Anim.prototype.duration),listeners:{scope:E,afteranimate:function(){var I=this;I.el.removeCls(D);I.isCollapsingOrExpanding=0;I.fireEvent("expand",I)}}})}else{E.el.hide();E.placeholder.el.show();E.placeholder.hidden=false;E.setHiddenState(false);E.el.slideIn(E.convertCollapseDir(G),{preserveScroll:true,duration:Ext.Number.from(C,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:E.doPlaceholderExpand,scope:E}})}}else{E.floated=E.collapsed=false;E.doPlaceholderExpand(true)}return E},doPlaceholderExpand:function(B){var C=this,D=C.placeholder,A=C.collapseTool,E=D.expandTool;if(B){Ext.suspendLayouts();C.show()}C.el.removeCls(Ext.panel.Panel.floatCls);D.hide();if(B){Ext.resumeLayouts(true)}else{C.updateLayout()}if(C.focusHeaderCollapseTool&&A){A.focus()}C.focusHeaderCollapseTool=false;D.ariaEl.dom.setAttribute("aria-expanded",true);C.ariaEl.dom.setAttribute("aria-expanded",true);if(E&&E._ariaRole){E.ariaEl.dom.setAttribute("role",E._ariaRole);E.ariaEl.dom.setAttribute("aria-label",E._ariaLabel);E._ariaRole=E._ariaLabel=null}C.isCollapsingOrExpanding=0;C.fireEvent("expand",C)},remove:function(B,A){var C=this.dockedItems;if(C&&C.contains(B)){this.removeDocked(B,A)}else{this.callParent([B,A])}return B},removeBodyCls:function(B){var C=this,A=C.rendered?C.body:C.getProtoBody();A.removeCls(B);return C},removeUIClsFromElement:function(B){var C=this,A=C.callParent(arguments);C.removeBodyCls([Ext.baseCSSPrefix+B,C.baseCls+"-body-"+B,C.baseCls+"-body-"+C.ui+"-"+B]);return A},restoreDimension:function(){var A=this.collapseDirection;return(A==="top"||A==="bottom")?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,true)},setBodyStyle:function(B,D){var C=this,A=C.rendered?C.body:C.getProtoBody();if(Ext.isFunction(B)){B=B()}if(arguments.length===1){if(Ext.isString(B)){B=Ext.Element.parseStyles(B)}A.setStyle(B)}else{A.setStyle(B,D)}return C},setBorder:function(A,C){if(C){return }var B=this,D=B.header;if(!A){A=0}else{if(A===true){A="1px"}else{A=B.unitizeBox(A)}}if(D){if(D.isHeader){D.setBorder(A)}else{D.border=A}}if(B.rendered&&B.bodyBorder!==false){B.body.setStyle("border-width",A)}B.updateLayout();B.border=A},setCollapsed:function(A){this[A?"collapse":"expand"]()},setDockedItemsVisibility:function(F,C){var H=this,D=H.getDockedItems(),A=D.length,E=0,G,B;if(H.header!==false){B=H.getReExpander()}for(;E<A;E++){G=D[E];if(G&&G!==B&&G.el){F.add(G.el)}}F.setStyle("visibility",C?"":"hidden");F.clear()},setGlyph:function(C){var B=this,A=B.glyph,E=B.header,D=B.placeholder;if(C!==A){B.glyph=C;if(E){if(E.isHeader){E.setGlyph(C)}else{E.glyph=C}}else{if(B.rendered||B.afterHeaderInit){B.updateHeader()}}if(D&&D.setGlyph){D.setGlyph(C)}B.fireEvent("glyphchange",B,C,A)}},setIcon:function(A){var B=this,C=B.icon,E=B.header,D=B.placeholder;if(A!==C){B.icon=A;if(E){if(E.isHeader){E.setIcon(A)}else{E.icon=A}}else{if(B.rendered||B.afterHeaderInit){B.updateHeader()}}if(D&&D.setIcon){D.setIcon(A)}B.fireEvent("iconchange",B,A,C)}},setIconCls:function(B){var C=this,A=C.iconCls,E=C.header,D=C.placeholder;if(B!==A){C.iconCls=B;if(E){if(E.isHeader){E.setIconCls(B)}else{E.iconCls=B}}else{if(C.rendered||C.afterHeaderInit){C.updateHeader()}}if(D&&D.setIconCls){D.setIconCls(B)}C.fireEvent("iconclschange",C,B,A)}},setTitle:function(E){var C=this,B=C.title,F=C.header,A=C.reExpander,D=C.placeholder;if(E!==B){C.title=E;if(F){if(F.isHeader){F.setTitle(E)}}else{if(C.rendered||C.afterHeaderInit){C.updateHeader()}}if(C.headingEl){C.headingEl.setHtml(E)}if(A){A.setTitle(E)}if(D&&D.setTitle){D.setTitle(E)}C.fireEvent("titlechange",C,E,B)}},setHiddenDocked:function(){var B=this,A=new Ext.dom.CompositeElement();B.hiddenOnCollapse.add(B.body);A.add(B.body);B.setDockedItemsVisibility(A,false)},setUI:function(B){var A=this;A.callParent(arguments);if(A.header&&A.header.rendered){A.header.setUI(B)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var B=this,A=B.collapseTool,C;if(!A&&B.collapsible){B.collapseDirection=B.collapseDirection||B.getHeaderPosition()||"top";C={xtype:"tool",handler:B.toggleCollapse,scope:B};if(B.isAccordionPanel){C.focusable=false;C.ariaRole="presentation"}B.collapseTool=B.expandTool=A=Ext.widget(C)}if(A){if(B.collapsed&&!B.isPlaceHolderCollapse()){A.setType("expand-"+B.getOppositeDirection(B.collapseDirection));A.setTooltip(B.expandToolText)}else{A.setType("collapse-"+B.collapseDirection);A.setTooltip(B.collapseToolText)}}},navigateAccordion:function(G){var E=this,B=E.accordionWrapOver,A="[isAccordionPanel]",H=A+":first",F=A+":last",C,D;C=G.getKey();switch(C){case G.UP:case G.LEFT:D=E.prev(A);if(!D&&B){D=E.ownerCt.child(F)}break;case G.DOWN:case G.RIGHT:D=E.next(A);if(!D&&B){D=E.ownerCt.child(H)}break;case G.HOME:D=E.ownerCt.child(H);break;case G.END:D=E.ownerCt.child(F);break;case G.DELETE:D=E.prev(A)||E.next(A);if(!D){G.doNotClose=true}break}if(D&&D!==E){D.header.titleCmp.focus()}},fireDefaultButton:function(C){var B=this,D,A;D=B.lookupReferenceHolder(false)||B;A=D.lookupReference(B.defaultButton);if(A&&A.click){A.click(C);C.stopEvent();return false}else{if(!A){Ext.raise({msg:'No component found for defaultButton reference "'+B.defaultButton+'" in '+B.xtype+" "+B.id,panel:B})}else{Ext.raise({msg:'Component referenced by defaultButton config "'+B.defaultButton+'" in '+B.xtype+" "+B.id+" does not have click() method",component:A})}}},maybeClose:function(B){var A=this;if(A.closable){A.navigateAccordion(B);if(!B.doNotClose){A.close()}}},onFocusEnter:function(C){var B=this,A=B.ariaEl.dom;B.callParent([C]);if(B.isAccordionPanel&&A){A.setAttribute("aria-selected",true)}},onFocusLeave:function(C){var B=this,A=B.ariaEl.dom;B.callParent([C]);if(B.isAccordionPanel&&A){A.removeAttribute("aria-selected")}},updateHeaderPosition:function(A){var B=this.header;if(B&&B.isHeader){B.setDock(A)}},updateIconAlign:function(B){var A=this.header;if(A&&A.isHeader){A.setIconAlign(B)}},updateTitleAlign:function(B){var A=this.header;if(A&&A.isHeader){A.setTitleAlign(B)}},updateTitleRotation:function(A){var B=this.header;if(B&&B.isHeader){B.setTitleRotation(A)}},unghost:function(C,A,B){var E=this,D=E.ghostPanel;if(!D){return }if(C!==false){E.el.show();if(A!==false){E.setPagePosition(D.getXY());if(E.hideMode==="offsets"){delete E.el.hideModeStyles}}if(B){E.focus(false,10)}}D.el.hide();D.setHiddenState(true)},updateHeader:function(A){var I=this,E=I.header,L=I.getTitle(),G=I.tools,K=I.getIcon(),J=I.getGlyph(),N=I.getIconCls(),D=J||K||N,H=I.ariaEl.dom,F=I.getHeaderPosition(),C=F==="left"||F==="right",M,B;if(Ext.isObject(E)||(E!==false&&(A||(L||D)||(G&&G.length)||(I.collapsible&&!I.titleCollapse)))){if(E&&E.isHeader){E.show()}else{E=I.header=Ext.widget(Ext.merge({xtype:"header",title:L,titleAlign:I.getTitleAlign(),vertical:C,dock:I.getHeaderPosition()||"top",titleRotation:I.getTitleRotation(),textCls:I.headerTextCls,iconCls:N,iconAlign:I.getIconAlign(),icon:K,glyph:J,baseCls:I.baseCls+"-header",tools:G,ui:I.ui,id:I.id+"_header",overCls:I.headerOverCls,indicateDrag:I.draggable,frame:(I.frame||I.alwaysFramed)&&I.frameHeader,ignoreParentFrame:I.frame||I.overlapHeader,ignoreBorderManagement:I.frame||I.ignoreHeaderBorderManagement,isAccordionHeader:I.isAccordionPanel,ownerCt:I,synthetic:true,listeners:I.collapsible&&I.titleCollapse?{click:I.toggleCollapse,scope:I}:null},I.header));I.addDocked(E,0)}if(I.isAccordionPanel){if(H){H.setAttribute("aria-labelledby",E.id+"-title");H.removeAttribute("aria-label")}else{B=I.ariaRenderAttributes||(I.ariaRenderAttributes={});B["aria-labelledby"]=E.id+"-title";delete B["aria-label"]}}else{if(L){if(I.ariaRole!=="tabpanel"){if(H){H.setAttribute("aria-labelledby",E.id+"-title-textEl");H.removeAttribute("aria-label")}else{B=I.ariaRenderAttributes||(I.ariaRenderAttributes={});B["aria-labelledby"]=E.id+"-title-textEl";delete B["aria-label"]}}}else{if(I.ariaRenderAttributes){delete I.ariaRenderAttributes["aria-label"]}}}}else{if(E){E.hide()}L=Ext.util.Format.stripTags(L);if(H){if(!H.hasAttribute("aria-labelledby")){if(L){H.setAttribute("aria-label",L)}else{H.removeAttribute("aria-label")}}}else{B=I.ariaRenderAttributes||(I.ariaRenderAttributes={});if(!B["aria-labelledby"]){if(L){B["aria-label"]=L}else{delete B["aria-label"]}}}}if(I.isViewportBorderChild&&!I.hasOwnProperty("ariaRole")){I.ariaRole="region"}if(Ext.enableAriaPanels&&I.ariaRole==="region"&&!L){Ext.log.warn("Panel "+I.id+" is a region section of the application, but it does not have a title. Per WAI-ARIA, all regions should have a heading element that contains region's title.")}if(L&&I.ariaRole==="region"){M=I.headingEl;if(M){M.setHtml(L)}else{if(I.rendered){I.headingEl=Ext.dom.Helper.insertFirst(I.el,{tag:"div",id:I.id+"-headingEl",role:"heading","class":Ext.baseCSSPrefix+"hidden-clip",style:"height:0",html:L},true);H.removeAttribute("aria-label");H.setAttribute("aria-labelledby",I.id+"-headingEl")}else{I.headingText=I.title;B=I.ariaRenderAttributes||(I.ariaRenderAttributes={});B["aria-labelledby"]=I.id+"-headingEl";delete B["aria-label"]}}}else{if(I.headingEl){I.headingEl.destroy();I.headingEl=null}}},statics:{floatCls:Ext.baseCSSPrefix+"border-region-slide-in"},privates:{addUIToElement:function(){var A=this;A.callParent(arguments);A.addBodyCls(A.baseCls+"-body-"+A.ui)},applyTargetCls:function(A){this.getProtoBody().addCls(A)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var A=this;return A.body||A.protoBody||A.frameBody||A.el},initDraggable:function(){var A=this;if(A.simpleDrag){A.initSimpleDraggable()}else{A.dd=new Ext.panel.DD(A,Ext.isBoolean(A.draggable)?null:A.draggable)}},initResizable:function(){this.callParent(arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var C=this,B,A;if(!C.header){C.updateHeader(true)}if(C.header){B=Ext.applyIf({el:C.el,delegate:"#"+C.header.id},C.draggable);if(C.constrain||C.constrainHeader){B.constrain=C.constrain;B.constrainDelegate=C.constrainHeader;B.constrainTo=C.constrainTo||C.container}A=C.dd=new Ext.util.ComponentDragger(C,B);C.relayEvents(A,["dragstart","drag","dragend"]);if(C.maximized){A.disable()}}},removeUIFromElement:function(){var A=this;A.callParent(arguments);A.removeBodyCls(A.baseCls+"-body-"+A.ui)},setupRenderTpl:function(A){this.callParent(arguments);this.setupDockingRenderTpl(A)},slideOutFloatedPanel:function(A){var C=this,E=C.el,D,B=function(){C.slideOutFloatedPanelEnd();C.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in")};if(C.isSliding||C.destroyed){return }C.isSliding=true;C.floated=false;C.slideOutFloatedPanelBegin();if(A){E.hide();return B()}if(typeof C.collapsed==="string"){D=C.convertCollapseDir(C.collapsed)}E.slideOut(D,{preserveScroll:true,duration:Ext.Number.from(C.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:B}})},slideOutFloatedPanelBegin:function(){var B=this,C=B.placeholder.el,A=B.el;B.collapsed=B.floatedFromCollapse;B.setHiddenState(true);B.floatedFromCollapse=null;C.un("mouseleave",B.onMouseLeaveFloated,B);A.un("mouseleave",B.onMouseLeaveFloated,B);C.un("mouseenter",B.onMouseEnterFloated,B);A.un("mouseenter",B.onMouseEnterFloated,B)},slideOutFloatedPanelEnd:function(A){var B=this;if(B.collapseTool){B.collapseTool.el.show()}B.slideOutTask.cancel();B.isSliding=false;if(!A){B.fireEvent("unfloat",B)}}}},function(){var A=this.prototype;A.animCollapse=Ext.enableFx;A.placeholderCollapseHideMode=Ext.Element.VISIBILITY})