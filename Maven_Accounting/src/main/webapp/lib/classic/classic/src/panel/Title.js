Ext.define("Ext.panel.Title",{extend:"Ext.Component",xtype:"title",isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:Ext.baseCSSPrefix+"title-align-left",center:Ext.baseCSSPrefix+"title-align-center",right:Ext.baseCSSPrefix+"title-align-right"},_iconAlignClasses:{top:Ext.baseCSSPrefix+"title-icon-top",right:Ext.baseCSSPrefix+"title-icon-right",bottom:Ext.baseCSSPrefix+"title-icon-bottom",left:Ext.baseCSSPrefix+"title-icon-left"},_rotationClasses:{0:Ext.baseCSSPrefix+"title-rotate-none",1:Ext.baseCSSPrefix+"title-rotate-right",2:Ext.baseCSSPrefix+"title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:Ext.baseCSSPrefix+"title",_titleSuffix:"-title",_glyphCls:Ext.baseCSSPrefix+"title-glyph",_iconWrapCls:Ext.baseCSSPrefix+"title-icon-wrap",_baseIconCls:Ext.baseCSSPrefix+"title-icon",_itemCls:Ext.baseCSSPrefix+"title-item",_textCls:Ext.baseCSSPrefix+"title-text",afterComponentLayout:function(){var D=this,B=D.getRotation(),A,E,C;if(B&&!Ext.isIE8){C=D.el;A=D.lastBox;E=A.x;C.setStyle(D._getVerticalAdjustDirection(),(E+((B===1)?A.width:-A.height))+"px")}this.callParent()},onRender:function(){var C=this,A=C.getRotation(),B=C.el;C.callParent();if(A){B.setVertical(C._rotationAngles[A])}if(Ext.supports.FixedTableWidthBug){B._needsTableWidthFix=true}},applyText:function(A){if(!A){A="&#160;"}return A},beforeRender:function(){var A=this;A.callParent();A.addCls(A._rotationClasses[A.getRotation()]);A.addCls(A._textAlignClasses[A.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var F=this,C=F.getIcon(),B=F.getIconCls(),E=F.getGlyph(),G=Ext._glyphFontFamily,A=F.getIconAlign(),D;if(typeof E==="string"){D=E.split("@");E=D[0];G=D[1]}return{id:F.id,ui:F.ui,itemCls:F._itemCls,iconUrl:C,iconCls:B,iconWrapCls:F._iconWrapCls,baseIconCls:F._baseIconCls,iconAlignCls:F._iconAlignClasses[A],glyph:E,glyphCls:E?F._glyphCls:"",glyphFontFamily:G}},initRenderData:function(){var B=this,A,C;C=Ext.apply({text:B.getText(),textElRole:B.textElRole,id:B.id,ui:B.ui,itemCls:B._itemCls,textCls:B._textCls,iconMarkup:null,iconBeforeTitle:null},B.callParent());if(B._hasIcon()){A=B.getIconAlign();C.iconMarkup=B.getIconMarkup();C.iconBeforeTitle=(A==="top"||A==="left")}return C},onAdded:function(B,F,A){var D=this,E=D._titleSuffix,C=B.baseCls;D.addCls([C+E,C+E+"-"+B.ui]);D.callParent([B,F,A])},updateGlyph:function(F,C){F=F||0;var E=this,G=E._glyphCls,B,A,D;E.glyph=F;if(E.rendered){E._syncIconVisibility();B=E.iconEl;if(typeof F==="string"){D=F.split("@");F=D[0];A=D[1]||Ext._glyphFontFamily}if(!F){B.dom.innerHTML="";B.removeCls(G)}else{if(C!==F){B.dom.innerHTML="&#"+F+";";B.addCls(G)}}if(A){B.setStyle("font-family",A)}if(E._didIconStateChange(C,F)){E.updateLayout()}}},updateIcon:function(B,D){B=B||"";var C=this,A;if(C.rendered&&B!==D){C._syncIconVisibility();A=C.iconEl;A.setStyle("background-image",B?"url("+B+")":"");if(C._didIconStateChange(D,B)){C.updateLayout()}}},updateIconAlign:function(F,C){var B=this,E=B.iconWrapEl,A,D;if(B.iconWrapEl){A=B.el;D=B._iconAlignClasses;if(C){E.removeCls(D[C])}E.addCls(D[F]);if(F==="top"||F==="left"){A.insertFirst(E)}else{A.appendChild(E)}B.updateLayout()}},updateIconCls:function(B,C){B=B||"";var D=this,A;if(D.rendered&&C!==B){D._syncIconVisibility();A=D.iconEl;if(C){A.removeCls(C)}A.addCls(B);if(D._didIconStateChange(C,B)){D.updateLayout()}}},updateRotation:function(B,A){var D=this,C,E;if(D.rendered){C=D.el;E=D._rotationClasses;D.removeCls(E[A]);D.addCls(E[B]);C.setHorizontal();if(B){C.setVertical(D._rotationAngles[B])}C.setStyle({right:"",left:"",top:"",height:"",width:""});D.lastBox=null;D.updateLayout()}},updateText:function(A){if(this.rendered){this.textEl.setHtml(A);this.updateLayout()}},updateTextAlign:function(D,B){var A=this,C=A._textAlignClasses;if(A.rendered){if(B){A.removeCls(C[B])}A.addCls(C[D]);A.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(A,C){var B=Ext.isEmpty(C);return Ext.isEmpty(A)?!B:B},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var E=this,D=E.el,A=E._hasIcon(),F=E.iconWrapEl,C,B;if(A&&!F){B=E.iconAlign;C=(B==="left"||B==="top");D.dom.insertAdjacentHTML(C?"afterbegin":"beforeend",E.getIconMarkup());F=E.iconWrapEl=D[C?"first":"last"]();E.iconEl=F.first()}if(F){F.setDisplayed(A)}}}})