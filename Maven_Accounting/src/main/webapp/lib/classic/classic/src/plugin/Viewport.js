Ext.define("Ext.plugin.Viewport",{extend:"Ext.plugin.Responsive",alias:"plugin.viewport",setCmp:function(A){this.cmp=A;if(A&&!A.isViewport){this.decorate(A);if(A.renderConfigs){A.flushRenderConfigs()}A.setupViewport()}},statics:{decorate:function(A){Ext.applyIf(A.prototype||A,{ariaRole:"application",viewportCls:Ext.baseCSSPrefix+"viewport"});Ext.override(A,{isViewport:true,preserveElOnDestroy:true,initComponent:function(){this.callParent();this.setupViewport()},getSizeModel:function(){var B=Ext.layout.SizeModel.configured;return B.pairsByHeightOrdinal[B.ordinal]},handleViewportResize:function(){var E=this,C=Ext.dom.Element,D=C.getViewportWidth(),B=C.getViewportHeight();if(D!==E.width||B!==E.height){E.setSize(D,B)}},setupViewport:function(){var D=this,C=document.body,B=Ext.scroll.DomScroller;if(B.document){B.document=B.document.destroy()}if(!C.id){C.id=D.id}C.setAttribute("data-componentid",D.id);if(!D.ariaStaticRoles[D.ariaRole]){C.setAttribute("role",D.ariaRole)}C=D.el=Ext.getBody();Ext.fly(document.documentElement).addCls(D.viewportCls);C.setHeight=C.setWidth=Ext.emptyFn;C.dom.scroll="no";D.allowDomMove=false;D.renderTo=C;if(Ext.supports.Touch){D.addMeta("apple-mobile-web-app-capable","yes")}Ext.getScrollbarSize();D.width=D.height=undefined;D.initialViewportHeight=Ext.Element.getViewportHeight();D.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(B){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([B])},onRender:function(){var B=this;B.callParent(arguments);B.width=B.initialViewportWidth;B.height=B.initialViewportHeight;B.initialViewportWidth=B.initialViewportHeight=null;if(Ext.supports.TouchEvents){B.mon(Ext.getDoc(),{touchmove:function(C){C.preventDefault()},translate:false,delegated:false})}},initInheritedState:function(D,C){var E=this,B=Ext.rootInheritedState;if(D!==B){E.initInheritedState(E.inheritedState=B,E.inheritedStateInner=Ext.Object.chain(B))}else{E.callParent([D,C])}},beforeDestroy:function(){var D=this,B=Ext.rootInheritedState,C;for(C in B){if(C!=="rtl"){delete B[C]}}D.removeUIFromElement();D.el.removeCls(D.baseCls);Ext.fly(document.body.parentNode).removeCls(D.viewportCls);D.callParent()},addMeta:function(B,C){var D=document.createElement("meta");D.setAttribute("name",B);D.setAttribute("content",C);Ext.getHead().appendChild(D)},privates:{applyTargetCls:function(B){this.el.addCls(B)},disableTabbing:function(){var B=this.el;if(B){B.saveTabbableState({skipSelf:true})}},enableTabbing:function(){var B=this.el;if(B){B.restoreTabbableState(true)}}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize();this.callParent()}}},function(A){A.prototype.decorate=A.decorate})