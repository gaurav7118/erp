Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],xtype:"splitter",childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:true,baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",focusable:true,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var C=this,D=C.getCollapseTarget(),B=C.collapsible,A;C.callParent();if(D.collapsed){C.addCls(C.collapsedClsInternal)}if(!C.canResize){C.addCls(C.baseCls+"-noresize")}Ext.applyIf(C.renderData,{collapseDir:C.getCollapseDirection(),collapsible:(B!==null)?B:D.collapsible});C.ariaRenderAttributes=C.ariaRenderAttributes||{};C.ariaRenderAttributes["aria-orientation"]=C.orientation;C.protoEl.unselectable()},onRender:function(){var B=this,A;B.callParent(arguments);if(B.performCollapse!==false){if(B.renderData.collapsible){B.mon(B.collapseEl,"click",B.toggleTargetCmp,B)}if(B.collapseOnDblClick){B.mon(B.el,"dblclick",B.toggleTargetCmp,B)}}B.getCollapseTarget().on({collapse:B.onTargetCollapse,expand:B.onTargetExpand,beforeexpand:B.onBeforeTargetExpand,beforecollapse:B.onBeforeTargetCollapse,scope:B});if(B.canResize){B.tracker=Ext.create(B.getTrackerConfig());B.relayEvents(B.tracker,["beforedragstart","dragstart","dragend"])}A=B.collapseEl;if(A){A.lastCollapseDirCls=B.collapseDirProps[B.collapseDirection].cls}},getCollapseDirection:function(){var F=this,C=F.collapseDirection,E,A,B,D;if(!C){E=F.collapseTarget;if(E.isComponent){C=E.collapseDirection}if(!C){D=F.ownerCt.layout.type;if(E.isComponent){B=F.ownerCt.items;A=Number(B.indexOf(E)===B.indexOf(F)-1)<<1|Number(D==="hbox")}else{A=Number(F.collapseTarget==="prev")<<1|Number(D==="hbox")}C=["bottom","right","top","left"][A]}F.collapseDirection=C}F.setOrientation((C==="top"||C==="bottom")?"horizontal":"vertical");return C},getCollapseTarget:function(){var A=this;return A.collapseTarget.isComponent?A.collapseTarget:A.collapseTarget==="prev"?A.previousSibling():A.nextSibling()},setCollapseEl:function(B){var A=this.collapseEl;if(A){A.setDisplayed(B)}},onBeforeTargetExpand:function(A){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(B){var A=this;if(B===A.getCollapseTarget()&&B[A.orientation==="vertical"?"collapsedHorizontal":"collapsedVertical"]()){A.el.addCls(A.collapsedClsInternal+" "+(A.collapsedCls||""))}A.setCollapseEl("")},onTargetExpand:function(B){var A=this;A.el.removeCls(A.collapsedClsInternal+" "+(A.collapsedCls||""));A.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var C=this,B=C.collapseEl,D=C.collapseDirProps[C.collapseDirection],A;if(B){A=B.lastCollapseDirCls;if(A){B.removeCls(A)}B.addCls(B.lastCollapseDirCls=D.cls)}},applyOrientation:function(){var E=this,C=E.orientation,D=E.orientationProps[C],F=E.size,B=D.fixedAxis,G=D.stretchedAxis,A=E.baseCls+"-";E[C]=true;E[D.opposite]=false;if(!E.hasOwnProperty(B)||E[B]==="100%"){E[B]=F}if(!E.hasOwnProperty(G)||E[G]===F){E[G]="100%"}E.removeCls(A+D.opposite);E.addCls(A+C)},setOrientation:function(A){var B=this;if(B.orientation!==A){B.orientation=A;B.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(D,B){var C=this.getCollapseTarget(),E=C.placeholder,A;if(Ext.isFunction(C.expand)&&Ext.isFunction(C.collapse)){if(E&&!E.hidden){A=true}else{A=!C.hidden}if(A){if(C.collapsed){C.expand()}else{if(C.collapseDirection){C.collapse()}else{C.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var A=this;A.callParent(arguments);if(Ext.isIE&&A.el){A.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);this.callParent()}})