Ext.define("Ext.rtl.dom.Element",{override:"Ext.dom.Element",requires:["Ext.CompositeElementLite"],rtlXAnchors:{l:"r",r:"l"},_positionTopRight:["position","top","right"],pxRe:/^\d+(?:\.\d*)?px$/i,statics:{rtlParseBox:function(C){var B=Ext.Element.parseBox(C),A;A=B.left;B.left=B.right;B.right=A;return B},rtlUnitizeBox:function(E,D){var C=Ext.Element,B=C.addUnits,A=C.parseBox(E);return B(A.top,D)+" "+B(A.left,D)+" "+B(A.bottom,D)+" "+B(A.right,D)}},anchorAnimX:function(A){if(Ext.rootInheritedState.rtl){A=this.rtlXAnchors[A]}this.callParent(arguments)},getPositioning:function(C){var A=Ext.rootInheritedState.rtl?"right":"left",B=this.getStyle([A,"top","position","z-index"]),D=this.dom;if(C){if(B[A]==="auto"){B[A]=(A==="left")?(D.offsetLeft+"px"):(D.offsetParent.offsetWidth-D.offsetLeft-D.offsetWidth)}if(B.top==="auto"){B.top=D.offsetTop+"px"}}return B},getXY:function(){var F=document,C=Math.round,G=this.dom,B=0,H=0,E,A;if(G!==F&&G!==F.body){try{E=G.getBoundingClientRect()}catch(D){E={left:0,top:0}}F=Ext.fly(F,"_internal");if(Ext.rootInheritedState.rtl){A=F.rtlGetScroll();B=Ext.Element.getViewportWidth()-E.right+A.left}else{A=F.getScroll();B=E.left+A.left}B=C(B);H=C(E.top+A.top)}return[B,H]},rtlGetLocalX:function(){var C=this,B=C.dom.offsetParent,A=C.getStyle("right");if(!A||A==="auto"){A=0}else{if(C.pxRe.test(A)){A=parseFloat(A)}else{A=C.getX();if(B){A-=Ext.fly(B,"_internal").getX()}}}return A},rtlGetLocalXY:function(){var D=this,C=D.dom.offsetParent,B=D.getStyle(["right","top"]),A=B.right,E=B.top;if(!A||A==="auto"){A=0}else{if(D.pxRe.test(A)){A=parseFloat(A)}else{A=D.getX();if(C){A-=Ext.fly(C,"_internal").getX()}}}if(!E||E==="auto"){E=0}else{if(D.pxRe.test(E)){E=parseFloat(E)}else{E=D.getY();if(C){E-=Ext.fly(C,"_internal").getY()}}}return[A,E]},rtlGetScroll:function(){var D=this,G=D.dom,F=document,B=F.body,A=D.getScroll(),E=Math.abs(A.left),C=(G===F||G===B);if(C?(3&D._rtlDocScrollFlag):(D._rtlScrollFlag===1)){if(C){G=B}E=G.scrollWidth-E-(C?Ext.Element.getViewportWidth():G.clientWidth)}A.left=E;return A},rtlGetScrollLeft:function(){return this.rtlGetScroll().left},rtlNormalizeScrollLeft:function(B){var C=this.dom,A=this._rtlScrollFlag;if(A===0){B=-B}else{if(A===1){B=C.scrollWidth-B-C.clientWidth}}return B},rtlScrollBy:function(B,A,C){var D=this,F=D.dom,E;if(B.length){C=A;A=B[1];B=B[0]}else{if(typeof B!=="number"){C=A;A=B.y;B=B.x}}if(B){E=D.rtlNormalizeScrollLeft(D.constrainScrollLeft(D.rtlGetScrollLeft()+B));D.scrollTo("left",E,C)}if(A){D.scrollTo("top",D.constrainScrollTop(F.scrollTop+A),C)}return D},rtlScrollIntoView:function(A,D,C,B){A=Ext.getDom(A)||Ext.getBody().dom;return this.doScrollIntoView(A,D,C,B,"rtlGetScrollLeft","rtlScrollTo")},rtlScrollTo:function(B,C,A){if(B==="left"){C=this.rtlNormalizeScrollLeft(C)}return this.scrollTo(B,C,A)},rtlSetLocalX:function(A){var C=this,B=C.dom.style;B.left="auto";B.right=(A===null)?"auto":A+"px";if(C.shadow||C.shim){C.syncUnderlays()}return C},rtlSetLocalXY:function(A,D){var C=this,B=C.dom.style;B.left="auto";if(A&&A.length){D=A[1];A=A[0]}if(A===null){B.right="auto"}else{if(A!==undefined){B.right=A+"px"}}if(D===null){B.top="auto"}else{if(D!==undefined){B.top=D+"px"}}if(C.shadow||C.shim){C.syncUnderlays()}return C},rtlSetScrollLeft:function(B){var A=this;A.dom.scrollLeft=A.rtlNormalizeScrollLeft(B);return A},rtlTranslatePoints:function(A,C){var B=this.rtlTranslateXY(A,C);return{right:B.x,top:B.y}},rtlTranslateXY:function(I,G){var F=this,L=F.getStyle(F._positionTopRight),B=(L.position==="relative"),K=parseFloat(L.right),H=parseFloat(L.top),M=F.getXY(),D=F.dom,J,E,C,A;if(I&&I.length){G=I[1];I=I[0]}if(isNaN(K)){J=document;E=J.body;if(D===E){K=0}else{A=D.offsetParent;C=(A&&A!==E&&A!==J.documentElement)?A.scrollWidth:Ext.Element.getViewportWidth();K=C-D.offsetLeft-F.getWidth()}}if(isNaN(H)){H=B?0:F.dom.offsetTop}K=(typeof I==="number")?I-M[0]+K:undefined;H=(typeof G==="number")?G-M[1]+H:undefined;return{x:K,y:H}},translatePoints:function(A,B){return Ext.rootInheritedState.rtl?this.rtlTranslatePoints(A,B):this.callParent(arguments)},translateXY:function(A,B){return Ext.rootInheritedState.rtl?this.rtlTranslateXY(A,B):this.callParent(arguments)},wrap:function(){var E=this.parent(),D=Ext.baseCSSPrefix+"rtl",C=Ext.baseCSSPrefix+"ltr",A=this.callParent(arguments),B;if(E.hasCls(D)){B=D}else{if(E.hasCls(C)){B=C}}if(B){Ext.fly(A,"_internal").addCls(B)}return A}},function(){var A=this;Ext.CompositeElementLite.importElementMethods();function C(){var E=Ext.getBody().createChild({tag:"div",style:"direction:rtl;position:absolute;overflow:auto;height:100px;width:100px;",children:[{tag:"div",style:"height:30px;width:150px;"}]}),F=E.dom,D=2;if(F.scrollLeft===50){D=1}else{F.scrollLeft=-1;if(F.scrollLeft){D=0}}E.destroy();A.prototype._rtlScrollFlag=D}function B(){var M=document,E=M.documentElement,I=M.body,J=4,K=I.style,L=K.direction,F=Ext.getBody().createChild('<div style="height:20000px;width:20000px;"></div>'),H=F.dom,G,D;K.direction="ltr";G=H.getBoundingClientRect().right;K.direction="rtl";D=H.getBoundingClientRect().right;A.prototype._rtlBodyScrollbarOnRight=(G===D);if(E.scrollLeft>0){J=1}else{E.scrollLeft=-1;if(E.scrollLeft){J=0}else{E.scrollLeft=1;if(E.scrollLeft){J=2}}}F.destroy();if(!L){K.direction="ltr";I.scrollWidth}K.direction=L;A.prototype._rtlDocScrollFlag=J}Ext.onInternalReady(function(){B();C()})})