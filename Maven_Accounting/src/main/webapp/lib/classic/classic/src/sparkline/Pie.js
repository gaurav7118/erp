Ext.define("Ext.sparkline.Pie",{extend:"Ext.sparkline.Base",alias:"widget.sparklinepie",config:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tipTpl:new Ext.XTemplate('&#9679; {value} ({percent:number("0.0")}%)')},applyValues:function(A){A=Ext.Array.map(Ext.Array.from(A),Number);this.disabled=!(A&&A.length);return A},onUpdate:function(){var D=this,A=D.values,C=0,B;D.callParent(arguments);D.shapes={};D.valueShapes={};if(A.length>0){for(B=A.length;B--;){C+=A[B]}}D.total=C;D.radius=Math.floor(Math.min(D.getWidth(),D.getHeight())/2)},getRegion:function(A,D){var B=window.devicePixelRatio||1,C=this.canvas.getShapeAt(A*B,D*B);return(C!=null&&this.shapes[C]!=null)?this.shapes[C]:null},getRegionFields:function(B){var A=this.getSliceColors();return{isNull:this.values[B]==null,value:this.values[B],percent:this.values[B]/this.total*100,color:A[B%A.length],offset:B}},renderHighlight:function(A){this.renderSlice(A,true).append()},renderSlice:function(K,E){var M=this,D=M.canvas,L=M.radius,A=M.getBorderWidth(),H=M.getOffset(),B=2*Math.PI,Q=M.values,N=M.total,J=H?(2*Math.PI)*(H/360):0,C,G,I,O,F,P=this.getSliceColors();O=Q.length;for(I=0;I<O;I++){C=J;G=J;if(N>0){G=J+(B*(Q[I]/N))}if(K===I){F=P[I%P.length];if(E){F=M.calcHighlightColor(F)}return D.drawPieSlice(L,L,L-A,C,G,null,F)}J=G}},renderGraph:function(){var G=this,C=G.canvas,I=G.values,E=G.radius,A=G.getBorderWidth(),F,D,B=G.shapes||(G.shapes={}),H=G.valueShapes||(G.valueShapes={});if(!G.callParent()){return }if(A){C.drawCircle(E,E,Math.floor(E-(A/2)),G.getBorderColor(),null,A).append()}for(D=I.length;D--;){if(I[D]){F=G.renderSlice(D).append();H[D]=F.id;B[F.id]=D}}if(G.currentPageXY&&G.el.getRegion().contains(G.currentPageXY)){G.currentRegion=null;G.updateDisplay()}C.render()}})