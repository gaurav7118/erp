Ext.define("Ext.sparkline.VmlCanvas",{extend:"Ext.sparkline.CanvasBase",setWidth:function(A){var B=this;B.callParent(arguments);B.owner.groupEl.dom.coordsize=B.width+" "+(B.height||0);B.owner.groupEl.dom.style.width=A+"px"},setHeight:function(A){var B=this;B.callParent(arguments);B.owner.groupEl.dom.coordsize=(B.width||0)+" "+B.height;B.owner.groupEl.dom.style.height=A+"px"},onOwnerUpdate:function(){var A=this;A.group=A.owner.groupEl;A.el=A.owner.element;A.prerender=[]},_drawShape:function(F,L,H,A,D){var I=[],G,K,J,E,B,C;for(C=0,B=L.length;C<B;C++){I[C]=(L[C][0])+","+(L[C][1])}G=I.splice(0,1);D=D==null?1:D;K=H==null?' stroked="false" ':' strokeWeight="'+D+'px" strokeColor="'+H+'" ';J=A==null?' filled="false"':' fillColor="'+A+'" filled="true" ';E=I[0]===I[I.length-1]?"x ":"";return['<svml:shape coordorigin="0 0" coordsize="',this.pixelWidth," ",this.pixelHeight,'" id="jqsshape',F,'" ',K,J,' style="position:absolute;height:',this.pixelHeight,"px;width:",this.pixelWidth,'px" ',' path="m ',G," l ",I.join(", ")," ",E,'e"></svml:shape>'].join("")},_drawCircle:function(D,H,F,C,G,A,B){var E=C*2,J,I;H-=C;F-=C;J=G==null?' stroked="false" ':' strokeWeight="'+B+'px" strokeColor="'+G+'" ';I=A==null?' filled="false"':' fillColor="'+A+'" filled="true" ';return['<svml:oval id="jqsshape',D,'" ',J,I,' style="position:absolute;top:',F,"px; left:",H,"px;width:",E,"px;height:",E,'px"></svml:oval>'].join("")},_drawPieSlice:function(I,N,L,H,J,E,M,D){var K,C=this.pixelWidth,O=this.pixelHeight,B,A,G,F,Q=M==null?' stroked="false" ':' strokeWeight="1px" strokeColor="'+M+'" ',P=D==null?' filled="false"':' fillColor="'+D+'" filled="true" ';if(J===E){return""}if((E-J)===(2*Math.PI)){J=0;E=(2*Math.PI)}B=N+Math.round(Math.cos(J)*H);A=L+Math.round(Math.sin(J)*H);G=N+Math.round(Math.cos(E)*H);F=L+Math.round(Math.sin(E)*H);if(B===G&&A===F){if((E-J)<Math.PI){return""}B=G=N+H;A=F=L}if(B===G&&A===F&&(E-J)<Math.PI){return""}K=[N-H,L-H,N+H,L+H,B,A,G,F];return['<svml:shape coordorigin="0 0" coordsize="',C," ",O,'" id="jqsshape',I,'" ',Q,P,' style="position:absolute;height:',O,"px;width:",C,'px" path="m ',N,",",L," wa ",K.join(", "),' x e"></svml:shape>'].join("")},_drawRect:function(E,B,G,C,A,D,F){return this._drawShape(E,[[B,G],[B,G+A],[B+C,G+A],[B+C,G],[B,G]],D,F)},reset:function(){Ext.fly(this.group).empty()},appendShape:function(A){this.prerender.push(this["_draw"+A.type].apply(this,A.args));this.lastShapeId=A.id;return A.id},replaceWithShape:function(D,A){var C=this.el.getById("jqsshape"+D,true),B=this["_draw"+A.type].apply(this,A.args);C.outerHTML=B},replaceWithShapes:function(B,A){var E=this.el.getById("jqsshape"+B[0],true),D="",F=A.length,C;for(C=0;C<F;C++){D+=this["_draw"+A[C].type].apply(this,A[C].args)}E.outerHTML=D;for(C=1;C<B.length;C++){this.el.getById("jqsshape"+B[C]).destroy()}},insertAfterShape:function(D,A){var C=this.el.getById("jqsshape"+D,true),B=this["_draw"+A.type].apply(this,A.args);C.insertAdjacentHTML("afterEnd",B)},removeShapeId:function(B){var A=this.el.getById("jqsshape"+B,true);this.group.removeChild(A)},getShapeAt:function(A,C){var B=this.el.id.substr(8);return B},render:function(){this.group.dom.innerHTML=this.prerender.join("")}},function(){Ext.onInternalReady(function(){var A=document;if(A.namespaces&&!A.namespaces.svml){A.namespaces.add("svml","urn:schemas-microsoft-com:vml","#default#VML")}})})