Ext.define("Ext.tab.Panel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.Bar"],config:{tabBar:undefined,tabPosition:"top",tabRotation:"default",tabStretchMax:true},removePanelHeader:true,plain:false,itemCls:Ext.baseCSSPrefix+"tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var F=this,C=F.activeTab!==null?(F.activeTab||0):null,E=F.dockedItems,G=F.header,D=F.tabBarHeaderPosition,B=F.getTabBar(),A;F.layout=new Ext.layout.container.Card(Ext.apply({owner:F,deferredRender:F.deferredRender,itemCls:F.itemCls,activeItem:C},F.layout));if(D!=null){G=F.header=Ext.apply({},G);A=G.items=(G.items?G.items.slice():[]);G.itemPosition=D;A.push(B);G.hasTabBar=true}else{E=[].concat(F.dockedItems||[]);E.push(B);F.dockedItems=E}F.callParent(arguments);C=F.activeTab=F.getComponent(C);if(C){B.setActiveTab(C.tab,true)}},onRender:function(){var B=this.items.items,A=B.length,C;this.callParent(arguments);for(C=0;C<A;++C){B[C].getBind()}},setActiveTab:function(A){var C=this,B;if(!Ext.isObject(A)||A.isComponent){A=C.getComponent(A)}B=C.getActiveTab();if(A){Ext.suspendLayouts();if(!A.isComponent){A=C.add(A)}if(B===A||C.fireEvent("beforetabchange",C,A,B)===false){Ext.resumeLayouts(true);return B}C.activeTab=A;C.layout.setActiveItem(A);A=C.activeTab=C.layout.getActiveItem();if(A&&A!==B){C.tabBar.setActiveTab(A.tab);Ext.resumeLayouts(true);if(B!==A){C.fireEvent("tabchange",C,A,B)}}else{Ext.resumeLayouts(true)}return A}return B},setActiveItem:function(A){return this.setActiveTab(A)},getActiveTab:function(){var B=this,A=B.getComponent(B.activeTab);if(A&&B.items.indexOf(A)!==-1){B.activeTab=A}else{B.activeTab=undefined}return B.activeTab},applyTabBar:function(A){var C=this,B=(C.tabBarHeaderPosition!=null)?C.getHeaderPosition():C.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:C.ui,dock:B,tabRotation:C.getTabRotation(),vertical:(B==="left"||B==="right"),plain:C.plain,tabStretchMax:C.getTabStretchMax(),tabPanel:C},A))},updateHeaderPosition:function(C,B){var A=this.getTabBar();if(A&&(this.tabBarHeaderPosition!=null)){A.setDock(C)}this.callParent([C,B])},updateTabPosition:function(B){var A=this.getTabBar();if(A&&(this.tabBarHeaderPosition==null)){A.setDock(B)}},updateTabRotation:function(B){var A=this.getTabBar();if(A){A.setTabRotation(B)}},onAdd:function(G,E){var F=this,D=Ext.apply({},G.tabConfig),C=F.getTabBar(),B,A={xtype:"tab",title:G.title,icon:G.icon,iconCls:G.iconCls,glyph:G.glyph,ui:C.ui,card:G,disabled:G.disabled,closable:G.closable,hidden:G.hidden&&!G.hiddenByLayout,tooltip:G.tooltip,tabBar:C,tabPosition:C.dock,rotation:C.getTabRotation()};if(G.closeText!==undefined){A.closeText=G.closeText}D=Ext.applyIf(D,A);G.tab=F.tabBar.insert(E,D);G.ariaRole="tabpanel";B=G.ariaEl.dom;if(B){B.setAttribute("aria-labelledby",G.tab.id)}else{G.ariaRenderAttributes=G.ariaRenderAttributes||{};G.ariaRenderAttributes["aria-labelledby"]=G.tab.id}G.on({scope:F,enable:F.onItemEnable,disable:F.onItemDisable,beforeshow:F.onItemBeforeShow,iconchange:F.onItemIconChange,iconclschange:F.onItemIconClsChange,glyphchange:F.onItemGlyphChange,titlechange:F.onItemTitleChange});if(G.isPanel){if(F.removePanelHeader){if(G.rendered){if(G.header){G.header.hide()}}else{G.header=false}}if(G.isPanel&&F.border){G.setBorder(false)}}if(F.rendered){G.getBind()}if(F.rendered&&F.loader&&F.activeTab===undefined&&F.layout.activeItem!==null){F.setActiveTab(0)}},onMove:function(C,B,D){var A=this.getTabBar();this.callParent([C,B,D]);if(A.items.indexOf(C.tab)!==D){A.move(C.tab,D)}},onItemEnable:function(A){A.tab.enable()},onItemDisable:function(A){A.tab.disable()},onItemBeforeShow:function(A){if(A!==this.activeTab){this.setActiveTab(A);return false}},onItemGlyphChange:function(A,B){A.tab.setGlyph(B)},onItemIconChange:function(B,A){B.tab.setIcon(A)},onItemIconClsChange:function(B,A){B.tab.setIconCls(A)},onItemTitleChange:function(A,B){A.tab.setText(B)},onRemove:function(B,C){var A=this;B.un({scope:A,enable:A.onItemEnable,disable:A.onItemDisable,beforeshow:A.onItemBeforeShow,iconchange:A.onItemIconChange,iconclschange:A.onItemIconClsChange,glyphchange:A.onItemGlyphChange,titlechange:A.onItemTitleChange});if(B.tab&&!A.destroying&&B.tab.ownerCt===A.tabBar){A.tabBar.remove(B.tab)}},privates:{doRemove:function(D,B){var C=this,A;if(C.removingAll||C.destroying||C.items.getCount()===1){C.activeTab=null}else{if(D.tab&&(A=C.tabBar.items.indexOf(C.tabBar.findNextActivatable(D.tab)))!==-1){C.setActiveTab(A)}}this.callParent(arguments);if(D.tab){delete D.tab.card;delete D.tab}}}})