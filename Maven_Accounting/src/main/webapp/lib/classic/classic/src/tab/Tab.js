Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",isTab:true,baseCls:Ext.baseCSSPrefix+"tab",closeElOverCls:Ext.baseCSSPrefix+"tab-close-btn-over",closeElPressedCls:Ext.baseCSSPrefix+"tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:true,closeText:"Close Tab",active:false,childEls:["closeEl"],scale:false,ariaRole:"tab",tabIndex:-1,keyHandlers:{DELETE:"onDeleteKey"},_btnWrapCls:Ext.baseCSSPrefix+"tab-wrap",_btnCls:Ext.baseCSSPrefix+"tab-button",_baseIconCls:Ext.baseCSSPrefix+"tab-icon-el",_glyphCls:Ext.baseCSSPrefix+"tab-glyph",_innerCls:Ext.baseCSSPrefix+"tab-inner",_textCls:Ext.baseCSSPrefix+"tab-text",_noTextCls:Ext.baseCSSPrefix+"tab-no-text",_hasIconCls:Ext.baseCSSPrefix+"tab-icon",_activeCls:Ext.baseCSSPrefix+"tab-active",_closableCls:Ext.baseCSSPrefix+"tab-closable",overCls:Ext.baseCSSPrefix+"tab-over",_pressedCls:Ext.baseCSSPrefix+"tab-pressed",_disabledCls:Ext.baseCSSPrefix+"tab-disabled",_rotateClasses:{1:Ext.baseCSSPrefix+"tab-rotate-right",2:Ext.baseCSSPrefix+"tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var A=this;if(A.card){A.setCard(A.card)}A.callParent(arguments)},getActualRotation:function(){var A=this.getRotation();return(A!=="default")?A:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var G=this,C=G._rotateClasses,B=G.getTabPosition(),F=G.getActualRotation(),E=G._rotateCls,H=G._rotateCls=C[F],D=G._positionCls,A=G._positionCls=G._positions[B][F];if(E!==H){if(E){G.removeCls(E)}if(H){G.addCls(H)}}if(D!==A){if(D){G.removeClsWithUI(D)}if(A){G.addClsWithUI(A)}if(G.rendered){G.updateFrame()}}if(G.rendered){G.setElOrientation()}},onAdded:function(B,C,A){this.callParent([B,C,A]);this.syncRotationAndPosition()},getTemplateArgs:function(){var B=this,A=B.callParent();A.closable=B.closable;A.closeText=B.closeText;return A},beforeRender:function(){var B=this,A=B.up("tabbar"),C=B.up("tabpanel");B.callParent();B.ariaRenderAttributes=B.ariaRenderAttributes||{};if(B.active){B.ariaRenderAttributes["aria-selected"]=true;B.addCls(B._activeCls)}else{B.ariaRenderAttributes["aria-selected"]=false}B.syncClosableCls();if(!B.minWidth){B.minWidth=(A)?A.minTabWidth:B.minWidth;if(!B.minWidth&&C){B.minWidth=C.minTabWidth}if(B.minWidth&&B.iconCls){B.minWidth+=25}}if(!B.maxWidth){B.maxWidth=(A)?A.maxTabWidth:B.maxWidth;if(!B.maxWidth&&C){B.maxWidth=C.maxTabWidth}}},onRender:function(){var A=this;A.setElOrientation();A.callParent(arguments);if(A.closable){A.closeEl.addClsOnOver(A.closeElOverCls);A.closeEl.addClsOnClick(A.closeElPressedCls)}},setElOrientation:function(){var C=this,A=C.getActualRotation(),B=C.el;if(A){B.setVertical(A===1?90:270)}else{B.setHorizontal()}},enable:function(A){var B=this;B.callParent(arguments);B.removeCls(B._disabledCls);return B},disable:function(A){var B=this;B.callParent(arguments);B.addCls(B._disabledCls);return B},setClosable:function(A){var B=this;A=(!arguments.length||!!A);if(B.closable!==A){B.closable=A;if(B.card){B.card.closable=A}B.syncClosableCls();if(B.rendered){B.syncClosableElements();B.updateLayout()}}},syncClosableElements:function(){var A=this,B=A.closeEl;if(A.closable){if(!B){B=A.closeEl=A.btnWrap.insertSibling({tag:"span",id:A.id+"-closeEl",cls:A.baseCls+"-close-btn",html:A.closeText},"after")}B.addClsOnOver(A.closeElOverCls);B.addClsOnClick(A.closeElPressedCls)}else{if(B){B.destroy();delete A.closeEl}}},syncClosableCls:function(){var B=this,A=B._closableCls;if(B.closable){B.addCls(A)}else{B.removeCls(A)}},setCard:function(A){var B=this;B.card=A;if(A.iconAlign){B.setIconAlign(A.iconAlign)}if(A.textAlign){B.setTextAlign(A.textAlign)}B.setText(B.title||A.title);B.setIconCls(B.iconCls||A.iconCls);B.setIcon(B.icon||A.icon);B.setGlyph(B.glyph||A.glyph)},onCloseClick:function(){var A=this;if(A.fireEvent("beforeclose",A)!==false){if(A.tabBar){if(A.tabBar.closeTab(A)===false){return }}else{A.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(B){var A=this;if(A.tabBar){A.tabBar.onClick(B,A.el);B.stopEvent();return false}},onDeleteKey:function(A){if(this.closable){this.onCloseClick();A.stopEvent();return false}},beforeClick:function(A){if(!A){this.focus()}},activate:function(D){var C=this,B=C.card,A=C.ariaEl.dom;C.active=true;C.addCls(C._activeCls);if(A){A.setAttribute("aria-selected",true)}else{C.ariaRenderAttributes=C.ariaRenderAttributes||{};C.ariaRenderAttributes["aria-selected"]=true}if(B){if(B.ariaEl.dom){B.ariaEl.dom.setAttribute("aria-expanded",true)}else{B.ariaRenderAttributes=B.ariaRenderAttributes||{};B.ariaRenderAttributes["aria-expanded"]=true}}if(D!==true){C.fireEvent("activate",C)}},deactivate:function(D){var C=this,B=C.card,A=C.ariaEl.dom;C.active=false;C.removeCls(C._activeCls);if(A){A.setAttribute("aria-selected",false)}else{C.ariaRenderAttributes=C.ariaRenderAttributes||{};C.ariaRenderAttributes["aria-selected"]=false}if(B){if(B.ariaEl.dom){B.ariaEl.dom.setAttribute("aria-expanded",false)}else{B.ariaRenderAttributes=B.ariaRenderAttributes||{};B.ariaRenderAttributes["aria-expanded"]=false}}if(D!==true){C.fireEvent("deactivate",C)}},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(A){Ext.Button.superclass.wrapPrimaryEl.call(this,A)}}})