Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:true,shrinkWrapDock:true,initComponent:function(){var A=this;A.target=A.target||Ext.getDoc();A.targets=A.targets||{};A.callParent()},setTagConfig:function(A){this.tagConfig=Ext.apply({},A);delete this.tagConfig.attr},text:null,register:function(C){var G=Ext.isArray(C)?C:arguments,D=0,A=G.length,F,B,E;for(;D<A;D++){C=G[D];F=C.target;if(F){if(Ext.isArray(F)){for(B=0,E=F.length;B<E;B++){this.targets[Ext.id(F[B])]=C}}else{this.targets[Ext.id(F)]=C}}}},unregister:function(A){delete this.targets[Ext.id(A)]},cancelShow:function(A){var B=this,C=B.activeTarget;A=Ext.get(A).dom;if(B.isVisible()){if(C&&C.el===A){B.hide()}}else{if(C&&C.el===A){B.clearTimer("show")}}},getTipCfg:function(E,D){var C=E.title,B=this.tagConfig,A=B.attr||(B.attr=B.namespace+B.attribute),F;if(this.interceptTitles&&C&&Ext.isString(C)){E.setAttribute(A,C);E.removeAttribute("title");return{text:C}}else{E=Ext.fly(E).findParent(function(G){return(F=G.getAttribute(A))});if(E){return{target:E,text:F}}}},onTargetOver:function(A){this.doTargetOver(A.getTarget(this.delegate),null,A)},doTargetOver:function(I,P,B){var J=this,A,E,F,C,H,K,D,M,G,O,L,N;if(J.disabled){return }if(typeof I==="string"){I=Ext.getDom(I)}J.targetXY=P||(B?B.getXY():Ext.fly(I).getXY());if(!I||I.nodeType!==1||I===document.documentElement||I===document.body){return }if(J.activeTarget&&((I===J.activeTarget.el)||Ext.fly(J.activeTarget.el).contains(I))){if(J.targetTextEmpty()){J.onShowVeto();delete J.activeTarget}else{J.clearTimer("hide");J.show()}return }if(I){G=J.targets;for(N in G){if(G.hasOwnProperty(N)){L=G[N];O=Ext.fly(L.target);if(O&&(O.dom===I||O.contains(I))){C=O.dom;break}}}if(C){J.activeTarget=J.targets[C.id];J.activeTarget.el=I;J.anchor=J.activeTarget.anchor;if(J.anchor){J.anchorTarget=I}A=parseInt(J.activeTarget.showDelay,10);if(A){F=J.showDelay;J.showDelay=A}J.delayShow();if(A){J.showDelay=F}if(!(E=J.activeTarget.hideAction)){delete J.hideAction}else{J.hideAction=E}return }}C=Ext.fly(I,"_quicktip-target");H=J.tagConfig;K=H.namespace;D=J.getTipCfg(I,B);if(D){if(D.target){I=D.target;C=Ext.fly(I,"_quicktip-target")}M=C.getAttribute(K+H.hide);J.activeTarget={el:I,text:D.text,width:+C.getAttribute(K+H.width)||null,autoHide:M!=="user"&&M!=="false",title:C.getAttribute(K+H.title),cls:C.getAttribute(K+H.cls),align:C.getAttribute(K+H.align),showDelay:parseInt(C.getAttribute(K+H.showDelay)||0,10),hideAction:C.getAttribute(K+H.hideAction),anchorTarget:C.getAttribute(K+H.anchorTarget)};if(!J.initialConfig.hasOwnProperty("anchor")){J.anchor=C.getAttribute(K+H.anchor)}if(J.anchor&&!J.initialConfig.hasOwnProperty("anchorTarget")){J.anchorTarget=J.activeTarget.anchorTarget||I}A=parseInt(J.activeTarget.showDelay,10);if(A){F=J.showDelay;J.showDelay=A}J.delayShow();if(A){J.showDelay=F}}},onTargetOut:function(E){var C=this,D=C.activeTarget,A,B;if(D&&E.within(C.activeTarget.el)&&!C.getTipCfg(E.getTarget(),E)){return }C.clearTimer("show");delete C.activeTarget;if(C.autoHide!==false){A=D&&parseInt(D.hideDelay,10);if(A){B=C.hideDelay;C.hideDelay=A}C.delayHide();if(A){C.hideDelay=B}}},targetTextEmpty:function(){var C=this,D=C.activeTarget,A=C.tagConfig,B,E;if(D){B=D.el;if(B){E=B.getAttribute(A.namespace+A.attribute);if(!E&&!C.targets[Ext.id(D.target)]){return true}}}return false},show:function(){var B=this,A=B.fromDelayShow;if(A&&B.targetTextEmpty()){B.onShowVeto();delete B.activeTarget;return }B.callParent(arguments)},showAt:function(E){var C=this,D=C.activeTarget,F=C.header,B,A;if(D){if(!C.rendered){C.render(Ext.getBody());C.activeTarget=D}C.suspendLayouts();if(D.title){C.setTitle(D.title);F.show()}else{if(F){F.hide()}}C.update(D.text);C.autoHide=D.autoHide;B=D.dismissDelay;C.dismissDelay=Ext.isNumber(B)?B:C.dismissDelay;if(D.mouseOffset){E[0]+=D.mouseOffset[0];E[1]+=D.mouseOffset[1]}A=C.lastCls;if(A){C.removeCls(A);delete C.lastCls}A=D.cls;if(A){C.addCls(A);C.lastCls=A}C.setWidth(D.width);if(C.anchor){C.constrainPosition=false}else{if(D.align){E=C.getAlignToXY(D.el,D.align);C.constrainPosition=false}else{C.constrainPosition=true}}C.resumeLayouts(true)}C.callParent([E])},showByTarget:function(F){var C=this,E,B,D,A,G;E=C.targets[F.id];if(E){C.activeTarget=E;C.activeTarget.el=Ext.get(F).dom;C.anchor=C.activeTarget.anchor;B=F.getSize();D=F.getXY();C.showAt([D[0],D[1]+B.height])}},hide:function(){delete this.activeTarget;this.callParent()}})