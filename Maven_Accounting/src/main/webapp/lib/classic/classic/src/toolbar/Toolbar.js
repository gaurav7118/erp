Ext.define("Ext.toolbar.Toolbar",{extend:"Ext.container.Container",requires:["Ext.layout.container.HBox","Ext.layout.container.VBox"],uses:["Ext.toolbar.Fill","Ext.toolbar.Separator"],alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",mixins:["Ext.util.FocusableContainer"],isToolbar:true,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:undefined,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:Ext.baseCSSPrefix+"toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var C=this,B=C.layout,A=C.vertical;if(A===undefined){C.vertical=A=C.dock==="right"||C.dock==="left"}C.layout=B=Ext.applyIf(Ext.isString(B)?{type:B}:B||{},{type:A?"vbox":"hbox",align:A?"stretchmax":"middle"});if(C.overflowHandler){B.overflowHandler=C.overflowHandler}else{if(C.enableOverflow){B.overflowHandler="menu"}}if(A){C.addClsWithUI("vertical")}if(C.ui==="footer"){C.ignoreBorderManagement=true}C.callParent()},getRefItems:function(A){var E=this,B=E.callParent(arguments),D=E.layout,C;if(A&&(E.enableOverflow||(E.overflowHandler==="menu"))){C=D.overflowHandler;if(C&&C.menu){B=B.concat(C.menu.getRefItems(A))}}return B},lookupComponent:function(D){var C=arguments,A,B;if(typeof D==="string"){B=Ext.toolbar.Toolbar;A=B.shortcutsHV[this.vertical?1:0][D]||B.shortcuts[D];if(typeof A==="string"){D={xtype:A}}else{if(A){D=Ext.apply({},A)}else{D={xtype:"tbtext",text:D}}}this.applyDefaults(D);C=[D]}return this.callParent(C)},onBeforeAdd:function(B){var C=this,D=C.ui==="footer",A=D?C.defaultFooterButtonUI:C.defaultButtonUI;if(B.isSegmentedButton){if(B.getDefaultUI()==="default"&&!B.config.hasOwnProperty("defaultUI")){B.setDefaultUI(A)}}else{if(B.ui==="default"&&!B.hasOwnProperty("ui")){if(B.isButton){B.ui=A}else{if(B.isFormField){B.ui=D?C.defaultFooterFieldUI:C.defaultFieldUI}}}}if(B instanceof Ext.toolbar.Separator){B.setUI(C.vertical?"vertical":"horizontal")}C.callParent(arguments)},onAdd:function(A){if(A.needArrowKeys&&this.enableFocusableContainer){this.enableFocusableContainer=false}this.callParent(arguments);this.trackMenu(A)},onRemove:function(A){this.callParent(arguments);this.trackMenu(A,true)},privates:{applyDefaults:function(A){if(!Ext.isString(A)){A=this.callParent(arguments)}return A},trackMenu:function(C,A){var B=this;if(B.trackMenus&&C.menu){C[A?"un":"on"]({mouseover:B.onButtonOver,menushow:B.onButtonMenuShow,menuhide:B.onButtonMenuHide,scope:B})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(B,C){var A=this.activeMenuBtn;if(A&&A!==B){A.hideMenu();B.focus();B.showMenu(C);this.activeMenuBtn=B}},onButtonMenuShow:function(A){this.activeMenuBtn=A},onButtonMenuHide:function(A){this.activeMenuBtn=null}}})