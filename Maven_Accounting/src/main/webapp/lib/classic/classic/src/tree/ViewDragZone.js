Ext.define("Ext.tree.ViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(B,A){return(A.get("allowDrag")===false)||!!B.getTarget(this.view.expanderSelector)},getDragText:function(){var A=this.dragData.records,C=A.length,E=A[0].get(this.displayField),D="s",B=/\{\d+\}/,F=this.dragText;if(B.test(F)&&C===1&&E){return E}else{if(!E){D=""}}return Ext.String.format(F,C,D)},afterRepair:function(){var G=this,A=G.view,H=A.selectedItemCls,B=G.dragData.records,F,E=B.length,C=Ext.fly,D;if(Ext.enableFx&&G.repairHighlight){for(F=0;F<E;F++){D=A.getNode(B[F]);C(D.firstChild).highlight(G.repairHighlightColor,{listeners:{beforeanimate:function(){if(A.isSelected(D)){C(D).removeCls(H)}},afteranimate:function(){if(A.isSelected(D)){C(D).addCls(H)}}}})}}G.dragging=false}})