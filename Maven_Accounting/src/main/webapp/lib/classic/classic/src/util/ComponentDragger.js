Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(A,B){this.comp=A;this.initialConstrainTo=B.constrainTo;this.callParent([B])},onStart:function(C){var B=this,A=B.comp;B.startPosition=A.getXY();if(A.ghost&&!A.liveDrag){B.proxy=A.ghost();B.dragTarget=B.proxy.header.el}if(B.constrain||B.constrainDelegate){B.constrainTo=B.calculateConstrainRegion()}if(A.beginDrag){A.beginDrag()}if(A.el.shim){A.el.maskIframes()}},calculateConstrainRegion:function(){var H=this,F=H.comp,G=H.initialConstrainTo,E=F.constraintInsets,J,B,D,C=H.proxy?H.proxy.el:F.el,I=C.shadow,A=(I&&!H.constrainDelegate&&F.constrainShadow&&!I.disabled)?I.getShadowSize():0;if(!(G instanceof Ext.util.Region)){J=Ext.fly(G);G=J.getConstrainRegion()}else{G=G.copy()}if(E){E=Ext.isObject(E)?E:Ext.Element.parseBox(E);G.adjust(E.top,E.right,E.bottom,E.left)}if(A){G.adjust(A[0],-A[1],-A[2],A[3])}if(!H.constrainDelegate){B=Ext.fly(H.dragTarget).getRegion();D=C.getRegion();G.adjust(B.top-D.top,B.right-D.right,B.bottom-D.bottom,B.left-D.left)}return G},onDrag:function(C){var B=this,A=(B.proxy&&!B.comp.liveDrag)?B.proxy:B.comp,D=B.getOffset(B.constrain||B.constrainDelegate?"dragTarget":null);A.setPagePosition(B.startPosition[0]+D[0],B.startPosition[1]+D[1])},onEnd:function(B){var A=this.comp;if(A.destroyed||A.destroying){return }if(this.proxy&&!A.liveDrag){A.unghost()}if(A.endDrag){A.endDrag()}if(A.el.shim){A.el.unmaskIframes()}}})