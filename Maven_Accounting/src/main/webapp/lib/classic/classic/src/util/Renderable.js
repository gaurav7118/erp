Ext.define("Ext.util.Renderable",{mixinId:"renderable",requires:["Ext.dom.Element"],frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ',Ext.baseCSSPrefix+'table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:Ext.baseCSSPrefix+"layer",_fixedLayerCls:Ext.baseCSSPrefix+"fixed-layer",ariaStaticRoles:{presentation:true,article:true,definition:true,directory:true,document:true,img:true,heading:true,math:true,note:true,banner:true,complementary:true,contentinfo:true,navigation:true,search:true,"undefined":true,"null":true},statics:{makeRenderSetter:function(A,C){var B=A.name;return function(E){var D=this,G=(D.renderConfigs||(D.renderConfigs={})),F=G[C];if(D._renderState>=C){(A.setter||A.getSetter()).call(D,E)}else{if(!F){G[C]=F={}}if(!(B in F)){F[B]=D[B]}D[B]=E}return D}},processRenderConfig:function(A,K,C){var G=this.prototype,E=this.getConfigurator(),L=Ext.util.Renderable,J=L.makeRenderSetter,D=A[K],H,I,B,F;for(B in D){I=Ext.Config.get(B);if(!G[F=I.names.set]){H=(I.renderSetter||(I.renderSetter={}));G[F]=H[C]||(H[C]=J(I,C))}}delete A[K];E.add(D)}},onClassMixedIn:function(C){var A=C.override,E=this.processRenderConfig,D=function(F){if(F.beforeRenderConfig){this.processRenderConfig(F,"beforeRenderConfig",1)}if(F.renderConfig){this.processRenderConfig(F,"renderConfig",3)}A.call(this,F)},B=function(G,F){G.override=D;G.processRenderConfig=E;if(F.beforeRenderConfig){G.processRenderConfig(F,"beforeRenderConfig",1)}if(F.renderConfig){G.processRenderConfig(F,"renderConfig",3)}};B(C,C.prototype);C.onExtended(B)},afterRender:function(){var H=this,D={},B=H.protoEl,G=H.el,E,I,C,F,A;H.finishRenderChildren();H._renderState=4;if(H.contentEl){C=Ext.baseCSSPrefix;F=C+"hidden-";A=H.contentEl=Ext.get(H.contentEl);A.component=H;A.removeCls([C+"hidden",F+"display",F+"offsets"]);H.getContentTarget().appendChild(A.dom)}B.writeTo(D);I=D.removed;if(I){G.removeCls(I)}I=D.cls;if(I.length){G.addCls(I)}I=D.style;if(D.style){G.setStyle(I)}H.protoEl=null;if(!H.ownerCt&&!H.skipLayout){H.updateLayout()}if(!(H.x&&H.y)&&(H.pageX||H.pageY)){H.setPagePosition(H.pageX,H.pageY)}if(H.disableOnRender){H.onDisable()}E=H.controller;if(E&&E.afterRender){E.afterRender(H)}},afterFirstLayout:function(D,K){var F=this,J=F.x,H=F.y,I=F.defaultAlign,B=F.alignOffset,E,C,A,G,L;if(!F.ownerLayout){C=J!==undefined;A=H!==undefined}if(F.floating&&!F.preventDefaultAlign&&(!C||!A)){if(F.floatParent){G=F.floatParent.getTargetEl().getViewRegion();L=F.el.getAlignToXY(F.alignTarget||F.floatParent.getTargetEl(),I,B);G.x=L[0]-G.x;G.y=L[1]-G.y}else{L=F.el.getAlignToXY(F.alignTarget||F.container,I,B);G=F.el.translateXY(L[0],L[1])}J=C?J:G.x;H=A?H:G.y;C=A=true}if(C||A){F.setPosition(J,H)}F.onBoxReady(D,K);E=F.controller;if(E&&E.boxReady){E.boxReady(F)}},beforeRender:function(){var D=this,E=D.floating,C=D.getComponentLayout(),B=D.userCls,A;D._renderState=1;D.ariaUsesMainElement=D.ariaEl==="el";A=D.controller;if(A&&A.beforeRender){A.beforeRender(D)}D.initBindable();if(D.renderConfigs){D.flushRenderConfigs()}if(D.reference){D.publishState()}if(B){D.addCls(B)}if(E){D.addCls(D.fixed?D._fixedLayerCls:D._layerCls);B=E.cls;if(B){D.addCls(B)}}D.frame=D.frame||D.alwaysFramed;if(!C.initialized){C.initLayout()}D.initOverflow();D.setUI(D.ui)},doApplyRenderTpl:function(C,A){var D=A.$comp,B;if(!D.rendered){B=D.initRenderTpl();B.applyOut(A.renderData,C)}},getElConfig:function(){var E=this,G=E.autoEl,D=E.getFrameInfo(),B={tag:"div",tpl:D?E.initFramingTpl(D.table):E.initRenderTpl()},H=E.layoutTargetCls,F=E.protoEl,A=E.ariaRole,C;E.initStyles(F);if(H&&!D){F.addCls(H)}F.writeTo(B);F.flush();if(G){if(Ext.isString(G)){B.tag=G}else{Ext.apply(B,G)}}if(A&&E.ariaUsesMainElement){B.role=A;if(!E.ariaStaticRoles[A]){B["aria-hidden"]=!!E.hidden;B["aria-disabled"]=!!E.disabled;if(E.ariaLabel&&!E.ariaLabelledBy){B["aria-label"]=E.ariaLabel}if(E.collapsible){B["aria-expanded"]=!E.collapsed}if(E.ariaRenderAttributes){Ext.apply(B,E.ariaRenderAttributes)}if(E.config.ariaAttributes){Ext.apply(B,E.getAriaAttributes())}}}B.id=E.id;if(B.tpl){if(D){B.tplData=C=E.getFrameRenderData();C.renderData=E.initRenderData()}else{B.tplData=E.initRenderData()}}E.ariaRenderAttributes=null;return B},getInsertPosition:function(A){if(A!==undefined){if(Ext.isNumber(A)){A=this.container.dom.childNodes[A]}else{A=Ext.getDom(A)}}return A},getRenderTree:function(){var B=this,A=null;if(!B.hasListeners.beforerender||B.fireEvent("beforerender",B)!==false){B._renderState=1;B.beforeRender();B.rendering=true;B._renderState=2;A=B.getElConfig();if(B.el){A.id=B.$pid=Ext.id(null,B.el.identifiablePrefix)}}return A},initRenderData:function(){var C=this,A=C.ariaRole,D,B;D=Ext.apply({$comp:C,id:C.id,ui:C.ui,uiCls:C.uiCls,baseCls:C.baseCls,componentCls:C.componentCls,frame:C.frame,renderScroller:C.touchScroll,scrollerCls:C.scrollerCls,childElCls:""},C.renderData);if(A&&!C.ariaUsesMainElement){B={role:A};if(!C.ariaStaticRoles[A]){B["aria-hidden"]=!!C.hidden;B["aria-disabled"]=!!C.disabled;if(C.ariaLabel&&!C.ariaLabelledBy){B["aria-label"]=C.ariaLabel}if(C.collapsible){B["aria-expanded"]=!C.collapsed}if(C.ariaRenderAttributes){Ext.apply(B,C.ariaRenderAttributes)}if(C.config.ariaAttributes){Ext.apply(B,C.getAriaAttributes())}}D.ariaAttributes=B}return D},onRender:function(D,E){var F=this,H=F.x,G=F.y,C=null,B=F.el,A,I;F.applyRenderSelectors();F.rendering=null;F.rendered=true;F._renderState=3;if(F.renderConfigs){F.flushRenderConfigs()}if(H!=null){C={x:H}}if(G!=null){(C=C||{}).y=G}if(!F.getFrameInfo()){A=F.width;I=F.height;if(typeof A==="number"){C=C||{};C.width=A}if(typeof I==="number"){C=C||{};C.height=I}}if(F.touchScroll===1){F.getOverflowEl().disableTouchScroll()}F.lastBox=B.lastBox=C},render:function(C,B){var E=this,D=E.el,H=E.ownerLayout,G,A,F;if(D&&!D.isElement){E.wrapPrimaryEl(D);D=E.el}if(!E.skipLayout){Ext.suspendLayouts()}C=E.initContainer(C);F=E.getInsertPosition(B);if(!D){A=E.getRenderTree();if(H&&H.transformItemRenderTree){A=H.transformItemRenderTree(A)}if(A){if(F){D=Ext.DomHelper.insertBefore(F,A)}else{D=Ext.DomHelper.append(C,A)}E.wrapPrimaryEl(D);E.cacheRefEls(D)}}else{if(!E.hasListeners.beforerender||E.fireEvent("beforerender",E)!==false){E.beforeRender();E.needsRenderTpl=E.rendering=true;E._renderState=2;E.initStyles(D);if(E.allowDomMove!==false){if(F){C.dom.insertBefore(D.dom,F)}else{C.dom.appendChild(D.dom)}}}else{G=true}}if(D&&!G){E.finishRender(B)}if(!E.skipLayout){Ext.resumeLayouts(!E.hidden&&!C.isDetachedBody)}},ensureAttachedToBody:function(C){var B=this,A;while(B.ownerCt){B=B.ownerCt}if(B.container.isDetachedBody){B.container=A=Ext.getBody();A.appendChild(B.el.dom);if(C){B.updateLayout()}if(typeof B.x==="number"||typeof B.y==="number"){B.setPosition(B.x,B.y)}}},privates:{applyRenderSelectors:function(){var D=this,B=D.renderSelectors,C=D.el,E,A;D.attachChildEls(C);D.ariaEl=D[D.ariaEl]||D.el;if(B){for(A in B){E=B[A];if(E){D[A]=C.selectNode(E,false)}}}},cacheRefEls:function(E){E=E||this.el;var C=Ext.cache,G=Ext.dom.Element,H=E.isElement?E.dom:E,B=H.querySelectorAll("[data-ref]"),A=B.length,F,D;for(D=0;D<A;D++){F=B[D];if(!C[F.id]){new G(F)}}},doAutoRender:function(){var A=this;if(!A.rendered){if(A.floating){A.render(A.renderTo||document.body)}else{A.render(Ext.isBoolean(A.autoRender)?Ext.getBody():A.autoRender)}}},doRenderContent:function(A,D){var B=D.$comp,C=B.data;if(B.html){Ext.DomHelper.generateMarkup(B.html,A);delete B.html}if(B.tpl){if(!B.tpl.isTemplate){B.tpl=new Ext.XTemplate(B.tpl)}if(C){B.data=C=C.isEntity?C.getData(true):C;B.tpl.applyOut(C,A)}}},doRenderFramingDockedItems:function(A,C,D){var B=C.$comp;if(!B.rendered&&B.doRenderDockedItems){C.renderData.$skipDockedItems=true;B.doRenderDockedItems.call(this,A,C,D)}},flushRenderConfigs:function(){var D=this,G=D.renderConfigs,F=D._renderState,H,C,B,A,E;if(G){for(C=0;C<=F;++C){H=G[C];if(H){G[C]=null;for(B in H){E=H[B];(A||(A={}))[B]=D[B];D[B]=E}}}if(A){D.setConfig(A)}}},finishRender:function(G){var J=this,A=Ext.cache,I,F,B,H,E,D,C;if(!J.el||J.$pid){if(J.container){C=A[J.id];D=C?C.dom:J.container.getById(J.id,true)}else{B=J.$pid||J.id;C=A[B];D=C?C.dom:Ext.getDom(B)}if(!J.el){J.wrapPrimaryEl(D)}else{delete J.$pid;if(!J.el.dom){J.wrapPrimaryEl(J.el)}D.parentNode.insertBefore(J.el.dom,D);I=D;D=J.el.dom;F=D.firstChild;while(I.firstChild){D.insertBefore(I.firstChild,F)}J.el.addCls(I.className);Ext.removeNode(I)}}else{if(J.needsRenderTpl){H=J.initRenderTpl();if(H){E=J.initRenderData();H.insertFirst(J.getTargetEl(),E)}J.cacheRefEls()}}J.el.component=J;if(!J.container){J.container=Ext.get(J.el.dom.parentNode)}if(J.ctCls){J.container.addCls(J.ctCls)}J.onRender(J.container,G);if(!J.overflowInited){J.initOverflow()}J.el.setVisibilityMode(Ext.Element[J.hideMode.toUpperCase()]);if(J.overCls){J.el.hover(J.addOverCls,J.removeOverCls,J)}if(J.hasListeners.render){J.fireEvent("render",J)}J.afterRender();if(J.hasListeners.afterrender){J.fireEvent("afterrender",J)}J.initEvents();if(J.hidden){J.el.hide()}},finishRenderChildren:function(){var A=this.getComponentLayout();A.finishRender()},getFrameRenderData:function(){var C=this,B=C.frameSize,A="";if(C._syncFrameHeight&&C.height){A="height:"+(C.height-B.height)+"px"}return{$comp:C,id:C.id,fgid:C.id+"-frame",ui:C.ui,uiCls:C.uiCls,frameCls:C.frameCls,frameBodyCls:C.layoutTargetCls||"",baseCls:C.baseCls,top:!!B.top,left:!!B.left,right:!!B.right,bottom:!!B.bottom,mcStyle:A,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var O=this,I=O.frameInfoCache,C=O.getFramingInfoCls()+"-frameInfo",P=I[C],H,K,G,Q,D,E,J,R,N,B,L,A,F,M;if(P==null){H=Ext.fly(O.getStyleProxy(C),"frame-style-el");K=H.getStyle("font-family");if(K){K=K.split("-");G=parseInt(K[1],10);Q=parseInt(K[2],10);D=parseInt(K[3],10);E=parseInt(K[4],10);J=parseInt(K[5],10);R=parseInt(K[6],10);N=parseInt(K[7],10);B=parseInt(K[8],10);L=parseInt(K[9],10);A=parseInt(K[10],10);F=parseInt(K[11],10);M=parseInt(K[12],10);P={table:K[0].charAt(0)==="t",vertical:K[0].charAt(1)==="v",top:G,right:Q,bottom:D,left:E,width:E+Q,height:G+D,border:{top:J,right:R,bottom:N,left:B,width:B+R,height:J+N},padding:{top:L,right:A,bottom:F,left:M,width:M+A,height:L+F}}}else{P=false}if(O.frame===true&&!P){Ext.log.error("You have set frame: true explicity on this component ("+O.getXType()+") and it does not have any framing defined in the CSS template. In this case IE cannot figure out what sizes to use and thus framing on this component will be disabled.")}I[C]=P}O.frame=!!P;O.frameSize=P;return P},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(B){var A=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({"data-sticky":true,role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));A.className=B;return A},getFrameTpl:function(A){return this.getTpl(A?"frameTableTpl":"frameTpl")},initContainer:function(A){var B=this;if(!A&&B.el){A=B.el.dom.parentNode;B.allowDomMove=false}B.container=A.dom?A:Ext.get(A);return B.container},initOverflow:function(){var D=this,A=D.getOverflowStyle(),F=D.scrollFlags,E=D.getOverflowEl(),C=(F.y||F.x),B=D.touchScroll=(C&&Ext.supports.touchScroll);if(!C||!E||!E.isElement){return }D.overflowInited=true;if(B===2){E.setStyle("overflow","hidden")}else{E.setStyle(A)}},doRenderPadding:function(A,C){var B=C.$comp;if(B.touchScroll){A.push("padding:",B.unitizeBox(B.padding))}},initFramingTpl:function(B){var A=this.getFrameTpl(B);if(A&&!A.applyRenderTpl){this.setupFramingTpl(A)}return A},initRenderTpl:function(){var A=this.getTpl("renderTpl");if(A&&!A.renderContent){this.setupRenderTpl(A)}return A},setupFramingTpl:function(A){A.applyRenderTpl=this.doApplyRenderTpl;A.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(A){A.renderBody=A.renderContent=this.doRenderContent;A.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return }var L=this,G=L.el.dom,K=L.frameTable,C=L.frameBody,N=C.dom,J=L.getFrameInfo(),O,F,B,E,I,P,Q,D,H,A,M;B=document.createElement("div");P=L.getFrameRenderData();D=L.getFrameTpl(J.table);D.insertFirst(B,P);M=B.querySelectorAll("[data-ref]");A=B.querySelector('[data-ref="frameBody"]');for(I=N;I.parentNode!==G;){I=I.parentNode}while(B.firstChild){G.insertBefore(B.firstChild,I)}A.parentNode.replaceChild(N,A);N.className=A.className;C.setSize();O=L.getChildEls();if(K){K.destroy();L.frameTable=null}for(F in O){if(O[F].frame){E=L[F];if(E&&E!==C){E.destroy();L[F]=null}}}for(H=M.length;H--;){F=(Q=M[H]).getAttribute("data-ref");if(F!=="frameBody"){L[F]=new Ext.dom.Element(Q)}}},frameInfoCache:{}}})