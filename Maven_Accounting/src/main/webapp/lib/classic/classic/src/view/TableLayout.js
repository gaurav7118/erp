Ext.define("Ext.view.TableLayout",{extend:"Ext.layout.component.Auto",alias:"layout.tableview",type:"tableview",beginLayout:function(F){var D=this,A=D.owner,E=A.ownerGrid,C=A.lockingPartner,B=F.context;F.doSyncRowHeights=C&&C.grid.isVisible()&&E.syncRowHeight;if(!D.columnFlusherId){D.columnFlusherId=D.id+"-columns";D.rowHeightFlusherId=D.id+"-rows"}if(D.owner.bufferedRenderer){D.owner.bufferedRenderer.beforeTableLayout(F)}D.callParent([F]);if(F.doSyncRowHeights){if(!F.lockingPartnerContext){(F.lockingPartnerContext=B.getCmp(C)).lockingPartnerContext=F}F.rowHeightSynchronizer=D.owner.syncRowHeightBegin()}(F.headerContext=B.getCmp(D.headerCt)).viewContext=F},beginLayoutCycle:function(B,A){this.callParent([B,A]);if(B.syncRowHeights){B.target.syncRowHeightClear(B.rowHeightSynchronizer);B.syncRowHeights=false}},calculate:function(E){var M=this,B=E.context,G=E.lockingPartnerContext,D=E.headerContext,J=E.ownerCtContext,C=M.owner,I=D.getProp("columnsChanged"),A=E.state,N,F,P,O,K=C.body.dom,Q,L,H;if(!C.all.getCount()&&(!K||!C.body.child("table"))){E.setProp("viewOverflowY",false);M.callParent([E]);return }if(I===undefined){M.done=false;return }if(I){if(!(N=A.columnFlusher)){B.queueFlush(A.columnFlusher=N={ownerContext:E,columnsChanged:I,layout:M,id:M.columnFlusherId,flush:M.flushColumnWidths})}if(!N.flushed){M.done=false;return }}if(E.doSyncRowHeights){if(!(O=A.rowHeightFlusher)){if(!(P=A.rowHeights)){A.rowHeights=P=E.rowHeightSynchronizer;M.owner.syncRowHeightMeasure(P);E.setProp("rowHeights",P)}if(!(F=G.getProp("rowHeights"))){M.done=false;return }B.queueFlush(A.rowHeightFlusher=O={ownerContext:E,synchronizer:P,otherSynchronizer:F,layout:M,id:M.rowHeightFlusherId,flush:M.flushRowHeights})}if(!O.flushed){M.done=false;return }}M.callParent([E]);if(!E.heightModel.shrinkWrap){H=false;if(!J.heightModel.shrinkWrap){L=J.target.layout.getContainerSize(J);if(!L.gotHeight){M.done=false;return }Q=K.offsetHeight;H=Q>L.height}E.setProp("viewOverflowY",H)}},measureContentHeight:function(D){var A=this.owner,C=A.body.dom,B=A.emptyEl,E=0;if(B){E+=B.offsetHeight}if(C){E+=C.offsetHeight}if(D.headerContext.state.boxPlan.tooNarrow){E+=Ext.getScrollbarSize().height}return E},flushColumnWidths:function(){var J=this,I=J.layout,B=J.ownerContext,D=J.columnsChanged,A=B.target,H=D.length,C,F,E,G;if(B.state.columnFlusher!==J){return }for(F=0;F<H;F++){if(!(C=D[F])){continue}E=C.props.width;A.body.select(A.getColumnSizerSelector(C.target)).setWidth(E);G=C.lastBox;if(G){G.width=E}}J.flushed=true;if(!I.pending){B.context.queueLayout(I)}},flushRowHeights:function(){var A=this,B=A.layout,C=A.ownerContext;if(C.state.rowHeightFlusher!==A){return }C.target.syncRowHeightFinish(A.synchronizer,A.otherSynchronizer);A.flushed=true;C.syncRowHeights=true;if(!B.pending){C.context.queueLayout(B)}},finishedLayout:function(B){var A=this,C=Ext.fly(A.owner.getNodeContainer());A.callParent([B]);if(C){C.setWidth(B.headerContext.props.contentWidth)}if(A.owner.bufferedRenderer){A.owner.bufferedRenderer.afterTableLayout(B)}}})