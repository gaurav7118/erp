var Test={};var isCommonJS=typeof window=="undefined"&&typeof exports=="object";var jasmine={};if(isCommonJS){exports.jasmine=jasmine}jasmine.unimplementedMethod_=function(){throw new Error("unimplemented method")};jasmine.undefined=jasmine.___undefined___;jasmine.VERBOSE=false;jasmine.DEFAULT_UPDATE_INTERVAL=250;jasmine.MAX_PRETTY_PRINT_DEPTH=40;jasmine.DEFAULT_TIMEOUT_INTERVAL=5000;jasmine.CATCH_EXCEPTIONS=true;jasmine.getGlobal=function(){function A(){return this}return A()};jasmine.bindOriginal_=function(C,A){var B=C[A];if(B.apply){return function(){return B.apply(C,arguments)}}else{return jasmine.getGlobal()[A]}};jasmine.setTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"setTimeout");jasmine.clearTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"clearTimeout");jasmine.setInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"setInterval");jasmine.clearInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"clearInterval");jasmine.MessageResult=function(A){this.type="log";this.values=A;this.trace=new Error()};jasmine.MessageResult.prototype.toString=function(){var B="";for(var A=0;A<this.values.length;A++){if(A>0){B+=" "}if(jasmine.isString_(this.values[A])){B+=this.values[A]}else{B+=jasmine.pp(this.values[A])}}return B};jasmine.ExpectationResult=function(B){this.type="expect";this.matcherName=B.matcherName;this.passed_=B.passed;this.expected=B.expected;this.actual=B.actual;this.message=this.passed_?"Passed.":B.message;var A=(B.trace||new Error(this.message));this.trace=this.passed_?"":A};jasmine.ExpectationResult.prototype.toString=function(){return this.message};jasmine.ExpectationResult.prototype.passed=function(){return this.passed_};jasmine.getEnv=function(){var A=jasmine.currentEnv_=jasmine.currentEnv_||new jasmine.Env();return A};jasmine.isArray_=function(A){return jasmine.isA_("Array",A)};jasmine.isString_=function(A){return jasmine.isA_("String",A)};jasmine.isNumber_=function(A){return jasmine.isA_("Number",A)};jasmine.isA_=function(A,B){return Object.prototype.toString.apply(B)==="[object "+A+"]"};jasmine.pp=function(A){var B=new jasmine.StringPrettyPrinter();B.format(A);return B.string};jasmine.isDomNode=function(A){return A.nodeType>0};jasmine.any=function(A){return new jasmine.Matchers.Any(A)};jasmine.objectContaining=function(A){return new jasmine.Matchers.ObjectContaining(A)};jasmine.Spy=function(A){this.identity=A||"unknown";this.isSpy=true;this.plan=function(){};this.mostRecentCall={};this.argsForCall=[];this.calls=[]};jasmine.Spy.prototype.andCallThrough=function(){this.plan=this.originalValue;return this};jasmine.Spy.prototype.andReturn=function(A){this.plan=function(){return A};return this};jasmine.Spy.prototype.andThrow=function(A){this.plan=function(){throw A};return this};jasmine.Spy.prototype.andCallFake=function(A){this.plan=A;return this};jasmine.Spy.prototype.reset=function(){this.wasCalled=false;this.callCount=0;this.argsForCall=[];this.calls=[];this.mostRecentCall={}};jasmine.createSpy=function(B){var A=function(){A.wasCalled=true;A.callCount++;var E=jasmine.util.argsToArray(arguments);A.mostRecentCall.object=this;A.mostRecentCall.args=E;A.argsForCall.push(E);A.calls.push({object:this,args:E});return A.plan.apply(this,arguments)};var C=new jasmine.Spy(B);for(var D in C){A[D]=C[D]}A.reset();return A};jasmine.isSpy=function(A){return A&&A.isSpy};jasmine.createSpyObj=function(B,C){if(!jasmine.isArray_(C)||C.length===0){throw new Error("createSpyObj requires a non-empty array of method names to create spies for")}var D={};for(var A=0;A<C.length;A++){D[C[A]]=jasmine.createSpy(B+"."+C[A])}return D};jasmine.log=function(){var A=jasmine.getEnv().currentSpec;A.log.apply(A,arguments)};var spyOn=function(B,A){return jasmine.getEnv().currentSpec.spyOn(B,A)};if(isCommonJS){exports.spyOn=spyOn}var it=function(B,A){return jasmine.getEnv().it(B,A)};if(isCommonJS){exports.it=it}var xit=function(B,A){return jasmine.getEnv().xit(B,A)};if(isCommonJS){exports.xit=xit}var expect=function(A){return jasmine.getEnv().currentSpec.expect(A)};if(isCommonJS){exports.expect=expect}var runs=function(A){jasmine.getEnv().currentSpec.runs(A)};if(isCommonJS){exports.runs=runs}var waits=function(A){jasmine.getEnv().currentSpec.waits(A)};if(isCommonJS){exports.waits=waits}var waitsFor=function(C,A,B){jasmine.getEnv().currentSpec.waitsFor.apply(jasmine.getEnv().currentSpec,arguments)};if(isCommonJS){exports.waitsFor=waitsFor}var beforeEach=function(A){jasmine.getEnv().beforeEach(A)};if(isCommonJS){exports.beforeEach=beforeEach}var afterEach=function(A){jasmine.getEnv().afterEach(A)};if(isCommonJS){exports.afterEach=afterEach}var describe=function(B,A){return jasmine.getEnv().describe(B,A)};if(isCommonJS){exports.describe=describe}var xdescribe=function(B,A){return jasmine.getEnv().xdescribe(B,A)};if(isCommonJS){exports.xdescribe=xdescribe}jasmine.XmlHttpRequest=(typeof XMLHttpRequest=="undefined")?function(){function B(C){try{return C()}catch(D){}return null}var A=B(function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")})||B(function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")})||B(function(){return new ActiveXObject("Msxml2.XMLHTTP")})||B(function(){return new ActiveXObject("Microsoft.XMLHTTP")});if(!A){throw new Error("This browser does not support XMLHttpRequest.")}return A}:XMLHttpRequest;jasmine.util={};jasmine.util.inherit=function(B,C){var A=function(){};A.prototype=C.prototype;B.prototype=new A()};jasmine.util.formatException=function(D){var A;if(D.line){A=D.line}else{if(D.lineNumber){A=D.lineNumber}}var B;if(D.sourceURL){B=D.sourceURL}else{if(D.fileName){B=D.fileName}}var C=(D.name&&D.message)?(D.name+": "+D.message):D.toString();if(B&&A){C+=" in "+B+" (line "+A+")"}return C};jasmine.util.htmlEscape=function(A){if(!A){return A}return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};jasmine.util.argsToArray=function(B){var A=[];for(var C=0;C<B.length;C++){A.push(B[C])}return A};jasmine.util.extend=function(A,C){for(var B in C){A[B]=C[B]}return A};jasmine.PrettyPrinter=function(){this.ppNestLevel_=0};jasmine.PrettyPrinter.prototype.format=function(A){this.ppNestLevel_++;try{if(A===jasmine.undefined){this.emitScalar("undefined")}else{if(A===null){this.emitScalar("null")}else{if(A===jasmine.getGlobal()){this.emitScalar("<global>")}else{if(A.jasmineToString){this.emitScalar(A.jasmineToString())}else{if(typeof A==="string"){this.emitString(A)}else{if(jasmine.isSpy(A)){this.emitScalar("spy on "+A.identity)}else{if(A instanceof RegExp){this.emitScalar(A.toString())}else{if(typeof A==="function"){this.emitScalar("Function")}else{if(typeof A.nodeType==="number"){this.emitScalar("HTMLNode")}else{if(A instanceof Date){this.emitScalar("Date("+A+")")}else{if(A.__Jasmine_been_here_before__){this.emitScalar("<circular reference: "+(jasmine.isArray_(A)?"Array":"Object")+">")}else{if(jasmine.isArray_(A)||typeof A=="object"){A.__Jasmine_been_here_before__=true;if(jasmine.isArray_(A)){this.emitArray(A)}else{this.emitObject(A)}delete A.__Jasmine_been_here_before__}else{this.emitScalar(A.toString())}}}}}}}}}}}}}finally{this.ppNestLevel_--}};jasmine.PrettyPrinter.prototype.iterateObject=function(C,A){for(var B in C){if(!C.hasOwnProperty(B)){continue}if(B=="__Jasmine_been_here_before__"){continue}A(B,C.__lookupGetter__?(C.__lookupGetter__(B)!==jasmine.undefined&&C.__lookupGetter__(B)!==null):false)}};jasmine.PrettyPrinter.prototype.emitArray=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitObject=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitScalar=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitString=jasmine.unimplementedMethod_;jasmine.StringPrettyPrinter=function(){jasmine.PrettyPrinter.call(this);this.string=""};jasmine.util.inherit(jasmine.StringPrettyPrinter,jasmine.PrettyPrinter);jasmine.StringPrettyPrinter.prototype.emitScalar=function(A){this.append(A)};jasmine.StringPrettyPrinter.prototype.emitString=function(A){this.append("'"+A+"'")};jasmine.StringPrettyPrinter.prototype.emitArray=function(B){if(this.ppNestLevel_>jasmine.MAX_PRETTY_PRINT_DEPTH){this.append("Array");return }this.append("[ ");for(var A=0;A<B.length;A++){if(A>0){this.append(", ")}this.format(B[A])}this.append(" ]")};jasmine.StringPrettyPrinter.prototype.emitObject=function(B){if(this.ppNestLevel_>jasmine.MAX_PRETTY_PRINT_DEPTH){this.append("Object");return }var A=this;this.append("{ ");var C=true;this.iterateObject(B,function(D,E){if(C){C=false}else{A.append(", ")}A.append(D);A.append(" : ");if(E){A.append("<getter>")}else{A.format(B[D])}});this.append(" }")};jasmine.StringPrettyPrinter.prototype.append=function(A){this.string+=A};jasmine.PrettyPrinter.prototype.format=function(A){if(this.ppNestLevel_>40){throw new Error("jasmine.PrettyPrinter: format() nested too deeply!")}this.ppNestLevel_++;try{if(A===jasmine.undefined){this.emitScalar("undefined")}else{if(A===null){this.emitScalar("null")}else{if(A===jasmine.getGlobal()){this.emitScalar("<global>")}else{if(A.expectedClass){this.emitScalar(A.toString())}else{if(typeof A==="string"){this.emitString(A)}else{if(jasmine.isSpy(A)){this.emitScalar("spy on "+A.identity)}else{if(A instanceof RegExp){this.emitScalar(A.toString())}else{if(typeof A==="function"){this.emitScalar("Function")}else{if(typeof A.nodeType==="number"){this.emitScalar("HTMLNode")}else{if(A instanceof Date){this.emitScalar("Date("+A+")")}else{if(A.__Jasmine_been_here_before__){this.emitScalar("<circular reference: "+(jasmine.isArray_(A)?"Array":"Object")+">")}else{if(jasmine.isArray_(A)||typeof A=="object"){A.__Jasmine_been_here_before__=true;if(jasmine.isArray_(A)){this.emitArray(A)}else{this.emitObject(A)}delete A.__Jasmine_been_here_before__}else{this.emitScalar(A.toString())}}}}}}}}}}}}}catch(B){}finally{this.ppNestLevel_--}};jasmine.StringPrettyPrinter.prototype.getIndent=function(){var A="",B;for(B=0;B<this.ws;B++){A+=" "}return A};jasmine.StringPrettyPrinter.prototype.emitObject=function(D){var B=this,E=true,A;this.append("{\n");if(!this.ws){this.ws=0}this.ws+=4;A=this.getIndent();var C=0;this.iterateObject(D,function(F,G){if(E){E=false}else{B.append(",\n")}B.append(A+F);B.append(" : ");if(G){B.append("<getter>")}else{if(typeof D[F]!=="object"){B.format(D[F])}else{B.append("<Object>")}}});this.ws-=4;A=this.getIndent();this.append(A+"\n"+A+"}")};jasmine.browser={};jasmine.browser.isIE=!!window.ActiveXObject;jasmine.browser.isIE6=jasmine.browser.isIE&&!window.XMLHttpRequest;jasmine.browser.isIE7=jasmine.browser.isIE&&!!window.XMLHttpRequest&&!document.documentMode;jasmine.browser.isIE8=jasmine.browser.isIE&&!!window.XMLHttpRequest&&!!document.documentMode&&!window.performance;jasmine.browser.isIE9=jasmine.browser.isIE&&!!window.performance;jasmine.browser.isSafari3=/safari/.test(navigator.userAgent.toLowerCase())&&/version\/3/.test(navigator.userAgent.toLowerCase());jasmine.browser.isOpera=!!window.opera;jasmine.browser.isOpera11=jasmine.browser.isOpera&&parseInt(window.opera.version(),10)>10;jasmine.array={};jasmine.array.indexOf=function(E,C,D){if(E.indexOf){return E.indexOf(C,D)}var A,B=E.length;for(A=(D<0)?Math.max(0,B+D):D||0;A<B;A++){if(E[A]===C){return A}}return -1};jasmine.array.remove=function(C,B){var A=this.indexOf(C,B);if(A!==-1){C.splice(A,1)}return C};jasmine.Dom=function(A){var D,C,E,G,B,F;A=A||{};if(A.tagName){return A}D=document.createElement(A.tag||"div");C=A.children||[];E=C.length;delete A.tag;for(B=0;B<E;B++){G=C[B];D.appendChild(new jasmine.Dom(G))}delete A.children;if(A.cls){jasmine.Dom.setCls(D,A.cls);delete A.cls}if(A.html){jasmine.Dom.setHTML(D,A.html);delete A.html}if(A.style){jasmine.Dom.setStyle(D,A.style);delete A.style}for(F in A){if(!A.hasOwnProperty(F)){continue}D[F]=A[F]}return D};jasmine.Dom.addCls=function(D,A){var C,E,B;if(!D.className){jasmine.Dom.setCls(D,A);return }C=D.className.split(" ");E=C.length;for(B=0;B<E;B++){if(C[B]==A){return }}D.className=D.className+" "+A};jasmine.Dom.removeCls=function(E,B){var D,F,A,C;if(!E.className){return }A=[];D=E.className.split(" ");F=D.length;for(C=0;C<F;C++){if(D[C]!==B){A.push(D[C])}}E.className=A.join(" ")};jasmine.Dom.hasCls=function(E,B){var D,F,A,C;if(!E.className){return }D=E.className.split(" ");F=D.length;for(C=0;C<F;C++){if(D[C]===B){return true}}return false};jasmine.Dom.setCls=function(B,A){B.className=A};jasmine.Dom.setHTML=function(B,A){B.innerHTML=A};jasmine.Dom.setStyle=function(A,B){var C;for(C in B){if(B.hasOwnProperty(C)){A.style[C]=B[C]}}};Test.OptionsImpl=function(){this.optionCheckBoxesEl={};this.options=this.urlDecode(window.location.search.substring(1));this.options.remote=window.location.toString().search("http:")!==-1;this.startAutoReloadTask()};Test.OptionsImpl.prototype.get=function(){return this.options};Test.OptionsImpl.prototype.urlEncode=function(B){var A=[],G=encodeURIComponent,F,E,D,C;for(E in B){if(!B.hasOwnProperty(E)){continue}F=B[E];if(jasmine.isArray_(F)){D=F.length;for(C=0;C<D;C++){A.push(E+"="+G(F[C]))}}else{A.push(E+"="+G(F))}}return A.join("&")};Test.hashString=function(B,C){C=C||0;for(var E,A=0,D=B.length;A<D;++A){E=B.charCodeAt(A);C=E+(C<<6)+(C<<16)-C}return C};Test.OptionsImpl.prototype.urlDecode=function(G){var E={},B,H,A,J,D,F,C;if(G!=""){B=G.split("&");H=decodeURIComponent;C=B.length;for(F=0;F<C;F++){D=B[F].split("=");A=H(D[0]);J=H(D[1]);E[A]=!E[A]?J:[].concat(E[A]).concat(J)}}function I(K){var L=parseInt(K,10);if(String(L)!==K){L=Test.hashString(K)}return L}if(E.specs){E.specs=jasmine.isArray_(E.specs)?E.specs:[E.specs];C=E.specs.length;for(F=0;F<C;F++){E.specs[F]=I(E.specs[F])}}else{E.specs=[]}if(E.suites){E.suites=jasmine.isArray_(E.suites)?E.suites:[E.suites];C=E.suites.length;for(F=0;F<C;F++){E.suites[F]=I(E.suites[F])}}else{E.suites=[]}return E};Test.OptionsImpl.prototype.renderCheckbox=function(A,C){var B=this,D=new jasmine.Dom({tag:"input",cls:"option "+A,id:A,type:"checkbox",onclick:function(){B.onCheckboxClick.apply(B,arguments)}});B.optionCheckBoxesEl[A]=D;return new jasmine.Dom({tag:"span",cls:"show",children:[D,{tag:"label",html:C,htmlFor:A}]})};Test.OptionsImpl.prototype.check=function(){var B,A;for(B in this.options){if(!this.options.hasOwnProperty(B)){continue}A=this.optionCheckBoxesEl[B];if(A){A.checked=this.options[B]}}};Test.OptionsImpl.prototype.onCheckboxClick=function(E){var C,B,F,D,A;E=E||window.event;C=E.target||E.srcElement;B=C.className.split(" ")[1];if(C.checked){this.options[B]=true}else{delete this.options[B]}};Test.OptionsImpl.prototype.reloadWindow=function(C){var B=this.options,D=this.urlEncode(B),A=window.location;if(C){B.specs=[];B.suites=[]}if(A.search==="?"+D){A.reload()}else{A.search=D}};Test.OptionsImpl.prototype.runFailed=function(){var H=document.querySelectorAll(".checkbox-col"),I=document.querySelectorAll(".spec.failed"),B=50,F=I.length>B?"parent-suite":"spec",J=jasmine.Dom,G=Test.panel.TreeGrid;Test.Options.options.specs=[];Test.Options.options.suites=[];for(var C=H.length;C--;){var A=H[C],D=A.nextSibling,K=A.parentNode,E=A.firstChild;if(J.hasCls(D,F)&&J.hasCls(K,"failed")){E.checked=true;this.onCheck(E)}else{E.checked=false}}Test.Options.reloadWindow()};Test.OptionsImpl.prototype.startAutoReloadTask=function(){var B=this;if(B.options.autoReload){var A=setInterval(function(){if(Test.SandBox.isRunning()){clearInterval(A);setTimeout(function(){B.reloadWindow()},2000)}},1500)}};Test.OptionsImpl.prototype.isChecked=function(B){var D=this.options.specs,A=this.options.suites,C=B.id;if(B.suite){return D&&jasmine.array.indexOf(D,C)!==-1}else{return A&&jasmine.array.indexOf(A,C)!==-1}return false};Test.Options=new Test.OptionsImpl();Test.SandBoxImpl=function(){};Test.SandBoxImpl.prototype.domReady=function(A){if(document.addEventListener){window.addEventListener("load",A,false)}else{window.attachEvent("onload",A,false)}};Test.SandBoxImpl.prototype.setup=function(A){var B=this;B.requires=A.requires;B.domReady(function(){B.reporter=new Test.Reporter();B.createIframe()})};Test.SandBoxImpl.prototype.createIframe=function(){var B=this,A,D,C;B.options=Test.Options.get();var E=B.options.quirksMode?"iframe-quirks.html?loadSpecs=true":"iframe.html?loadSpecs=true";E+="&compiled="+!!B.options.compiled;if(B.options.specsset){E+="&specsset="+B.options.specsset}A=new jasmine.Dom({tag:"iframe",id:"sandboxIframe",cls:"sandboxIframe",name:"sandbox",frameBorder:0,src:E});B.reporter.getIframeContainer().appendChild(A);D=A.contentWindow||window.frames[A.name];this.iframe=A;this.win=D;D.id="sandboxWindow";D.__UNIT_TESTING__=true};Test.SandBoxImpl.prototype.getIframe=function(){return this.iframe};Test.SandBoxImpl.prototype.getWin=function(){return this.win};Test.SandBoxImpl.prototype.getDoc=function(){return this.getIframe().contentDocument||this.getWin().document};Test.SandBoxImpl.prototype.getBody=function(){return this.getDoc().body};Test.SandBoxImpl.prototype.getHead=function(){return this.getDoc().getElementsByTagName("head")[0]};Test.SandBoxImpl.prototype.save=function(B){var G=this.getDoc(),A=this.getBody(),E=A&&A.childNodes||[],F=E.length,D=0,H,C=this.lengthWas||(this.lengthWas=0);if(!this.options||!this.options.disableBodyClean){}if(F!=C){if(!window.headless){this.reporter.log(">> Warning the document.body dom element contains childNodes after spec execution !<br/>Spec : "+jasmine.util.htmlEscape(B.getFullName())+' <a href="?'+Test.Options.urlEncode({specs:[B.id],suites:[],disableBodyClean:true})+'">Load this spec only and disable body autoclean</a><br/>',"warning")}else{this.reporter.log("Warning: "+B.getFullName()+"doesn't clean properly the document.body.")}this.lengthWas=F}};Test.SandBoxImpl.prototype.clearDomElements=function(){var E=this.getDoc(),D=this.getBody(),B=D.childNodes,C=B.length,A,F;if(!this.options.disableBodyClean){for(A=0;A<C;A++){F=B[A];if(F){D.removeChild(F)}}}};Test.SandBoxImpl.prototype.clearComponents=function(){var C=this,D=C.getWin(),F,E,A,B;if(D.Ext&&D.Ext.ComponentManager){F=D.Ext.ComponentManager.all.getArray();A=F.length;for(B=0;B<A;B++){E=F[B];E.destroy()}}};Test.SandBoxImpl.prototype.isRunning=function(){return !this.getWin().jasmine.getEnv().currentRunner_.queue.isRunning()};Test.SandBoxImpl.prototype.iScope=function(o){if(typeof o==="function"){o="("+o.toString()+")();"}return Test.SandBox.getWin().eval(o)};Test.SandBox=new Test.SandBoxImpl();var iScope=Test.SandBox.iScope;Test.CodeHighLighter=function(A){this.source=A.source;this.lineNumber=A.lineNumber;this.linesFromJsCoverage=A.linesFromJsCoverage;this.beautify=A.beautify||this.lineNumber===undefined;this.highLightCode=A.highLightCode===false?false:true;this.matchedComments=[];this.matchedStrings=[]};Test.CodeHighLighter.prototype.regExps={strings:/"([^\\"\n]|\\.)*"|'([^\\'\n]|\\.)*'|"([^\\"\n]|\\\n)*"|'([^\\'\n]|\\\n)*'/gm,comments:/\/\/.*$|\/\*[\s\S]*?\*\//gm,operators:/([\+\-\*\/=\?!]{1,3}|[\-\+]{1,2})/g,numbers:/\b([0-9]+)\b/g,keywords:[/\b(break)\b/g,/\b(case)\b/g,/\b(catch)\b/g,/\b(continue)\b/g,/\b(default)\b/g,/\b(delete)\b/g,/\b(do)\b/g,/\b(else)\b/g,/\b(false)\b/g,/\b(for)\b/g,/\b(function)\b/g,/\b(if)\b/g,/\b(in)\b/g,/\b(instanceof)\b/g,/\b(new)\b/g,/\b(null)\b/g,/\b(return)\b/g,/\b(switch)\b/g,/\b(this)\b/g,/\b(throw)\b/g,/\b(true)\b/g,/\b(try)\b/g,/\b(typeof)\b/g,/\b(var)\b/g,/\b(while)\b/g,/\b(with)\b/g],commasInsideParenthesis:/\(([^\(\)\{\}])+\)/g,arrayWithOneElement:/\[\n([^,\]]*)\n\]/g,commaBracket:/,\n\s*\{/g,multipleWhiteSpaces:/(\s+)/g,semiColon:/;/g,comma:/,/g,openedBrackets:/([\{\[])/g,closedBrackets:/([\}\]])/g,emptyObject:/\{\n\s*\n\}/g,openedBracketsWithNewLine:/[\{\[]$/g,closedBracketsWithNewLine:/^\s*[\}\]]/g,unwantedNewLines:/\n([\n,;\)])/g,newLine:/\n/g,firstSpaces:/^(\s)+/};Test.CodeHighLighter.prototype.matchObjects=function(D,A,C,B){C.push({origValue:D,value:'<span class="jsHl'+B+'">'+jasmine.util.htmlEscape(D).replace("$","$\b")+"</span>",start:A,end:A+D.length})};Test.CodeHighLighter.prototype.isInside=function(B,D){var G=B.start,A=B.end,F=D.length,E,C;for(C=0;C<F;C++){E=D[C];if(E.start<G&&G<E.end){return true}}return false};Test.CodeHighLighter.prototype.fixOverlaps=function(E,F,B){var A=[],G=E.length,C,D;for(D=0;D<G;D++){C=E[D];if(!this.isInside(C,F)){this.source=this.source.replace(C.origValue,B);A.push(C)}}return A};Test.CodeHighLighter.prototype.saveStringsAndComments=function(){var C=this.regExps.comments,B=this.regExps.strings,A;while((A=C.exec(this.source))){this.matchObjects(A[0],A.index,this.matchedComments,"Comment")}while((A=B.exec(this.source))){this.matchObjects(A[0],A.index,this.matchedStrings,"String")}this.matchedComments=this.fixOverlaps(this.matchedComments,this.matchedStrings,"%%%%comment%%%%");this.matchedStrings=this.fixOverlaps(this.matchedStrings,this.matchedComments,"%%%%string%%%%")};Test.CodeHighLighter.prototype.processStringsAndComments=function(){var D=this.matchedComments,B=D?D.length:0,C,A;for(A=0;A<B;A++){C=D[A].value;this.source=this.source.replace("%%%%comment%%%%",C)}D=this.matchedStrings;B=D?D.length:0;for(A=0;A<B;A++){C=D[A].value;this.source=this.source.replace("%%%%string%%%%",C)}};Test.CodeHighLighter.prototype.processOperatorsNumbersKeywords=function(){var A=this.regExps,C=A.keywords,D=C.length,B;this.source=jasmine.util.htmlEscape(this.source).replace(A.operators,'<span class="jsHlOperator">$1</span>').replace(A.numbers,'<span class="jsHlNumber">$1</span>');for(B=0;B<D;B++){this.source=this.source.replace(C[B],'<span class="jsHlKeyword">$1</span>')}};Test.CodeHighLighter.prototype.process=function(){this.saveStringsAndComments();if(this.beautify){this.prepareIndent();this.doIndent()}this.processOperatorsNumbersKeywords();this.processStringsAndComments();return this.source};Test.CodeHighLighter.prototype.renderJsSources=function(){var J="No code found.",C=this.linesFromJsCoverage,E=this.lineNumber,A=this.source,H,I,F,D,B,G;if(A){A=this.highLightCode?this.process():A;H=A.split("\n");B=H.length;J='<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="lineNumbers">';for(F=0;F<B;F++){D="";G="";if(E){D=F===(E-1)?" error":""}if(C){G=!isNaN(C[F+1])?" lineNumberGreen":"";G=C[F+1]===0?" lineNumberRed":G}J+='<div class="lineNumber'+D+G+'">'+(F+1)+"</div>"}J+='</td><td><pre class="code">'+A+"</pre></td></tr></tbody></table>"}this.source=J;return this.source};Test.CodeHighLighter.prototype.prepareIndent=function(){var B=this.regExps,E,D,C,A;this.source=this.source.replace(B.multipleWhiteSpaces," ").replace(B.semiColon,";\n").replace(B.comma,",\n").replace(B.openedBrackets,"$1\n").replace(B.closedBrackets,"\n$1\n");E=this.source.match(B.commasInsideParenthesis);D=E?E.length:0;for(C=0;C<D;C++){A=E[C];this.source=this.source.replace(A,A.replace(B.newLine,""))}this.source=this.source.replace(B.arrayWithOneElement,"[$1]").replace(B.emptyObject,"{}").replace(B.commaBracket,", {").replace(B.unwantedNewLines,"$1")};Test.CodeHighLighter.prototype.addWhiteSpaces=function(C){var A="",B;for(B=0;B<C;B++){A+=" "}return A};Test.CodeHighLighter.prototype.doIndent=function(){var B=this.regExps,F=[],A=0,D=this.source.split("\n"),G=D.length,C="",H,E;for(E=0;E<G;E++){H=D[E].replace(B.firstSpaces,"");if(H!==""){if(H.search(B.closedBracketsWithNewLine)!==-1){A=Math.max(A-4,0);C=this.addWhiteSpaces(A)}F.push(C+H);if(H.search(B.openedBracketsWithNewLine)!==-1){A+=4;C=this.addWhiteSpaces(A)}}}this.source=F.join("\n")};Test.BadGlobalsImpl=function(A){this.results=[]};Test.BadGlobalsImpl.prototype.setup=function(){var A=this,C=Test.SandBox.getWin(),B;C.addGlobal=function(){A.addGlobal.apply(A,arguments)};A.allowedGlobals={};for(B in C){A.allowedGlobals[B]=true}A.allowedGlobals._firebug=true;A.allowedGlobals._createFirebugConsole=true;A.allowedGlobals.loadFirebugConsole=true;A.allowedGlobals.console=true};Test.BadGlobalsImpl.prototype.report=function(G,B){var A=this.allowedGlobals,F=Test.SandBox.getWin(),E,C,D;for(E in F){if(!A[E]){D=jasmine.pp(F[E]);C=">> Bad global variable found in "+(B?B.description:"global scope")+"<br/>"+E+" = "+D;G.log(C,"warning");this.results[E]={where:(B?("in suite"+B.description):"global scope"),value:D};A[E]=true}}};Test.BadGlobalsImpl.prototype.addGlobal=function(A){this.allowedGlobals[A]=true};if(!jasmine.browser.isIE&&!jasmine.browser.isOpera){Test.BadGlobals=new Test.BadGlobalsImpl()}Test.jsCoverage={executed:0,coverage:{},isEnabled:function(){return !!Test.SandBox.getWin()._$jscoverage},getCoverage:function(){return this.coverage},getSandBoxCoverage:function(){return Test.SandBox.getWin()._$jscoverage},add:function(C){var F=this.getSandBoxCoverage(),A,B,E,D;if(!F){return }A=this.getFileName(C.coverageFile);B=F[A];if(F&&B){for(E in B){if(!B.hasOwnProperty(E)){continue}D=B[E]}}},getFileName:function(A){var C=this.getSandBoxCoverage(),B;if(!C||!A){return }if(C[A]){return A}for(B in C){if(B.search(A)!==-1){return B}}},update:function(E){var H=this.getSandBoxCoverage(),B=0,D=0,G,F,A,C;if(!H){return }A=this.getFileName(E.coverageFile);C=H[A];if(C){E.jscoverage={file:[]};for(G in C){if(!C.hasOwnProperty(G)){continue}F=C[G];E.jscoverage.file[G]=F;if(!isNaN(G)&&F!==undefined){B=B+1;if(F!==0){this.executed=this.executed+1;D=D+1}}}E.jscoverage.percentage=((D/B)*100).toFixed(2);E.jscoverage.statements=B;E.jscoverage.executed=D;this.coverage[A]=E.jscoverage.file;this.coverage[A].percentage=E.jscoverage.percentage;this.coverage[A].statements=E.jscoverage.statements;this.coverage[A].executed=E.jscoverage.executed}},getSuiteCoverage:function(A){if(A.jscoverage){return" - Code coverage: "+A.jscoverage.percentage+"%"}return""},getTotal:function(){if(this.percentage){return" - Code coverage: "+this.percentage+"%"}return""},updateTotal:function(){var H=this.getSandBoxCoverage(),D=0,B,A,E,G,I,F,C;if(!H){return""}for(A in H){if(!H.hasOwnProperty(A)){continue}B=H[A];I=0;F=0;C=!this.coverage[A];if(C){this.coverage[A]=[]}for(G in B){if(!B.hasOwnProperty(G)){continue}E=B[G];if(!isNaN(G)){if(E!==undefined){D=D+1;I=I+1}if(C){this.coverage[A][G]=0}}}if(C){this.coverage[A].source=B.source;this.coverage[A].statements=I;this.coverage[A].executed=F;this.coverage[A].percentage=((F/I)*100).toFixed(2)}}this.statements=D;this.percentage=((this.executed/D)*100).toFixed(2)}};Test.panel={};Test.panel.Blocks=function(C){var H=C.spec.queue.blocks,F=H.length,A="panel blocks",E=[],D,G,B;for(D=0;D<F;D++){G=H[D];if(G.func){E.push({cls:"blockTitle "+(G.func.typeName||"specSources"),html:G.func.typeName||'it("'+jasmine.util.htmlEscape(C.spec.description)+'")'});B=new Test.CodeHighLighter({source:G.func.toString()});E.push({cls:"sources",html:B.renderJsSources()})}}this.el=new jasmine.Dom({cls:A,children:E});return this};Test.panel.Blocks.prototype.remove=function(){this.el.parentNode.removeChild(this.el)};Test.panel.Sandbox=function(A){this.persist=true;this.render();return this};Test.panel.Sandbox.prototype.render=function(){this.el=new jasmine.Dom({cls:"panel sandbox"})};Test.panel.Infos=function(){this.el=new jasmine.Dom({tag:"div",cls:"panel infos",children:[{cls:"logs"}]});this.logs=this.el.childNodes[0];this.persist=true;return this};Test.panel.Infos.prototype.log=function(C,A){var B=this.logs.appendChild(new jasmine.Dom({cls:"infoMessage",html:C}));if(A){jasmine.Dom.addCls(B,A)}};Test.panel.jsCoverage=function(A){this.el=new jasmine.Dom({tag:"div",cls:"panel jsCoverage",children:[{cls:"sources",html:new Test.CodeHighLighter({source:A.suite.jscoverage.file.source.join("\n"),linesFromJsCoverage:A.suite.jscoverage.file,highLightCode:false}).renderJsSources()}]});return this};Test.panel.jsCoverage.prototype.remove=function(){this.el.parentNode.removeChild(this.el)};Test.panel.jsCoverageSummary=function(A){var B=this;B.el=new jasmine.Dom({tag:"div",cls:"panel jsCoverageSummary hideMe",onclick:function(){B.onClick.apply(B,arguments)},children:[{cls:"sbody"}]});B.body=B.el.childNodes[0];B.persist=true;this.renderSummary();return B};Test.panel.jsCoverageSummary.prototype.renderSummary=function(){var C=Test.jsCoverage.getCoverage(),B,A;if(!this.summary){A='<table class="summary" border="0" cellpadding="0" cellspacing="0"><tbody>';A+='<tr class="line header"><td class="fileName">File</td><td class="statements">Statements</td><td class="executed">Executed</td><td class="percentage">Percentage</td></tr>';A+='<tr class="line total">';A+='<td class="fileName">Total</td>';A+='<td class="statements">'+Test.jsCoverage.statements+"</td>";A+='<td class="executed">'+Test.jsCoverage.executed+"</td>";A+='<td class="percentage">'+this.renderPercentage(Test.jsCoverage.percentage)+"</td>";A+="</tr>";for(B in C){if(!C.hasOwnProperty(B)){continue}A+='<tr class="line">';A+='<td class="fileName"><a>'+B+"</a></td>";A+='<td class="statements">'+C[B].statements+"</td>";A+='<td class="executed">'+C[B].executed+"</td>";A+='<td class="percentage">'+this.renderPercentage(C[B].percentage)+"</td>";A+="</tr>"}A+="</tbody></table>";this.summary=A}this.body.innerHTML=this.summary};Test.panel.jsCoverageSummary.prototype.renderPercentage=function(B){var A=B+'%<div class="limit" style="width:300px;">';A+='<div class="result" style="width:'+3*B+'px;"></div>';A+="</div>";return A};Test.panel.jsCoverageSummary.prototype.onClick=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(A.tagName==="A"){this.renderSource(Test.jsCoverage.getCoverage()[A.innerHTML])}if(jasmine.Dom.hasCls(A,"back")){this.renderSummary()}};Test.panel.jsCoverageSummary.prototype.renderSource=function(A){this.body.innerHTML="";this.body.appendChild(new jasmine.Dom({cls:"back",html:"Back"}));this.body.appendChild(new jasmine.Dom({cls:"sources",html:new Test.CodeHighLighter({source:A.source.join("\n"),linesFromJsCoverage:A,highLightCode:false}).renderJsSources()}))};Test.panel.StackTrace=function(D){this.spec=D.spec;this.badLinesEls=[];var G=this.spec.results().getItems(),F=G.length,A,C,B,E;if(jasmine.browser.isIE||!this.spec.hasError){return this}for(E=0;E<F;E++){A=G[E];if(A.type=="expect"&&A.passed&&!A.passed()){if(A.error){C=A.error;break}}}if(C){B=this.extractStackTrace(C);this.el=new jasmine.Dom({tag:"div",cls:"panel stackTrace",children:this.renderStackLines(B)})}return this};Test.panel.StackTrace.prototype.extractStackTrace=function(G){var H=G.stack||G.stackTrace,E=[],I,J,A,F,D,C,B;if(H){I=H.split("\n");A=I.length;for(F=0;F<A;F++){J=I[F];if(J.search("jasmine.js")===-1){D=this.extractFileAndLine(J);if(D){E.push(D)}}}}else{C=G.sourceURL||G.fileName;B=G.line||G.lineNumber;if(C&&B){E.push({file:C,lineNumber:B})}}return E};Test.panel.StackTrace.prototype.extractRe=/((http:\/\/|file:\/\/\/).*\.js)[^:]*:(\d*)/;Test.panel.StackTrace.prototype.extractFileAndLine=function(B){var A=B.match(this.extractRe);if(!A){return null}return{file:A[1],lineNumber:A[3]}};Test.panel.StackTrace.prototype.renderStackLines=function(C){var F=[],H=C.length,G,B,E,D,A;for(E=0;E<H;E++){B=C[E];D=B.file;A=parseInt(B.lineNumber,0);G=new jasmine.Dom({cls:"stackTraceLine",children:[{cls:"fileName",html:"File: "+D+" (line "+A+")"},{cls:"sources",html:this.renderTraceFileSource(D,A)}]});this.badLinesEls.push({el:G.childNodes[1],line:A});F.push(G)}return F};Test.panel.StackTrace.prototype.getFile=function(A){var B;if(jasmine.browser.isIE||Test.Options.remote){return null}this.downloadedFiles=this.downloadedFiles||{};if(!this.downloadedFiles[A]){B=new XMLHttpRequest();if(!B){return null}B.open("GET",A+"?"+(new Date()).getTime(),false);B.send("");this.downloadedFiles[A]=B.responseText}return this.downloadedFiles[A]};Test.panel.StackTrace.prototype.jscoverageFileRe=/(http:\/\/|file:\/\/\/)[^\/]*/;Test.panel.StackTrace.prototype.renderTraceFileSource=function(E,A){var C=true,H,G,D,F,B;if(Test.SandBox.getWin()._$jscoverage){G=SandBox.getWin()._$jscoverage[E.replace(this.jscoverageFileRe,"")];if(G){C=false;H=G.source.join("\n");linesFromJsCoverage={};F=G.length;for(D=0;D<F;D++){B=G[D];if(B===0){linesFromJsCoverage[D-1]=true}}}}H=H||this.getFile(E);return new Test.CodeHighLighter({source:H,highLightCode:C,lineNumber:A}).renderJsSources()};Test.panel.StackTrace.prototype.afterRender=function(){var D=this.badLinesEls.length,G,F,B,A,E,C;for(A=0;A<D;A++){G=this.badLinesEls[A];B=G.el;E=16;C=B.clientHeight/E;B.scrollTop=Math.max(G.line-C/2,0)*E}this.badLinesEls=[]};Test.panel.StackTrace.prototype.remove=function(){this.el.parentNode.removeChild(this.el)};Test.panel.TabPanel=function(A){var B=this;B.options=Test.Options.get();B.spec=A.spec;B.container=A.container;B.el=new jasmine.Dom({cls:"tabpanel",onclick:function(){B.onTabPanelClick.apply(B,arguments)},children:[{cls:"toolBar"},{cls:"panels"}]});B.toolbar=B.el.childNodes[0];B.body=B.el.childNodes[1];B.children=[];B.tabs=[];B.container.appendChild(B.el);B.renderToolBar();B.add(new Test.panel.Sandbox({}));if(B.options.panel){B.activatePanel(B.options.panel)}return B};Test.panel.TabPanel.prototype.add=function(A){if(A.el){this.body.appendChild(A.el)}if(A.afterRender){A.afterRender()}this.children.push(A);if(A.afterRender){A.afterRender()}};Test.panel.TabPanel.prototype.addTab=function(A,B,D){var C=this.toolbar.appendChild(new jasmine.Dom({tag:"span",cls:"toolbarTab "+A,html:B}));this.tabs.push({el:C,persist:D})};Test.panel.TabPanel.prototype.activatePanel=function(A){var C=this.children,D=C.length,F=false,E,B;for(B=0;B<D;B++){E=C[B].el;jasmine.Dom.addCls(E,"hideMe");if(jasmine.Dom.hasCls(E,A)){jasmine.Dom.removeCls(E,"hideMe");if(C[B].persist&&A!=="jsCoverageSummary"){this.options.panel=A}else{delete this.options.panel}F=true}}if(F){return }if(this.spec){if(A==="blocks"){this.add(new Test.panel.Blocks({spec:this.spec}))}if(A==="stackTrace"){this.add(new Test.panel.StackTrace({spec:this.spec}))}}if(this.suite&&this.suite.jscoverage){if(A==="jsCoverage"){this.add(new Test.panel.jsCoverage({suite:this.suite}))}}};Test.panel.TabPanel.prototype.onTabPanelClick=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(jasmine.Dom.hasCls(A,"toolbarTab")){this.onTabClick(A)}};Test.panel.TabPanel.prototype.onTabClick=function(C){var E,A,D,F,B;jasmine.Dom.addCls(C,"selected");E=this.toolbar.childNodes;A=this.body.childNodes;D=E.length;for(B=0;B<D;B++){F=E[B];if(F!=C){jasmine.Dom.removeCls(F,"selected")}}this.activatePanel(C.className.split(" ")[1])};Test.panel.TabPanel.prototype.renderToolBar=function(){var A=this.spec,B=this.suite,C=this.toolbar;if(this.tabs.length===0){this.addTab("infos selected","Console",true);this.addTab("sandbox","Iframe",true)}else{jasmine.Dom.addCls(this.tabs[0].el,"selected")}if(A){this.addTab("blocks","Blocks");if(!jasmine.browser.isIE&&!jasmine.browser.isOpera&&this.spec.hasError){this.addTab("stackTrace","Stack Trace")}}if(B&&B.jscoverage){this.addTab("jsCoverage","Suite Coverage")}};Test.panel.TabPanel.prototype.resetToolBar=function(){var B=this.tabs,C=B.length,D,A;for(A=C-1;A>=0;A--){D=B[A];if(!D.persist){this.toolbar.removeChild(D.el);jasmine.array.remove(B,D)}jasmine.Dom.removeCls(D.el,"selected")}this.renderToolBar()};Test.panel.TabPanel.prototype.resetPanels=function(){var B=this.children,C=B.length,D,A;for(A=C-1;A>=0;A--){D=B[A];if(!D.persist){D.remove();jasmine.array.remove(B,D)}jasmine.Dom.addCls(D.el,"hideMe")}if(B[0]){jasmine.Dom.removeCls(B[0].el,"hideMe")}};Test.panel.TabPanel.prototype.setSpec=function(A){this.spec=A;delete this.suite;this.resetToolBar();this.resetPanels()};Test.panel.TabPanel.prototype.setSuite=function(A){this.suite=A;delete this.spec;this.resetToolBar();this.resetPanels()};Test.panel.TabPanel.prototype.resize=function(A){this.el.style.height=A+"px";this.body.style.height=A-40+"px"};Test.panel.TabPanel.prototype.addCoverageSummary=function(){this.addTab("jsCoverageSummary","Coverage Summary",true);this.add(new Test.panel.jsCoverageSummary({}))};Test.panel.TreeGrid=function(A){var B=this;B.options=Test.Options.get();B.el=document.body.appendChild(new jasmine.Dom({tag:"div",cls:"treegrid",ondblclick:function(D){B.onDoubleClick(D)},onmousedown:function(){B.onMouseDown.apply(B,arguments)},onmouseup:function(){B.onMouseUp.apply(B,arguments)},onmousemove:function(){B.onMouseMove.apply(B,arguments)},children:[{cls:"header",children:[{cls:"logo",html:"Sencha"},{cls:"headerBar",children:[{cls:"statusMessage",children:[{tag:"span",html:"&#160;"},{cls:"progressBar passed"},{cls:"progressBar"}]},{cls:"runActions",children:[{tag:"span",cls:"runLabel",html:"Run:"},{tag:"a",cls:"actionLink run-failed",html:"Failed",onclick:function(){Test.Options.runFailed.apply(B,arguments)}},{tag:"a",cls:"actionLink run-checked",html:"Checked",onclick:function(){Test.Options.reloadWindow()}},{tag:"a",cls:"actionLink run-all",html:"All",onclick:function(){Test.Options.reloadWindow(true)}}]}]},{cls:"toolBar",children:[{tag:"span",cls:"options",children:[Test.Options.renderCheckbox("showPassed","Show passed"),Test.Options.renderCheckbox("showDisabled","Show disabled"),Test.Options.renderCheckbox("collapseAll","Collapse all"),Test.Options.renderCheckbox("disableTryCatch","No Jasmine try/catch"),Test.Options.renderCheckbox("disableLeakChecks","Disable leak checks")]}]}]},{tag:"div",cls:"tbody",onclick:function(){B.onBodyClick.apply(B,arguments)}},{cls:"resizer",html:"&bull;&nbsp;&bull;&nbsp;&bull;&nbsp;&bull;&nbsp;&bull;&nbsp;&bull;"}]}));B.tabPanel=new Test.panel.TabPanel({container:B.el});Test.Options.check();B.header=B.el.childNodes[0];var C=B.header.childNodes[1];B.statusMessage=C.childNodes[0];B.progressBar=B.statusMessage.childNodes[1];B.toolBar=B.header.childNodes[2];B.body=B.el.childNodes[1];B.resizer=B.el.childNodes[2];B.suites={};B.specs={};B.suitesEls={};B.specsEls={};if(B.options.resizer){B.tabPanel.resize(parseInt(B.options.resizer,10))}B.resizeBody();window.onresize=function(){B.resizeBody()}};Test.panel.TreeGrid.prototype.addSuite=function(C){var I={},E=C.parentSuite,D=18,B=C.isDisabled()?"xdescribe :":"describe: ",G="noexpand",H,F;if(C.children_.length!==0){G=this.options.collapseAll?"expand":"collapse"}if(E){this.suitesEls[E.id]||this.addSuite(E);while(E){D+=18;E=E.parentSuite}}H=this.createRow(this.options.collapseAll&&C.parentSuite,C);for(F in this.options){if(!this.options.hasOwnProperty(F)){continue}I[F]=this.options[F]}I.suite=C.id;delete I.spec;this.suitesEls[C.id]=new jasmine.Dom({tag:"div",id:"suite-"+C.id,cls:"suite"+(C.isDisabled()?" disabled":"")+(D===18?" parent-suite":""),style:{"paddingLeft":D+"px"},children:[{cls:G},{tag:"span",cls:"description",html:B+C.description}]});H.appendChild(this.suitesEls[C.id]);var A=new jasmine.Dom({tag:"div"});A.style.clear="both";H.appendChild(A);this.suites[C.id]=C;return this.suitesEls[C.id]};Test.panel.TreeGrid.prototype.updateSuiteEl=function(A,C){var B=this.suitesEls[A.id].childNodes[1];jasmine.Dom.setHTML(B,B.innerHTML+C)};Test.panel.TreeGrid.prototype.addSpec=function(I){var L={},F=18,E=I.suite,H=I.time?" ("+I.time+"s)":"",K,D,B,G,J,A;if(I.isEnabled()){D="it ";B=I.results().passed()?"passed":"failed"}else{D="xit ";B="disabled"}if(E){this.suitesEls[E.id]||this.addSuite(E);while(E){F+=18;E=E.parentSuite}}K=this.createRow(this.options.collapseAll,I);for(G in this.options){if(this.options.hasOwnProperty(G)){L[G]=this.options[G]}}L.spec=I.id;delete L.suite;J={id:"spec-"+I.id,cls:"spec "+B,style:{"paddingLeft":F+"px"},children:[{cls:this.options.collapseAll?"expand":"collapse"},{tag:"span",cls:"description",html:D+I.description+H}]};A=this.renderSpecResults(I);if(this.options.collapseAll){A.style.display="none"}if(A.innerHTML===""){J.children[0].cls="noexpand"}J.children.push(A);J=new jasmine.Dom(J);this.specsEls[I.id]=J;this.specs[I.id]=I;K.appendChild(J);jasmine.Dom.addCls(K,B);var C=new jasmine.Dom({tag:"div"});C.style.clear="both";K.appendChild(C);if(A.scrollHeight>26){jasmine.Dom.addCls(K,"results-collapsed")}};Test.panel.TreeGrid.prototype.getSuite=function(A){return this.suites[parseInt(A,10)]};Test.panel.TreeGrid.prototype.getSpec=function(A){return this.specs[parseInt(A,10)]};Test.panel.TreeGrid.prototype.onBodyClick=function(D){D=D||window.event;var C=D.target||D.srcElement,A=C.className,B;if(A){if(jasmine.Dom.hasCls(C,"results-expander")){return }if(jasmine.Dom.hasCls(C,"collapse")){this.onCollapse(C);return }if(jasmine.Dom.hasCls(C,"expand")){this.onExpand(C);return }if(jasmine.Dom.hasCls(C,"select-checkbox")){this.onCheck(C);return }for(B=0;B<6;B++){if(A&&jasmine.Dom.hasCls(C,"row")){this.onRowClick(C);return }C=C.parentNode;if(!C){break}A=C.className}}};Test.panel.TreeGrid.prototype.onCheck=function(B){var A=B.parentNode.nextSibling,C;if(jasmine.Dom.hasCls(A,"spec")){C=parseInt(A.id.replace("spec-",""),10);if(B.checked){if(jasmine.array.indexOf(this.options.specs,C)===-1){this.options.specs.push(C)}}else{jasmine.array.remove(this.options.specs,C)}}else{C=parseInt(A.id.replace("suite-",""),10);if(B.checked){if(jasmine.array.indexOf(this.options.suites,C)===-1){this.options.suites.push(C)}}else{jasmine.array.remove(this.options.suites,C)}}};Test.panel.TreeGrid.prototype.getRow=function(A){if(!A.suite&&this.suitesEls[A.id]){return this.suitesEls[A.id].parentNode}else{if(this.specsEls[A.id]){return this.specsEls[A.id].parentNode}}};Test.panel.TreeGrid.prototype.onEachRow=function(G,D,B){var E=this,H=G.childNodes[1].id,F=function(K,N){var J=K.children_,I,O,M,L;if(J){M=J.length;for(I=0;I<M;I++){O=J[I];L=E.getRow(O);if(L){N.call(E,L,O);if(O.children_&&B!==false){F(O,N)}}}}},A,C;if(H.search("suite")!==-1){C=this.getSuite(H.replace("suite-",""));F(C,D)}else{A=this.getSpec(H.replace("spec-",""));F(A,D)}};Test.panel.TreeGrid.prototype.onCollapse=function(A){A=A.parentNode;jasmine.Dom.setCls(A.childNodes[0],"expand");if(jasmine.Dom.hasCls(A,"suite")){this.onEachRow(A.parentNode,function(F,E){var B=F.childNodes[1],C=B.childNodes[0],D=B.childNodes[2];F.style.display="none";if(jasmine.Dom.hasCls(C,"collapse")){jasmine.Dom.setCls(C,"expand")}if(E.suite){D.style.display="none"}})}else{A.childNodes[2].style.display="none"}};Test.panel.TreeGrid.prototype.onExpand=function(A){A=A.parentNode;jasmine.Dom.setCls(A.childNodes[0],"collapse");if(jasmine.Dom.hasCls(A,"suite")){this.onEachRow(A.parentNode,function(C,B){C.style.display="block"},false)}else{A.childNodes[2].style.display="block"}};Test.panel.TreeGrid.prototype.onRowClick=function(B){var D=B.parentNode.childNodes,C=D.length,E,A;for(A=0;A<C;A++){jasmine.Dom.removeCls(D[A],"selected")}jasmine.Dom.addCls(B,"row selected");E=B.childNodes[1].id;if(E.search("spec")!==-1){this.tabPanel.setSpec(this.getSpec(E.replace("spec-","")))}if(E.search("suite")!==-1){this.tabPanel.setSuite(this.getSuite(E.replace("suite-","")))}};Test.panel.TreeGrid.prototype.createRow=function(A,C){var B=this.body.appendChild(new jasmine.Dom({tag:"div",cls:"row",style:{display:A?"none":"block"},children:[{cls:"checkbox-col",children:[{tag:"input",cls:"select-checkbox",type:"checkbox"}]}]}));if(Test.Options.isChecked(C)){B.childNodes[0].childNodes[0].checked=true}return B};Test.panel.TreeGrid.prototype.onDoubleClick=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(jasmine.Dom.hasCls(A,"resizer")){if(B.preventDefault){B.preventDefault()}else{B.returnValue=false}this.options.resizer=0;this.tabPanel.el.style.height="0";this.resizeBody()}};Test.panel.TreeGrid.prototype.onMouseDown=function(B){var A;B=B||window.event;A=B.target||B.srcElement;if(jasmine.Dom.hasCls(A,"resizer")){if(B.preventDefault){B.preventDefault()}else{B.returnValue=false}this.pageY=B.pageY||B.clientY;this.startHeight=this.tabPanel.el.clientHeight;document.body.style.cursor="row-resize"}};Test.panel.TreeGrid.prototype.onMouseMove=function(B){var A,C;if(this.pageY){B=B||window.event;A=B.target||B.srcElement;C=Math.max(200,this.startHeight-((B.pageY||B.clientY)-this.pageY));C=Math.min(C,document.body.clientHeight-200);this.tabPanel.resize(C);this.options.resizer=C;this.resizeBody()}};Test.panel.TreeGrid.prototype.onMouseUp=function(A){document.body.style.cursor="auto";delete this.pageY};Test.panel.TreeGrid.prototype.getInnerHeight=function(){return(window.innerHeight||document.documentElement.clientHeight)-this.header.offsetTop*2};Test.panel.TreeGrid.prototype.resizeBody=function(){var A=this.getInnerHeight();A-=this.resizer.offsetHeight+this.tabPanel.el.offsetHeight+this.header.offsetHeight;A-=2;A=Math.max(30,A);this.body.style.height=A+"px"};Test.panel.TreeGrid.prototype.onExpanderClick=function(F,E){var D=E.target||E.srcElement,A="expander-collapse",C="results-expanded",B=jasmine.Dom.hasCls(D,A)?"removeCls":"addCls";jasmine.Dom[B](D,A);jasmine.Dom[B](F,C)};Test.panel.TreeGrid.prototype.renderSpecResults=function(B){var F=this,H=B.results().getItems(),E=H.length,G,D,A,C;G=new jasmine.Dom({cls:"results",children:[{cls:"results-expander expander-expand",onclick:function(I){I=I||window.event;F.onExpanderClick.apply(F,[G,I])}}]});for(C=0;C<E;C++){A=H[C];if(A.type==="expect"&&A.passed){if(!A.passed()){D=this.renderFailedResult(A)}else{D=this.renderPassedResult(A)}if(C===0){jasmine.Dom.addCls(D,"first")}G.appendChild(D);if(A.error){break}}}return G};Test.panel.TreeGrid.prototype.renderFailedResult=function(A){var C=A.message,B;B=[{cls:"prettyPrint",html:jasmine.util.htmlEscape(C)}];return new jasmine.Dom({cls:"resultMessage fail",children:B})};Test.panel.TreeGrid.prototype.renderPassedResult=function(A){var B=[{cls:"prettyPrint",html:"Actual: "+jasmine.pp(A.actual)+"\nExpected: "+jasmine.pp(A.expected)+"\nMatcher: "+A.matcherName+"."}];return new jasmine.Dom({cls:"resultMessage pass",children:B})};Test.panel.TreeGrid.prototype.getInfoPanel=function(){return this.tabPanel.children[0]};Test.panel.TreeGrid.prototype.log=function(B,A){};Test.panel.TreeGrid.prototype.setStatus=function(B,A){jasmine.Dom.setHTML(this.statusMessage.firstChild,B);if(A){jasmine.Dom.addCls(this.statusMessage,A)}document.body.scrollTop=0};Test.Reporter=function(A){A=A||{};this.options=Test.Options.get();this.runnedSpecsCount=0;this.failedSpecsCount=0;this.disabledSpecsCount=0;this.optionCheckBoxesEl={};this.treeGrid=new Test.panel.TreeGrid({})};Test.Reporter.prototype.reportRunnerStarting=function(A){this.runner=A;this.startedAt=new Date();if(Test.BadGlobals){Test.BadGlobals.setup()}this.logger=this.treeGrid;this.log(">> Started at "+this.startedAt.toString(),"info");if(!this.options.remote){this.log(">> Warning! Because you access TestReporter locally, stack trace report isn't available.","warning")}this.runner.filter(this.options.suites,this.options.specs);if(Test.BadGlobals){Test.BadGlobals.report(this.logger)}};Test.Reporter.prototype.reportRunnerResults=function(A){Test.jsCoverage.updateTotal();this.renderResults(A)};Test.Reporter.prototype.reportSuiteStarting=function(A){if(this.options.showTimings){A.startedAt=new Date()}if(Test.jsCoverage.isEnabled()){Test.jsCoverage.add(A)}};Test.Reporter.prototype.reportSuiteResults=function(B){var C=this.treeGrid?this.treeGrid.suitesEls[B.id]:undefined,A;if(B.isEnabled()){if(this.options.showTimings){B.time=(((new Date()).getTime()-B.startedAt.getTime())/1000).toFixed(3)}Test.jsCoverage.update(B);if(!B.parentSuite&&Test.BadGlobals){Test.BadGlobals.report(this.logger,B)}if(this.treeGrid&&this.options.showPassed&&!C){C=this.treeGrid.addSuite(B)}if(C){A=B.results().passed()?"passed":"failed";jasmine.Dom.addCls(C,A);jasmine.Dom.addCls(C.parentNode,A);if(Test.jsCoverage.isEnabled()){this.treeGrid.updateSuiteEl(B,Test.jsCoverage.getSuiteCoverage(B))}if(B.time){this.treeGrid.updateSuiteEl(B," ("+B.time+"s)")}}}else{if(this.treeGrid&&this.options.showDisabled&&!C){this.treeGrid.addSuite(B)}}};Test.Reporter.prototype.reportSpecStarting=function(A){this.currentSpec=A;if(A.isEnabled()){if(this.options.showTimings){A.startedAt=new Date()}this.treeGrid.setStatus("Running: "+jasmine.util.htmlEscape(A.getFullName()))}};Test.Reporter.prototype.reportSpecResults=function(B){var C,A;var G=this.treeGrid.progressBar;if(B.isEnabled()){if(this.options.showTimings){B.time=(((new Date()).getTime()-B.startedAt.getTime())/1000).toFixed(3)}C=B.results();A=C.passed()?"passed":"failed";if(A==="failed"){if(!this.failedSpecsCount++){G.className+=" failed"}}if((A==="failed"||this.options.showPassed)&&B.isEnabled()&&this.treeGrid){this.treeGrid.addSpec(B)}Test.SandBox.save(B);this.runnedSpecsCount=this.runnedSpecsCount+1}else{this.disabledSpecsCount=this.disabledSpecsCount+1;if(this.treeGrid&&this.options.showDisabled){this.treeGrid.addSpec(B)}}var F=B.env.totalSpecs;var D=--B.env.remainingSpecs;if(D){var E=Math.round((F-D)/F*1000)/10;G.style.width=E+"%"}else{G.style.display="none"}};Test.Reporter.prototype.renderResults=function(D){var A=(this.failedSpecsCount>0)?"failed":"passed",B,C;B=(new Date().getTime()-this.startedAt.getTime())/1000;C=this.runnedSpecsCount+" spec"+(this.runnedSpecsCount===1?"":"s")+" ran, "+this.failedSpecsCount+" failure"+(this.failedSpecsCount===1?"":"s")+" and "+this.disabledSpecsCount+" disabled";C+=" in "+B+"s";C+=Test.jsCoverage.getTotal()+".";if(this.treeGrid){if(Test.SandBox.getWin()._$jscoverage){this.treeGrid.tabPanel.addCoverageSummary()}this.treeGrid.setStatus(C,A)}this.log(">> Finished at "+new Date().toString(),"info")};Test.Reporter.prototype.log=function(){if(this.options.verbose||arguments.length===2){this.logger.log.apply(this.logger,arguments)}};Test.Reporter.prototype.getIframeContainer=function(){if(this.treeGrid){return this.treeGrid.tabPanel.children[0].el}return document.body}