describe("Ext.button.Button",function(){var F=Ext.button.Button.prototype,C;function E(I,J){jasmine.expectAriaAttr(C,I,J)}function A(I){jasmine.expectNoAriaAttr(C,I)}function H(I){jasmine.fireMouseEvent(C.el.dom,I||"click")}function G(){if(C){C.destroy()}C=null}function D(I){C=new Ext.button.Button(Ext.apply({text:"Button"},I));return C}function B(I){I=Ext.apply({renderTo:document.body},I);return D(I)}afterEach(G);it("should be isButton",function(){expect(F.isButton).toBeTruthy()});it("should not be hidden",function(){expect(F.hidden).toBeFalsy()});it("should not be disabled",function(){expect(F.disabled).toBeFalsy()});it("should not be pressed",function(){expect(F.pressed).toBeFalsy()});it("should not enableToggle",function(){expect(F.enableToggle).toBeFalsy()});it("should have a menuAlign",function(){expect(F.menuAlign).toEqual("tl-bl?")});it("should have a clickEvent",function(){expect(F.clickEvent).toEqual("click")});it("should handleMouseEvents",function(){expect(F.handleMouseEvents).toBeTruthy()});it("should have a tooltipType",function(){expect(F.tooltipType).toEqual("qtip")});it("should have a baseCls",function(){expect(F.baseCls).toEqual("x-btn")});it("should return a renderTpl",function(){expect(F.renderTpl).toBeDefined()});it("should have a scale",function(){expect(F.scale).toEqual("small")});it("should have a ui",function(){expect(F.ui).toEqual("default")});it("should have a arrowAlign",function(){expect(F.arrowAlign).toEqual("right")});describe("initComponent",function(){describe("toggleGroup",function(){it("if defined, it should enableToggle",function(){D({toggleGroup:"testgroup"});expect(C.enableToggle).toBeTruthy()})});describe("html config",function(){it("should use the html config if specified",function(){C=new Ext.button.Button({html:"Foo"});expect(C.text).toBe("Foo")});it("should give precedence to the text config if both are specified",function(){D({html:"Foo",text:"Bar"});expect(C.text).toBe("Bar")})})});describe("border",function(){it("should respect an explicit border cfg",function(){D({border:false});var I=new Ext.panel.Panel({items:C});expect(C.border).toBe(false);I.destroy()})});describe("setText",function(){it("should be able to set the text before rendering",function(){D({text:"Foo"});C.setText("Bar");C.render(Ext.getBody());expect(C.btnInnerEl.dom).hasHTML("Bar")});it("should set the text after rendering",function(){D({text:"Foo",renderTo:Ext.getBody()});C.setText("Bar");expect(C.btnInnerEl.dom).hasHTML("Bar")});it("should have a visible btnInnerEl if the text is empty and there is no icon",function(){D({renderTo:Ext.getBody(),text:""});expect(C.btnInnerEl.isVisible()).toBe(true)});it("should show the btnInnerEl if text is not empty",function(){D({renderTo:Ext.getBody(),icon:"resources/images/foo.gif",text:""});expect(C.btnInnerEl.isVisible()).toBe(false);C.setText("Bar");expect(C.btnInnerEl.dom).hasHTML("Bar");expect(C.btnInnerEl.isVisible()).toBe(true)});it("should hide the btnInnerEl if text is empty and there is an icon",function(){D({renderTo:Ext.getBody(),icon:"resources/images/foo.gif",text:"Foo"});expect(C.btnInnerEl.isVisible()).toBe(true);C.setText("");expect(C.btnInnerEl.isVisible()).toBe(false)});it("should not hide the btnInnerEl if text is emtpy and there is no icon",function(){D({renderTo:Ext.getBody(),text:"Foo"});expect(C.btnInnerEl.isVisible()).toBe(true);C.setText("");expect(C.btnInnerEl.isVisible()).toBe(true)});it("should render with a x-btn-text class on the btnEl when configured with text",function(){D({renderTo:Ext.getBody(),text:"Foo"});expect(C.btnEl).toHaveCls("x-btn-text")});it("should not render the x-btn-no-text class on the btnEl when configured with text",function(){D({renderTo:Ext.getBody(),text:"Foo"});expect(C.btnEl).not.toHaveCls("x-btn-no-text")});it("should not have a x-btn-text class on the btnEl when not configured with text",function(){D({renderTo:Ext.getBody(),text:""});expect(C.btnEl).not.toHaveCls("x-btn-text")});it("should have a x-btn-no-text class on the btnEl when not configured with text",function(){D({renderTo:Ext.getBody(),text:""});expect(C.btnEl).toHaveCls("x-btn-no-text")});it("should add the x-btn-text class and remove the x-btn-no-text class when setting the text",function(){D({renderTo:Ext.getBody(),text:""});C.setText("Foo");expect(C.btnEl).toHaveCls("x-btn-text");expect(C.btnEl).not.toHaveCls("x-btn-no-text")});it("should remove the x-btn-text class and add the x-btn-no-text class when setting empty text",function(){D({renderTo:Ext.getBody(),text:"Foo"});C.setText("");expect(C.btnEl).not.toHaveCls("x-btn-text");expect(C.btnEl).toHaveCls("x-btn-no-text")});it("should render a non breaking space when the text passed is empty",function(){D({text:"Foo",renderTo:Ext.getBody()});C.setText("");expect(C.btnInnerEl.dom.innerHTML.length).toBeGreaterThan(0)});it("should fire the textchange event",function(){var J,I,K;D({text:"Foo",renderTo:Ext.getBody()});C.on("textchange",function(M,L,N){J=M;I=L;K=N});C.setText("Bar");expect(J).toBe(C);expect(I).toBe("Foo");expect(K).toBe("Bar")});it("should not fire the textchange event if the text doesn't change",function(){var I=false;D({text:"Foo",renderTo:Ext.getBody()});C.on("textchange",function(){I=true});C.setText("Foo");expect(I).toBe(false)})});describe("setIcon",function(){var I="resources/images/foo.gif",J="resources/images/bar.gif";it("should be able to set the icon before rendering",function(){D({icon:I});C.setIcon(J);C.render(Ext.getBody());expect(C.btnIconEl.dom.style.backgroundImage.indexOf("bar")).toBeGreaterThan(-1)});it("should set the icon after rendering",function(){D({icon:I,renderTo:Ext.getBody()});C.setIcon(J);expect(C.btnIconEl.dom.style.backgroundImage.indexOf("bar")).toBeGreaterThan(-1)});it("should set the icon after rendering (no initial icon)",function(){D({renderTo:Ext.getBody()});expect(C.btnIconEl.isVisible()).toBe(false);C.setIcon(J);expect(C.btnIconEl.dom.style.backgroundImage.indexOf("bar")).toBeGreaterThan(-1);expect(C.btnIconEl.isVisible()).toBe(true)});it("should unset the icon after rendering",function(){D({icon:I,renderTo:Ext.getBody()});expect(C.btnIconEl.isVisible()).toBe(true);C.setIcon(null);expect(C.btnIconEl.dom.style.backgroundImage.indexOf("foo")).toBe(-1);expect(C.btnIconEl.isVisible()).toBe(false)});it("should fire the iconchange event",function(){var M,K,L;D({icon:I,renderTo:Ext.getBody()});C.on("iconchange",function(O,N,P){M=O;K=N;L=P});C.setIcon(J);expect(M).toBe(C);expect(K).toBe(I);expect(L).toBe(J)});it("should not fire the iconchange event if the icon doesn't change",function(){var K=false;D({icon:I,renderTo:Ext.getBody()});C.on("iconchange",function(){K=true});C.setIcon(I);expect(K).toBe(false)})});describe("setIconCls",function(){it("should be able to set the iconCls before rendering",function(){D({iconCls:"Foo"});C.setIconCls("Bar");C.render(Ext.getBody());expect(C.btnIconEl.hasCls("Bar")).toBe(true)});it("should set the iconCls after rendering",function(){D({iconCls:"Foo",renderTo:Ext.getBody()});C.setIconCls("Bar");expect(C.btnIconEl.hasCls("Bar")).toBe(true)});it("should set the iconCls after rendering (no initial iconCls)",function(){D({renderTo:Ext.getBody()});expect(C.btnIconEl.isVisible()).toBe(false);C.setIconCls("Bar");expect(C.btnIconEl.hasCls("Bar")).toBe(true);expect(C.btnIconEl.isVisible()).toBe(true)});it("should unset the iconCls after rendering",function(){D({iconCls:"Foo",renderTo:Ext.getBody()});expect(C.btnIconEl.isVisible()).toBe(true);C.setIconCls(null);expect(C.btnIconEl.hasCls("Foo")).toBe(false);expect(C.btnIconEl.isVisible()).toBe(false)});it("should fire the iconchange event",function(){var K,I,J;D({iconCls:"Foo",renderTo:Ext.getBody()});C.on("iconchange",function(M,L,N){K=M;I=L;J=N});C.setIconCls("Bar");expect(K).toBe(C);expect(I).toBe("Foo");expect(J).toBe("Bar")});it("should not fire the iconchange event if the iconCls doesn't change",function(){var I=false;D({iconCls:"Foo",renderTo:Ext.getBody()});C.on("iconchange",function(){I=true});C.setIconCls("Foo");expect(I).toBe(false)})});describe("setGlyph",function(){it("should be able to set the glyph before rendering",function(){D({glyph:65});C.setGlyph(66);C.render(Ext.getBody());expect(C.btnIconEl.dom.innerHTML).toBe("B")});it("should set the glyph after rendering",function(){D({glyph:65,renderTo:Ext.getBody()});C.setGlyph(66);expect(C.btnIconEl.dom.innerHTML).toBe("B")});it("should set the glyph after rendering (no initial glyph)",function(){D({renderTo:Ext.getBody()});expect(C.btnIconEl.isVisible()).toBe(false);C.setGlyph(66);expect(C.btnIconEl.dom.innerHTML).toBe("B");expect(C.btnIconEl.isVisible()).toBe(true)});it("should unset the glyph after rendering",function(){D({glyph:65,renderTo:Ext.getBody()});expect(C.btnIconEl.isVisible()).toBe(true);C.setGlyph(null);expect(C.btnIconEl.dom.innerHTML).toBe("");expect(C.btnIconEl.isVisible()).toBe(false)});it("should fire the glyphchange event",function(){var J,I,K;D({glyph:65,renderTo:Ext.getBody()});C.on("glyphchange",function(M,L,N){J=M;K=L;I=N});C.setGlyph(66);expect(J).toBe(C);expect(I).toBe(65);expect(K).toBe(66)})});describe("setting the url",function(){function J(M){expect(C.getEl().dom.href.indexOf(M)).toBeGreaterThan(-1)}function I(){expect(C.getEl().dom.href).toBe("")}var L="http://sencha.com",K="_blank";describe("setHref",function(){function M(){expect(C.getEl().dom.href).toBe("")}function N(O){expect(C.getEl().dom.target).toBe(O)}describe("before render",function(){it("should be able to set the href before rendered",function(){D({hrefTarget:K});C.setHref(L);C.render(Ext.getBody());J("sencha.com");N(K)});it("should overwrite a configured href",function(){D({href:"http://foo.com",hrefTarget:K});C.setHref(L);C.render(Ext.getBody());J("sencha.com");N(K)});it("should clear a configured href",function(){D({href:L,hrefTarget:K});C.setHref("");C.render(Ext.getBody());I();M()});it("should not set if configured disabled: true",function(){D({disabled:true});C.setHref("");C.render(Ext.getBody());I()})});describe("after render",function(){it("should set if no href is initially configured",function(){D({renderTo:Ext.getBody(),hrefTarget:K});C.setHref(L);J("sencha.com");N(K)});it("should overwrite a configured href",function(){D({renderTo:Ext.getBody(),href:"http://foo.com",hrefTarget:K});C.setHref(L);J("sencha.com");N(K)});it("should clear a configured href",function(){D({renderTo:Ext.getBody(),href:L,hrefTarget:K});C.setHref("");I();M()});it("should not set the href on the element if disabled",function(){D({renderTo:Ext.getBody(),hrefTarget:K,disabled:true});C.setHref(L);I();M()})})});describe("setParams",function(){function M(){var N=C.getEl().dom.href,O;if(N){O=N.split("?");if(O.length===2){return Ext.Object.fromQueryString(O[1])}}return{}}describe("before render",function(){it("should be able to set the params",function(){D({href:L});C.setParams({foo:1});C.render(Ext.getBody());expect(M()).toEqual({foo:"1"})});it("should overwrite configured params",function(){D({href:L,params:{foo:1}});C.setParams({bar:1});C.render(Ext.getBody());expect(M()).toEqual({bar:"1"})});it("should clear params",function(){D({href:L,params:{foo:1}});C.setParams(null);C.render(Ext.getBody());expect(M()).toEqual({})})});describe("after render",function(){it("should set if no params were configured",function(){D({renderTo:Ext.getBody(),href:L});C.setParams({foo:1});expect(M()).toEqual({foo:"1"})});it("should overwrite existing params",function(){D({renderTo:Ext.getBody(),href:L,params:{foo:1}});C.setParams({bar:1});expect(M()).toEqual({bar:"1"})});it("should clear params",function(){D({renderTo:Ext.getBody(),href:L,params:{foo:1}});C.setParams(null);expect(M()).toEqual({})})});describe("with href",function(){it("should set params if the button href is set later",function(){D({renderTo:Ext.getBody(),params:{foo:1}});expect(M()).toEqual({});C.setHref(L);expect(M()).toEqual({foo:"1"})});it("should not set params if the url is cleared",function(){D({renderTo:Ext.getBody(),href:L,params:{foo:1}});C.setHref(null);expect(M()).toEqual({})})});describe("baseParams",function(){it("should append any baseParams to the params",function(){D({renderTo:Ext.getBody(),href:L,params:{foo:1},baseParams:{bar:1}});expect(M()).toEqual({foo:"1",bar:"1"})});it("should should favour the params",function(){D({renderTo:Ext.getBody(),href:L,params:{foo:2},baseParams:{foo:1}});expect(M()).toEqual({foo:"2"})})})})});describe("getActionEl",function(){beforeEach(function(){D({renderTo:Ext.getBody()})});it("should return the el",function(){expect(C.getActionEl()).toEqual(C.el)})});describe("beforerender",function(){it("should cancel rendering if beforerender returns false",function(){var I=0;D({renderTo:Ext.getBody(),listeners:{beforerender:function(){I++;return false},render:function(){I+=2},afterrender:function(){I+=3}}});expect(I).toBe(1);expect(C.el).toBeUndefined();expect(C.rendered).toBeFalsy()});it("should be possible to set the iconCls within a beforerender listener",function(){D({renderTo:Ext.getBody(),listeners:{beforerender:function(I){I.setIconCls("my-icon")}}});expect(C.el.down(".my-icon")).toBeTruthy()});it("should be possible to set the text within a beforerender listener",function(){D({renderTo:Ext.getBody(),listeners:{beforerender:function(I){I.setText("text")}}});expect(C.btnInnerEl.dom.innerHTML).toBe("text")})});describe("menu",function(){it("should accept a menu configuration",function(){D({menu:{}});expect(C.menu.isMenu).toBe(true)});it("should destroy the menu on destroy",function(){var I=new Ext.menu.Menu();D({menu:I});C.destroy();expect(I.destroyed).toBe(true);I=null});it("should not destroy the menu with destroyMenu: false",function(){var I=new Ext.menu.Menu();D({destroyMenu:false,menu:I});C.destroy();expect(I.destroyed).toBeFalsy();I.destroy();I=null});it("should show menu on click",function(){var I;runs(function(){I=new Ext.menu.Menu({shadow:false,items:{text:"An item"}});D({renderTo:Ext.getBody(),menu:I});I.menuClickBuffer=1;H();expect(I.isVisible()).toBe(true);expect(I.containsFocus).toBeFalsy();H("mousedown");expect(I.isVisible()).toBe(false)});waits(5);runs(function(){jasmine.syncPressArrowKey(C,"down");expect(I.isVisible()).toBe(true)});waitsFor(function(){return I.containsFocus})});it("should not show menu on click if the menu is empty",function(){var I=new Ext.menu.Menu();D({renderTo:Ext.getBody(),menu:I});H();expect(I.isVisible()).toBe(false)});it("should show menu when showMenu is called, even if empty",function(){var I=new Ext.menu.Menu({shadow:false});D({renderTo:Ext.getBody(),menu:I});C.showMenu();expect(I.isVisible()).toBe(true)});it("should be able to access the owner during construction",function(){var I;Ext.define("spec.SubMenu",{extend:"Ext.menu.Menu",alias:"widget.submenu",initComponent:function(){I=this.getRefOwner();this.callParent()}});D({renderTo:Ext.getBody(),menu:{xtype:"submenu",items:[{text:"A"}]}});expect(I).toBe(C)});describe("scrolling along with its button",function(){var I,J;beforeEach(function(){D({xtype:"button",text:"Menu Button",y:300,menu:{items:[{text:"1"},{text:"2"}]}});J=C.menu;I=new Ext.container.Container({autoScroll:true,height:400,renderTo:document.body,items:[C,{xtype:"label",text:"The End.",y:2000}]});H()});it("should work scrolling downwards",function(){expect(J.getY()-C.getHeight()).toBe(C.getY());I.scrollable.scrollTo(0,200);waitsFor(function(){return(J.getY()-C.getHeight())===C.getY()});runs(function(){expect(J.getY()-C.getHeight()).toBe(C.getY());I=I.destroy()})});it("should work scrolling downwards",function(){expect(J.getY()-C.getHeight()).toBe(C.getY());I.scrollable.scrollTo(0,25);waitsFor(function(){return(J.getY()-C.getHeight())===C.getY()});runs(function(){expect(J.getY()-C.getHeight()).toBe(C.getY());I=I.destroy()})})});describe("when destroying its owner",function(){var I;beforeEach(function(){I=new Ext.menu.Menu();D({menu:I});C.destroy()});afterEach(function(){I=null});it("should work",function(){expect(I.destroyed).toBe(true)});it("should cleanup its menu reference",function(){expect(C.menu).toBe(null)})});describe("setMenu",function(){var K={defaultAlign:"c",menu:{items:[{text:"Level 2"}]}},J,I;beforeEach(function(){I=new Ext.menu.Menu({id:"lily"});J=new Ext.menu.Menu({id:"rupert"});D({menu:I,renderTo:Ext.getBody()})});afterEach(function(){Ext.destroy(I,J);I=J=null});describe("setting a menu",function(){it("should accept a menu component as an argument",function(){C.setMenu(J);expect(C.menu.isMenu).toBe(true);expect(C.menu).toBe(J)});it("should accept a menu config as an argument",function(){C.setMenu(K);expect(C.getMenu().isMenu).toBe(true);expect(C.getMenu().defaultAlign).toBe("c")});it("should accept a menu id as an argument",function(){C.setMenu("rupert",false);expect(C.menu).toBe(J)});it("should poke the split classes onto the btnWrap element when the new menu is set",function(){var L=new Ext.button.Button({renderTo:Ext.getBody()});L.setMenu(J);expect(L.btnWrap).toHaveCls("x-btn-arrow");expect(L.btnWrap).toHaveCls("x-btn-arrow-right");L.destroy();L=null})});describe("unsetting a menu",function(){it("should null out the button's menu property",function(){C.setMenu(null);expect(C.menu).toBe(null)});it("should remove the split classes on the btnWrap element when the menu is unset",function(){C.setMenu(null);expect(C.btnWrap).not.toHaveCls("x-btn-arrow");expect(C.btnWrap).not.toHaveCls("x-btn-arrow-right")})});describe("destroying previous set menu",function(){describe("when setting",function(){it("should destroy the previous set menu when setting the new one by default",function(){C.setMenu(J);expect(I.destroyed).toBe(true)});it("should not destroy the previous set menu when setting the new one when passing `false`",function(){C.setMenu(J,false);expect(I.destroyed).toBeFalsy()});it("should not destroy the previous set menu when destroyMenu instance property is `false`",function(){C.destroyMenu=false;C.setMenu(J);expect(I.destroyed).toBeFalsy()})});describe("when unsetting",function(){it("should destroy the current menu",function(){C.setMenu(null);expect(I.destroyed).toBe(true)});it("should not destroy the current menu if passed `false`",function(){C.setMenu(null,false);expect(I.destroyed).toBeFalsy()});it("should not destroy the previous set menu when destroyMenu instance property is `false`",function(){C.destroyMenu=false;C.setMenu(null);expect(I.destroyed).toBeFalsy()})})})});describe("ARIA attributes",function(){var I;beforeEach(function(){I=new Ext.menu.Menu({items:[{text:"foo"}]});D({renderTo:Ext.getBody(),menu:I})});describe("aria-haspopup",function(){it("should render attribute",function(){E("aria-haspopup","true")});it("should remove attribute when menu is removed",function(){C.setMenu(null);A("aria-haspopup")});it("should set attribute when menu is added",function(){C.setMenu(null);C.setMenu(I);E("aria-haspopup","true")})});describe("aria-owns",function(){it("should be set to menu id",function(){C.showMenu();E("aria-owns",I.id)});it("should be removed when menu is removed",function(){C.showMenu();C.hideMenu();C.setMenu(null);A("aria-owns")});it("should be set when menu is added",function(){C.setMenu(null);C.setMenu(I);E("aria-owns",I.id)})})});describe("keyboard interaction",function(){var I,J;beforeEach(function(){D({text:"foo",menu:[{text:"item1"}]});I=spyOn(C,"onEnterKey").andCallThrough();J=spyOn(C,"onDownKey").andCallThrough();C.render(Ext.getBody())});afterEach(function(){I=J=null});describe("Space key",function(){beforeEach(function(){jasmine.pressKey(C.el,"space");waitForSpy(I)});it("should open the menu",function(){expect(C.menu.isVisible()).toBe(true)});it("should stop the keydown event",function(){var K=I.mostRecentCall.args;expect(K[0].isStopped).toBeTruthy()});it("should return false to stop Event propagation loop",function(){expect(I.mostRecentCall.result).toBe(false)})});describe("Enter key",function(){beforeEach(function(){jasmine.pressKey(C.el,"enter");waitForSpy(I)});it("should open the menu",function(){expect(C.menu.isVisible()).toBe(true)});it("should stop the keydown event",function(){var K=I.mostRecentCall.args;expect(K[0].isStopped).toBeTruthy()});it("should return false to stop Event propagation loop",function(){expect(I.mostRecentCall.result).toBe(false)})});describe("Down arrow key",function(){beforeEach(function(){jasmine.pressKey(C.el,"down");waitForSpy(J)});it("should open the menu",function(){expect(C.menu.isVisible()).toBe(true)});it("should stop the keydown event",function(){var K=J.mostRecentCall.args;expect(K[0].isStopped).toBeTruthy()});it("should return false to stop Event propagation loop",function(){expect(J.mostRecentCall.result).toBe(false)})})})});describe("tooltip",function(){var I=Ext.tip.QuickTipManager;beforeEach(function(){I.init()});afterEach(function(){C.destroy();C=null});describe("configuring",function(){it("should set the qtip attribute",function(){D({tooltip:"Foo",renderTo:Ext.getBody()});expect(C.el.getAttribute("data-qtip")).toBe("Foo")});it("should set the title attribute",function(){D({tooltip:"Foo",tooltipType:"title",renderTo:Ext.getBody()});expect(C.el.getAttribute("title")).toBe("Foo")});it("should register with the tip manager",function(){var L=Ext.id(),J={html:"Foo"},K;spyOn(I,"register").andCallFake(function(M){K=M});D({id:L,tooltip:J,renderTo:Ext.getBody()});J.target=L;expect(K).toEqual(J)})});describe("before rendering",function(){it("should set the qtip attribute",function(){D();C.setTooltip("Foo");C.render(Ext.getBody());expect(C.el.getAttribute("data-qtip")).toBe("Foo")});it("should set the title attribute",function(){D({tooltipType:"title"});C.setTooltip("Foo");C.render(Ext.getBody());expect(C.el.getAttribute("title")).toBe("Foo")});it("should register with the tip manager",function(){var L=Ext.id(),J={html:"Foo"},K;spyOn(I,"register").andCallFake(function(M){K=M});D({id:L});J.target=L;C.setTooltip(J);C.render(Ext.getBody());expect(K).toEqual(J)})});describe("after rendering",function(){describe("setting the tip",function(){it("should set the qtip attribute",function(){D({renderTo:Ext.getBody()});C.setTooltip("Foo");expect(C.el.getAttribute("data-qtip")).toBe("Foo")});it("should set the title attribute",function(){D({renderTo:Ext.getBody(),tooltipType:"title"});C.setTooltip("Foo");expect(C.el.getAttribute("title")).toBe("Foo")});it("should register with the tip manager",function(){var J={html:"Foo"},K;spyOn(I,"register").andCallFake(function(L){K=L});D({renderTo:Ext.getBody()});J.target=C.id;C.setTooltip(J);expect(K).toEqual(J)})});describe("clearing the tip",function(){it("should set the qtip attribute",function(){D({tooltip:"Foo",renderTo:Ext.getBody()});C.setTooltip(null);expect(C.el.getAttribute("data-qtip")).toBeFalsy()});it("should set the title attribute",function(){D({tooltip:"Foo",renderTo:Ext.getBody(),tooltipType:"title"});C.setTooltip(null);expect(C.el.getAttribute("title")).toBeFalsy()});it("should unregister with the tip manager",function(){var J={html:"Foo"},K;spyOn(I,"unregister").andCallFake(function(L){K=L.id});D({tooltip:J,renderTo:Ext.getBody()});C.setTooltip(null);expect(K).toEqual(C.id)})});describe("destroying",function(){it("should clear the tip",function(){var J={html:"Foo"},K;spyOn(I,"unregister").andCallFake(function(L){K=L.id});D({tooltip:J,renderTo:Ext.getBody()});C.destroy();expect(K).toEqual(C.id)})})})});describe("handler/events",function(){var J;beforeEach(function(){J=jasmine.createSpy()});afterEach(function(){J=null});function I(K){D(Ext.apply({renderTo:Ext.getBody()},K))}describe("click event",function(){it("should fire the click event",function(){I();C.on("click",J);H();expect(J).toHaveBeenCalled()});it("should pass the button and the event object",function(){I();C.on("click",J);H();var K=J.mostRecentCall.args;expect(K[0]).toBe(C);expect(K[1] instanceof Ext.event.Event).toBe(true)})});describe("handler",function(){it("should call the handler fn",function(){I({handler:J});C.setHandler(J);H();expect(J).toHaveBeenCalled()});it("should pass the button and the event object",function(){I({handler:J});H();var K=J.mostRecentCall.args;expect(K[0]).toBe(C);expect(K[1] instanceof Ext.event.Event).toBe(true)});it("should default the scope to the button",function(){I({handler:J});H();expect(J.mostRecentCall.object).toBe(C)});it("should use the passed scope",function(){var K={};I({handler:J,scope:K});H();expect(J.mostRecentCall.object).toBe(K)});it("should be able to resolve to a View Controller",function(){I({handler:"doFoo",renderTo:null});var L=new Ext.app.ViewController();L.doFoo=J;var K=new Ext.container.Container({renderTo:Ext.getBody(),controller:L,items:C});H();expect(J).toHaveBeenCalled();K.destroy()});it("should not fire the handler if the click event returns false",function(){I({handler:J});C.on("click",function(){return false});H();expect(J).not.toHaveBeenCalled()});it("should not fire the handler if the click event destroys the button",function(){I({handler:J});C.on("click",function(){return C.destroy()});H();expect(J).not.toHaveBeenCalled()})})});describe("layout",function(){it("should be able to have a height of 0",function(){expect(function(){D({renderTo:Ext.getBody(),height:0})}).not.toThrow()});it("should be able to size larger after hitting a minWidth constraint",function(){D({renderTo:Ext.getBody(),minWidth:75,text:"Foo"});C.setText("Text that will stretch longer than 75px");expect(C.getWidth()).toBeGreaterThan(75)})});describe("menuAlign config",function(){var I="br-tl";it("should use default menuAlign if none is given",function(){D({floating:true,menu:{plain:true,items:[{text:"foo"},{text:"bar"}]}});expect(C.menuAlign).toBe(C.self.prototype.menuAlign)});it("should use menuAlign config if given",function(){D({floating:true,menuAlign:I,menu:{plain:true,items:[{text:"foo"},{text:"bar"}]},renderTo:Ext.getBody()});expect(C.menuAlign).toBe(I);expect(C.self.prototype.menuAlign).not.toBe(I)});it("should call alignTo() to position itself",function(){var J,K;D({menuAlign:I,menu:{plain:true,items:[{text:"foo"},{text:"bar"}]}});J=new Ext.Container({floating:true,items:C,renderTo:Ext.getBody()});K=C.menu;spyOn(K,"alignTo");H();expect(K.alignTo).toHaveBeenCalledWith(C.el,I,undefined);Ext.destroy(J);J=null})});if(!Ext.supports.CSS3BorderRadius){describe("frame",function(){it("should call the click listener on the wrapped table when the button is clicked",function(){D({frame:true,href:"/foo",renderTo:Ext.getBody(),xhooks:{frameTableListener:jasmine.createSpy("frameTableListener")}});C.frameTable.dom.click();expect(C.frameTableListener).toHaveBeenCalled()});it("should call NOT the navigate method when a disabled button is clicked",function(){D({frame:true,href:"/foo",disabled:true,renderTo:Ext.getBody()});spyOn(C,"doNavigate");C.frameTable.dom.click();expect(C.doNavigate).not.toHaveBeenCalled()});it("should append any params to the url",function(){spyOn(Ext.button.Button.prototype,"getHref").andCallFake(function(){return null});D({frame:true,href:"/foo",renderTo:Ext.getBody()});window.open=Ext.emptyFn;C.frameTable.dom.click();window.open=undefined;expect(C.getHref).toHaveBeenCalled()})})}describe("arrowVisible",function(){describe("initial value true",function(){var K="x-btn-arrow",I="x-btn-arrow-right",J="x-opera12m-btn-arrow-right";describe("with menu",function(){it("should render with arrowCls on the buttonWrap if arrowVisible is true",function(){D({renderTo:document.body,menu:[{text:"fake item"}]});expect(C.btnWrap).toHaveCls(K);expect(C.btnWrap).toHaveCls(I);if(Ext.isOpera12m){expect(C.el).toHaveCls(J)}});it("should hide and show the arrow",function(){D({renderTo:document.body,menu:[{text:"fake item"}]});C.setArrowVisible(false);expect(C.btnWrap).not.toHaveCls(K);expect(C.btnWrap).not.toHaveCls(I);if(Ext.isOpera12m){expect(C.el).not.toHaveCls(J)}C.setArrowVisible(true);expect(C.btnWrap).toHaveCls(K);expect(C.btnWrap).toHaveCls(I);if(Ext.isOpera12m){expect(C.el).toHaveCls(J)}});it("should not render with arrowCls on the buttonWrap if arrowVisible is false",function(){D({renderTo:document.body,menu:[{text:"fake item"}],arrowVisible:false});expect(C.btnWrap).not.toHaveCls(K);expect(C.btnWrap).not.toHaveCls(I);if(Ext.isOpera12m){expect(C.el).not.toHaveCls(J)}});it("should remove the arrowCls if the menu is subsequently removed",function(){D({renderTo:document.body,menu:[{text:"fake item"}]});C.setMenu(null);expect(C.btnWrap).not.toHaveCls(K);expect(C.btnWrap).not.toHaveCls(I);if(Ext.isOpera12m){expect(C.el).not.toHaveCls(J)}})});describe("without menu",function(){it("should not render with arrowCls on the buttonWrap",function(){D({renderTo:document.body});expect(C.btnWrap).not.toHaveCls(K);expect(C.btnWrap).not.toHaveCls(I);if(Ext.isOpera12m){expect(C.el).not.toHaveCls(J)}});it("should not show the arrow",function(){D({renderTo:document.body});C.setArrowVisible(true);expect(C.btnWrap).not.toHaveCls(K);expect(C.btnWrap).not.toHaveCls(I);if(Ext.isOpera12m){expect(C.el).not.toHaveCls(J)}});it("should add the arrowCls if a menu is subsequently added",function(){D({renderTo:document.body});C.setMenu([{text:"fake item"}]);expect(C.btnWrap).toHaveCls(K);expect(C.btnWrap).toHaveCls(I);if(Ext.isOpera12m){expect(C.el).toHaveCls(J)}});it("should not add the arrowCls if a menu is subsequently added, if arrowVisible is false",function(){D({renderTo:document.body,arrowVisible:false});C.setMenu([{text:"fake item"}]);expect(C.btnWrap).not.toHaveCls(K);expect(C.btnWrap).not.toHaveCls(I);if(Ext.isOpera12m){expect(C.el).not.toHaveCls(J)}})})})});describe("dynamic iconAlign",function(){it("should set the iconAlign dynamically after render",function(){D({renderTo:document.body,iconCls:"foo",text:"Icon Align"});var J=C.btnEl,I=C.btnIconEl,K=C.btnInnerEl;expect(J.first()).toBe(I);expect(J.last()).toBe(K);expect(J).toHaveCls("x-btn-icon-left");expect(J).not.toHaveCls("x-btn-icon-top");expect(J).not.toHaveCls("x-btn-icon-right");expect(J).not.toHaveCls("x-btn-icon-bottom");C.setIconAlign("right");expect(J.first()).toBe(K);expect(J.last()).toBe(I);expect(J).toHaveCls("x-btn-icon-right");expect(J).not.toHaveCls("x-btn-icon-top");expect(J).not.toHaveCls("x-btn-icon-left");expect(J).not.toHaveCls("x-btn-icon-bottom");C.setIconAlign("top");expect(J.first()).toBe(I);expect(J.last()).toBe(K);expect(J).toHaveCls("x-btn-icon-top");expect(J).not.toHaveCls("x-btn-icon-right");expect(J).not.toHaveCls("x-btn-icon-left");expect(J).not.toHaveCls("x-btn-icon-bottom");C.setIconAlign("bottom");expect(J.first()).toBe(K);expect(J.last()).toBe(I);expect(J).toHaveCls("x-btn-icon-bottom");expect(J).not.toHaveCls("x-btn-icon-top");expect(J).not.toHaveCls("x-btn-icon-right");expect(J).not.toHaveCls("x-btn-icon-left");C.setIconAlign("left");expect(J.first()).toBe(I);expect(J.last()).toBe(K);expect(J).toHaveCls("x-btn-icon-left");expect(J).not.toHaveCls("x-btn-icon-top");expect(J).not.toHaveCls("x-btn-icon-right");expect(J).not.toHaveCls("x-btn-icon-bottom")})});describe("layout",function(){var J={1:"width",2:"height",3:"width and height"};function I(R,N){var Q=(R&1),K=(R&2);function P(S){Ext.util.CSS.createStyleSheet(".spec-icon{background-color:green;}","btnSpecStyleSheet");spyOn(Ext.log,"warn");C=Ext.create(Ext.apply({renderTo:document.body,xtype:"button",width:Q?null:100,height:K?null:100},S||{}))}function L(U,S){var T="";if(U){T+="width:"+U+"px;"}if(S){T+="height:"+S+"px;"}return'<div class="btn-text-content" style="'+T+'display:inline-block;background:red;">&nbsp;</div>'}function O(){var S=C.btnIconEl,T;if(Ext.isIE9m){expect(S.dom.currentStyle.backgroundPositionX).toBe("center");expect(S.dom.currentStyle.backgroundPositionY).toBe("center")}else{T=S.getStyle("background-position");expect(T==="50% 50%"||T==="50%").toBe(true)}}function M(T){if(!window.getComputedStyle){return }var S=window.getComputedStyle(C.btnWrap.dom,":after"),U=T.display;if(Ext.isOpera12m&&U==="table-row"){U="table-row-group"}if(U==="flex"){expect(S.display==="flex"||S.display==="-ms-flexbox"||S.display==="-webkit-box").toBe(true)}else{expect(S.display).toBe(U)}if(Ext.isWebKit){expect(S.width).toBe(T.width);expect(S.height).toBe(T.height)}}afterEach(function(){Ext.util.CSS.removeStyleSheet("btnSpecStyleSheet")});describe((R?("shrink wrap "+J[R]+(N?" - stretched height content":"")):"fixed width and height"),function(){describe("no icon or arrow",function(){function S(T){Ext.apply(T,{text:L(Q?86:20,N?94:null)});P(T)}it("should layout with textAlign:left",function(){S({textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:7,y:K?3:42,w:Q?86:20,h:N?94:16}})});it("should layout with textAlign:center",function(){S({textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:Q?7:40,y:K?3:42,w:Q?86:20,h:N?94:16}})});it("should layout with textAlign:right",function(){S({textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:Q?7:73,y:K?3:42,w:Q?86:20,h:N?94:16}})})});describe("with icon",function(){function S(T){var U=(T.iconAlign==="top"||T.iconAlign==="bottom");P(Ext.apply({iconCls:"spec-icon",text:L(Q?(U?86:70):20,N?(U?74:94):null)},T))}describe("iconAlign:top",function(){it("no text",function(){S({text:"",iconAlign:"top"});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?22:100},btnIconEl:{x:3,y:K?3:42,w:Q?16:94,h:16}});O()});it("textAlign:left",function(){S({textAlign:"left",iconAlign:"top"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:94,h:16},".btn-text-content":{x:7,y:K?23:52,w:Q?86:20,h:N?74:16}});O()});it("textAlign:center",function(){S({textAlign:"center",iconAlign:"top"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:94,h:16},".btn-text-content":{x:Q?7:40,y:K?23:52,w:Q?86:20,h:N?74:16}});O()});it("textAlign:right",function(){S({textAlign:"right",iconAlign:"top"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:94,h:16},".btn-text-content":{x:Q?7:73,y:K?23:52,w:Q?86:20,h:N?74:16}});O()})});describe("iconAlign:right",function(){it("no text",function(){S({text:"",iconAlign:"right"});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?22:100},btnIconEl:{x:Q?3:42,y:K?3:42,w:16,h:16}});O()});it("textAlign:left",function(){S({textAlign:"left",iconAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?81:31,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:7,y:K?3:42,w:Q?70:20,h:N?94:16}});O()});it("textAlign:center",function(){S({textAlign:"center",iconAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?81:56,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?7:32,y:K?3:42,w:Q?70:20,h:N?94:16}});O()});it("textAlign:right",function(){S({textAlign:"right",iconAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:81,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?7:57,y:K?3:42,w:Q?70:20,h:N?94:16}});O()})});describe("iconAlign:bottom",function(){it("no text",function(){S({text:"",iconAlign:"bottom"});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?22:100},btnIconEl:{x:3,y:K?3:42,w:Q?16:94,h:16}});O()});it("textAlign:left",function(){S({textAlign:"left",iconAlign:"bottom"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:94,h:16},".btn-text-content":{x:7,y:K?3:32,w:Q?86:20,h:N?74:16}});O()});it("textAlign:center",function(){S({textAlign:"center",iconAlign:"bottom"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:94,h:16},".btn-text-content":{x:Q?7:40,y:K?3:32,w:Q?86:20,h:N?74:16}});O()});it("textAlign:right",function(){S({textAlign:"right",iconAlign:"bottom"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:94,h:16},".btn-text-content":{x:Q?7:73,y:K?3:32,w:Q?86:20,h:N?74:16}});O()})});describe("iconAlign:left",function(){it("no text",function(){S({text:"",iconAlign:"left"});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?22:100},btnIconEl:{x:Q?3:42,y:K?3:42,w:16,h:16}});O()});it("textAlign:left",function(){S({textAlign:"left",iconAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:3,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:23,y:K?3:42,w:Q?70:20,h:N?94:16}});O()});it("textAlign:center",function(){S({textAlign:"center",iconAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?3:28,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?23:48,y:K?3:42,w:Q?70:20,h:N?94:16}});O()});it("textAlign:right",function(){S({textAlign:"right",iconAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?3:53,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?23:73,y:K?3:42,w:Q?70:20,h:N?94:16}});O()})})});describe("with arrow",function(){function S(T){P(Ext.apply({menu:[],text:L(Q?(T.arrowAlign==="bottom"?86:78):20,N?(T.arrowAlign==="bottom"?84:94):null)},T))}describe("arrowAlign:right",function(){it("textAlign:left",function(){S({arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:7,y:K?3:42,w:Q?78:20,h:N?94:16}});M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})});it("textAlign:center",function(){S({arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:Q?7:36,y:K?3:42,w:Q?78:20,h:N?94:16}});M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})});it("textAlign:right",function(){S({arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:Q?7:65,y:K?3:42,w:Q?78:20,h:N?94:16}});M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})})});describe("arrowAlign:bottom",function(){it("textAlign:left",function(){S({arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},".btn-text-content":{x:7,y:K?3:37,w:Q?86:20,h:N?84:16}});M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:center",function(){S({arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},".btn-text-content":{x:Q?7:40,y:K?3:37,w:Q?86:20,h:N?84:16}});M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:right",function(){S({arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},".btn-text-content":{x:Q?7:73,y:K?3:37,w:Q?86:20,h:N?84:16}});M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})})})});describe("with split arrow",function(){function S(T){P(Ext.apply({xtype:"splitbutton",text:L(Q?(T.arrowAlign==="bottom"?86:72):20,N?(T.arrowAlign==="bottom"?78:94):null)},T))}describe("arrowAlign:right",function(){it("textAlign:left",function(){S({arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:7,y:K?3:42,w:Q?72:20,h:N?94:16}});M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})});it("textAlign:center",function(){S({arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:Q?7:33,y:K?3:42,w:Q?72:20,h:N?94:16}});M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})});it("textAlign:right",function(){S({arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},".btn-text-content":{x:Q?7:59,y:K?3:42,w:Q?72:20,h:N?94:16}});M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})})});describe("arrowAlign:bottom",function(){it("textAlign:left",function(){S({arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},".btn-text-content":{x:7,y:K?3:34,w:Q?86:20,h:N?78:16}});M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:center",function(){S({arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},".btn-text-content":{x:Q?7:40,y:K?3:34,w:Q?86:20,h:N?78:16}});M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:right",function(){S({arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},".btn-text-content":{x:Q?7:73,y:K?3:34,w:Q?86:20,h:N?78:16}});M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})})})});describe("with icon and arrow",function(){function S(U){var T=U.iconAlign,V=U.arrowAlign==="bottom",X,W;if(T==="top"||T==="bottom"){X=V?86:78;W=V?64:74}else{if(T==="right"){X=V?70:58;W=V?84:94}else{if(T==="left"){X=V?70:62;W=V?84:94}}}P(Ext.apply({iconCls:"spec-icon",menu:[],text:L(Q?X:20,N?W:null)},U))}describe("iconAlign:top",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"top",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?34:100,h:K?22:100},btnIconEl:{x:3,y:K?3:42,w:Q?16:82,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"top",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:86,h:16},".btn-text-content":{x:7,y:K?23:52,w:Q?78:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"36px":"94px"})});it("textAlign:center",function(){S({iconAlign:"top",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:86,h:16},".btn-text-content":{x:Q?7:36,y:K?23:52,w:Q?78:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"36px":"94px"})});it("textAlign:right",function(){S({iconAlign:"top",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:86,h:16},".btn-text-content":{x:Q?7:65,y:K?23:52,w:Q?78:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"36px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"top",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?32:100},btnIconEl:{x:3,y:K?3:37,w:Q?16:94,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"8px"})});it("textAlign:left",function(){S({iconAlign:"top",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?52:100},btnIconEl:{x:3,y:K?3:27,w:94,h:16},".btn-text-content":{x:7,y:K?23:47,w:Q?86:20,h:N?64:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:center",function(){S({iconAlign:"top",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?52:100},btnIconEl:{x:3,y:K?3:27,w:94,h:16},".btn-text-content":{x:Q?7:40,y:K?23:47,w:Q?86:20,h:N?64:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:right",function(){S({iconAlign:"top",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?52:100},btnIconEl:{x:3,y:K?3:27,w:94,h:16},".btn-text-content":{x:Q?7:73,y:K?23:47,w:Q?86:20,h:N?64:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})})})});describe("iconAlign:right",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"right",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?34:100,h:K?22:100},btnIconEl:{x:Q?3:36,y:K?3:42,w:16,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"right",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?69:31,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:7,y:K?3:42,w:Q?58:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})});it("textAlign:center",function(){S({iconAlign:"right",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?69:50,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?7:26,y:K?3:42,w:Q?58:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})});it("textAlign:right",function(){S({iconAlign:"right",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:69,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?7:45,y:K?3:42,w:Q?58:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"right",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?32:100},btnIconEl:{x:Q?3:42,y:K?3:37,w:16,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"8px"})});it("textAlign:left",function(){S({iconAlign:"right",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},btnIconEl:{x:Q?81:31,y:(K&&!N)?3:37,w:16,h:16},".btn-text-content":{x:7,y:K?3:37,w:Q?70:20,h:N?84:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:center",function(){S({iconAlign:"right",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},btnIconEl:{x:Q?81:56,y:(K&&!N)?3:37,w:16,h:16},".btn-text-content":{x:Q?7:32,y:K?3:37,w:Q?70:20,h:N?84:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:right",function(){S({iconAlign:"right",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},btnIconEl:{x:81,y:(K&&!N)?3:37,w:16,h:16},".btn-text-content":{x:Q?7:57,y:K?3:37,w:Q?70:20,h:N?84:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})})})});describe("iconAlign:bottom",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"bottom",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?34:100,h:K?22:100},btnIconEl:{x:3,y:K?3:42,w:Q?16:82,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"bottom",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:86,h:16},".btn-text-content":{x:7,y:(K||N)?3:32,w:Q?78:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"36px":"94px"})});it("textAlign:center",function(){S({iconAlign:"bottom",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:86,h:16},".btn-text-content":{x:Q?7:36,y:(K||N)?3:32,w:Q?78:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"36px":"94px"})});it("textAlign:right",function(){S({iconAlign:"bottom",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:86,h:16},".btn-text-content":{x:Q?7:65,y:(K||N)?3:32,w:Q?78:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"36px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"bottom",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?32:100},btnIconEl:{x:3,y:K?3:37,w:Q?16:94,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"8px"})});it("textAlign:left",function(){S({iconAlign:"bottom",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?52:100},btnIconEl:{x:3,y:K?(N?71:23):47,w:94,h:16},".btn-text-content":{x:7,y:(K||N)?3:27,w:Q?86:20,h:N?64:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:center",function(){S({iconAlign:"bottom",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?52:100},btnIconEl:{x:3,y:K?(N?71:23):47,w:94,h:16},".btn-text-content":{x:Q?7:40,y:(K||N)?3:27,w:Q?86:20,h:N?64:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:right",function(){S({iconAlign:"bottom",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?52:100},btnIconEl:{x:3,y:K?(N?71:23):47,w:94,h:16},".btn-text-content":{x:Q?7:73,y:(K||N)?3:27,w:Q?86:20,h:N?64:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})})})});describe("iconAlign:left",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"left",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?34:100,h:K?22:100},btnIconEl:{x:Q?3:36,y:K?3:42,w:16,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"left",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:3,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:23,y:K?3:42,w:Q?62:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})});it("textAlign:center",function(){S({iconAlign:"left",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?3:24,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?23:44,y:K?3:42,w:Q?62:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})});it("textAlign:right",function(){S({iconAlign:"left",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?3:45,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?23:65,y:K?3:42,w:Q?62:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"8px",height:(K&&!N)?"16px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"left",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?32:100},btnIconEl:{x:Q?3:42,y:K?3:37,w:16,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"8px"})});it("textAlign:left",function(){S({iconAlign:"left",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},btnIconEl:{x:3,y:(K&&!N)?3:37,w:16,h:16},".btn-text-content":{x:23,y:K?3:37,w:Q?70:20,h:N?84:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:center",function(){S({iconAlign:"left",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},btnIconEl:{x:Q?3:28,y:(K&&!N)?3:37,w:16,h:16},".btn-text-content":{x:Q?23:48,y:K?3:37,w:Q?70:20,h:N?84:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})});it("textAlign:right",function(){S({iconAlign:"left",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?32:100},btnIconEl:{x:Q?3:53,y:(K&&!N)?3:37,w:16,h:16},".btn-text-content":{x:Q?23:73,y:K?3:37,w:Q?70:20,h:N?84:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"8px"})})})})});describe("with icon and split arrow",function(){function S(U){var T=U.iconAlign,V=U.arrowAlign==="bottom",X,W;if(T==="top"||T==="bottom"){X=V?86:72;W=V?58:74}else{if(T==="right"){X=V?70:52;W=V?78:94}else{if(T==="left"){X=V?70:56;W=V?78:94}}}P(Ext.apply({xtype:"splitbutton",iconCls:"spec-icon",text:L(Q?X:20,N?W:null)},U))}describe("iconAlign:top",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"top",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?40:100,h:K?22:100},btnIconEl:{x:3,y:K?3:42,w:Q?16:76,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"top",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:80,h:16},".btn-text-content":{x:7,y:K?23:52,w:Q?72:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"36px":"94px"})});it("textAlign:center",function(){S({iconAlign:"top",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:80,h:16},".btn-text-content":{x:Q?7:33,y:K?23:52,w:Q?72:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"36px":"94px"})});it("textAlign:right",function(){S({iconAlign:"top",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?3:32,w:80,h:16},".btn-text-content":{x:Q?7:59,y:K?23:52,w:Q?72:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"36px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"top",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?38:100},btnIconEl:{x:3,y:K?3:34,w:Q?16:94,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"14px"})});it("textAlign:left",function(){S({iconAlign:"top",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?58:100},btnIconEl:{x:3,y:K?3:24,w:94,h:16},".btn-text-content":{x:7,y:K?23:44,w:Q?86:20,h:N?58:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:center",function(){S({iconAlign:"top",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?58:100},btnIconEl:{x:3,y:K?3:24,w:94,h:16},".btn-text-content":{x:Q?7:40,y:K?23:44,w:Q?86:20,h:N?58:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:right",function(){S({iconAlign:"top",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?58:100},btnIconEl:{x:3,y:K?3:24,w:94,h:16},".btn-text-content":{x:Q?7:73,y:K?23:44,w:Q?86:20,h:N?58:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})})})});describe("iconAlign:right",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"right",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?40:100,h:K?22:100},btnIconEl:{x:Q?3:33,y:K?3:42,w:16,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"right",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?63:31,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:7,y:K?3:42,w:Q?52:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})});it("textAlign:center",function(){S({iconAlign:"right",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?63:47,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?7:23,y:K?3:42,w:Q?52:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})});it("textAlign:right",function(){S({iconAlign:"right",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:63,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?7:39,y:K?3:42,w:Q?52:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"right",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?38:100},btnIconEl:{x:Q?3:42,y:K?3:34,w:16,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"14px"})});it("textAlign:left",function(){S({iconAlign:"right",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},btnIconEl:{x:Q?81:31,y:(K&&!N)?3:34,w:16,h:16},".btn-text-content":{x:7,y:K?3:34,w:Q?70:20,h:N?78:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:center",function(){S({iconAlign:"right",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},btnIconEl:{x:Q?81:56,y:(K&&!N)?3:34,w:16,h:16},".btn-text-content":{x:Q?7:32,y:K?3:34,w:Q?70:20,h:N?78:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:right",function(){S({iconAlign:"right",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},btnIconEl:{x:81,y:(K&&!N)?3:34,w:16,h:16},".btn-text-content":{x:Q?7:57,y:K?3:34,w:Q?70:20,h:N?78:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})})})});describe("iconAlign:bottom",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"bottom",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?40:100,h:K?22:100},btnIconEl:{x:3,y:K?3:42,w:Q?16:76,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"bottom",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:80,h:16},".btn-text-content":{x:7,y:(K||N)?3:32,w:Q?72:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"36px":"94px"})});it("textAlign:center",function(){S({iconAlign:"bottom",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:80,h:16},".btn-text-content":{x:Q?7:33,y:(K||N)?3:32,w:Q?72:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"36px":"94px"})});it("textAlign:right",function(){S({iconAlign:"bottom",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?42:100},btnIconEl:{x:3,y:K?(N?81:23):52,w:80,h:16},".btn-text-content":{x:Q?7:59,y:(K||N)?3:32,w:Q?72:20,h:N?74:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"36px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"bottom",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?38:100},btnIconEl:{x:3,y:K?3:34,w:Q?16:94,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"14px"})});it("textAlign:left",function(){S({iconAlign:"bottom",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?58:100},btnIconEl:{x:3,y:K?(N?65:23):44,w:94,h:16},".btn-text-content":{x:7,y:(K||N)?3:24,w:Q?86:20,h:N?58:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:center",function(){S({iconAlign:"bottom",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?58:100},btnIconEl:{x:3,y:K?(N?65:23):44,w:94,h:16},".btn-text-content":{x:Q?7:40,y:(K||N)?3:24,w:Q?86:20,h:N?58:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:right",function(){S({iconAlign:"bottom",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?58:100},btnIconEl:{x:3,y:K?(N?65:23):44,w:94,h:16},".btn-text-content":{x:Q?7:73,y:(K||N)?3:24,w:Q?86:20,h:N?58:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})})})});describe("iconAlign:left",function(){describe("arrowAlign:right",function(){it("no text",function(){S({iconAlign:"left",arrowAlign:"right",text:""});expect(C).toHaveLayout({el:{w:Q?40:100,h:K?22:100},btnIconEl:{x:Q?3:33,y:K?3:42,w:16,h:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:K?"16px":"94px"})});it("textAlign:left",function(){S({iconAlign:"left",arrowAlign:"right",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:3,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:23,y:K?3:42,w:Q?56:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})});it("textAlign:center",function(){S({iconAlign:"left",arrowAlign:"right",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?3:21,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?23:41,y:K?3:42,w:Q?56:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})});it("textAlign:right",function(){S({iconAlign:"left",arrowAlign:"right",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?22:100},btnIconEl:{x:Q?3:39,y:(K&&!N)?3:42,w:16,h:16},".btn-text-content":{x:Q?23:59,y:K?3:42,w:Q?56:20,h:N?94:16}});O();M({display:Ext.isIE9m?"table-cell":"flex",width:"14px",height:(K&&!N)?"16px":"94px"})})});describe("arrowAlign:bottom",function(){it("no text",function(){S({iconAlign:"left",arrowAlign:"bottom",text:""});expect(C).toHaveLayout({el:{w:Q?22:100,h:K?38:100},btnIconEl:{x:Q?3:42,y:K?3:34,w:16,h:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:Q?"16px":"94px",height:"14px"})});it("textAlign:left",function(){S({iconAlign:"left",arrowAlign:"bottom",textAlign:"left"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},btnIconEl:{x:3,y:(K&&!N)?3:34,w:16,h:16},".btn-text-content":{x:23,y:K?3:34,w:Q?70:20,h:N?78:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:center",function(){S({iconAlign:"left",arrowAlign:"bottom",textAlign:"center"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},btnIconEl:{x:Q?3:28,y:(K&&!N)?3:34,w:16,h:16},".btn-text-content":{x:Q?23:48,y:K?3:34,w:Q?70:20,h:N?78:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})});it("textAlign:right",function(){S({iconAlign:"left",arrowAlign:"bottom",textAlign:"right"});expect(C).toHaveLayout({el:{w:100,h:(K&&!N)?38:100},btnIconEl:{x:Q?3:53,y:(K&&!N)?3:34,w:16,h:16},".btn-text-content":{x:Q?23:73,y:K?3:34,w:Q?70:20,h:N?78:16}});O();M({display:Ext.isIE9m?"table-row":"block",width:"94px",height:"14px"})})})})})})}I(0);I(1);I(2);I(2,true);I(3);I(3,true);describe("syncing the table-layout of the btnWrap when the button width changes",function(){var K;describe("setting the width",function(){beforeEach(function(){C=Ext.create({xtype:"button",renderTo:document.body,text:"Hello"});K=C.btnWrap});it("should initially render with table-layout:auto",function(){expect(K.getStyle("table-layout")).toBe("auto")});it("should add table-layout:fixed - using component.setWidth()",function(){C.setWidth(100);expect(K.getStyle("table-layout")).toBe("fixed")});it("should add table-layout:fixed - using component.setSize()",function(){C.setSize(100,100);expect(K.getStyle("table-layout")).toBe("fixed")});it("should add table-layout:fixed - using el.setWidth()",function(){C.el.setWidth(100);expect(K.getStyle("table-layout")).toBe("fixed")});it("should add table-layout:fixed - using el.setSize()",function(){C.el.setSize(100,100);expect(K.getStyle("table-layout")).toBe("fixed")});it("should add table-layout:fixed - using el.setStyle('width')",function(){C.el.setStyle("width","100px");expect(K.getStyle("table-layout")).toBe("fixed")});it("should add table-layout:fixed - using el.setStyle({ width: width }}",function(){C.el.setStyle({width:"100px"});expect(K.getStyle("table-layout")).toBe("fixed")})});describe("removing the width",function(){beforeEach(function(){C=Ext.create({xtype:"button",renderTo:document.body,width:100,text:"Hello"});K=C.btnWrap});it("should initially render with table-layout:fixed",function(){expect(K.getStyle("table-layout")).toBe("fixed")});it("should remove table-layout:fixed - using component.setWidth()",function(){C.setWidth(null);expect(K.getStyle("table-layout")).toBe("auto")});it("should remove table-layout:fixed - using component.setSize()",function(){C.setSize(null,null);expect(K.getStyle("table-layout")).toBe("auto")});it("should remove table-layout:fixed - using el.setWidth()",function(){C.el.setWidth(null);expect(K.getStyle("table-layout")).toBe("auto")});it("should remove table-layout:fixed - using el.setSize()",function(){C.el.setSize(null,null);expect(K.getStyle("table-layout")).toBe("auto")});it("should remove table-layout:fixed - using el.setStyle('width')",function(){C.el.setStyle("width","");expect(K.getStyle("table-layout")).toBe("auto")});it("should remove table-layout:fixed - using el.setStyle({ width: width }}",function(){C.el.setStyle({width:""});expect(K.getStyle("table-layout")).toBe("auto")})})});describe("syncing the height style of the btnEl when the button height changes",function(){var K;describe("setting the height",function(){beforeEach(function(){C=Ext.create({xtype:"button",renderTo:document.body,text:"Hello"});K=C.btnEl});it("should initially render with a fixed height from the stylesheet",function(){expect(K.dom.style.height).toBe("")});it("should add height:auto - using component.setHeight()",function(){C.setHeight(100);expect(K.dom.style.height).toBe("auto")});it("should add height:auto - using component.setSize()",function(){C.setSize(100,100);expect(K.dom.style.height).toBe("auto")});it("should add height:auto - using el.setHeight()",function(){C.el.setHeight(100);expect(K.dom.style.height).toBe("auto")});it("should add height:auto - using el.setSize()",function(){C.el.setSize(100,100);expect(K.dom.style.height).toBe("auto")});it("should add height:auto - using el.setStyle('height')",function(){C.el.setStyle("height","100px");expect(K.dom.style.height).toBe("auto")});it("should add height:auto - using el.setStyle({ height: height }}",function(){C.el.setStyle({height:"100px"});expect(K.dom.style.height).toBe("auto")})});describe("removing the height",function(){beforeEach(function(){C=Ext.create({xtype:"button",renderTo:document.body,height:100,text:"Hello"});K=C.btnEl});it("should initially render with auto height",function(){expect(K.dom.style.height).toBe("auto")});it("should remove height:auto - using component.setHeight()",function(){C.setHeight(null);expect(K.dom.style.height).toBe("")});it("should remove height:auto - using component.setSize()",function(){C.setSize(null,null);expect(K.dom.style.height).toBe("")});it("should remove height:auto - using el.setHeight()",function(){C.el.setHeight(null);expect(K.dom.style.height).toBe("")});it("should remove height:auto - using el.setSize()",function(){C.el.setSize(null,null);expect(K.dom.style.height).toBe("")});it("should remove height:auto - using el.setStyle('height')",function(){C.el.setStyle("height","");expect(K.dom.style.height).toBe("")});it("should remove height:auto - using el.setStyle({ height: height }}",function(){C.el.setStyle({height:""});expect(K.dom.style.height).toBe("")})})});if(Ext.isIE8){describe("syncing the frame height when the button height changes",function(){var K;describe("setting the height",function(){beforeEach(function(){C=Ext.create({xtype:"button",renderTo:document.body,text:"Hello"});K=C.frameBody});it("should initially render with auto height",function(){expect(K.getStyle("height")).toBe("auto")});it("should set the frameBody height - using component.setHeight()",function(){C.setHeight(100);expect(K.getStyle("height")).toBe("94px")});it("should set the frameBody height - using component.setSize()",function(){C.setSize(100,100);expect(K.getStyle("height")).toBe("94px")});it("should set the frameBody height - using el.setHeight()",function(){C.el.setHeight(100);expect(K.getStyle("height")).toBe("94px")});it("should set the frameBody height - using el.setSize()",function(){C.el.setSize(100,100);expect(K.getStyle("height")).toBe("94px")});it("should set the frameBody height - using el.setStyle('height')",function(){C.el.setStyle("height","100px");expect(K.getStyle("height")).toBe("94px")});it("should set the frameBody height - using el.setStyle({ height: height }}",function(){C.el.setStyle({height:"100px"});expect(K.getStyle("height")).toBe("94px")})});describe("removing the height",function(){beforeEach(function(){C=Ext.create({xtype:"button",renderTo:document.body,height:100,text:"Hello"});K=C.frameBody});it("should initially render with the specified height",function(){expect(K.getStyle("height")).toBe("94px")});it("should remove the frameBody height - using component.setHeight()",function(){C.setHeight(null);expect(K.getStyle("height")).toBe("auto")});it("should remove the frameBody height - using component.setSize()",function(){C.setSize(null,null);expect(K.getStyle("height")).toBe("auto")});it("should remove the frameBody height - using el.setHeight()",function(){C.el.setHeight(null);expect(K.getStyle("height")).toBe("auto")});it("should remove the frameBody height - using el.setSize()",function(){C.el.setSize(null,null);expect(K.getStyle("height")).toBe("auto")});it("should remove the frameBody height - using el.setStyle('height')",function(){C.el.setStyle("height","");expect(K.getStyle("height")).toBe("auto")});it("should remove the frameBody height - using el.setStyle({ height: height }}",function(){C.el.setStyle({height:""});expect(K.getStyle("height")).toBe("auto")})})})}it("should be able to have a height of 0",function(){expect(function(){D({renderTo:Ext.getBody(),height:0})}).not.toThrow()});it("should be able to size larger after hitting a minWidth constraint",function(){D({renderTo:Ext.getBody(),minWidth:75,text:"Foo"});C.setText("Text that will stretch longer than 75px");expect(C.getWidth()).toBeGreaterThan(75)});it("should layout shrinkwrap width button with right arrow in an overflowing hbox layout",function(){spyOn(Ext.log,"warn");var K=Ext.create({xtype:"toolbar",renderTo:document.body,width:75,overflowHandler:"scroller",items:[{xtype:"splitbutton",text:'<span style="display:inline-block;width:72px;background-color:red;"></span>'},{xtype:"button",text:'<span style="display:inline-block;width:78px;background-color:red;"></span>',menu:[]}]});expect(K.items.getAt(0).getWidth()).toBe(100);expect(K.items.getAt(1).getWidth()).toBe(100);K.destroy()});it("should layout shrinkwrap height button with bottom arrow in an overflowing vbox layout",function(){spyOn(Ext.log,"warn");var K=Ext.create({xtype:"toolbar",renderTo:document.body,height:75,vertical:true,overflowHandler:"scroller",items:[{xtype:"splitbutton",arrowAlign:"bottom",text:'<div style="display:inline-block;width:86px;height:78px;background-color:red;">&nbsp;</div>'},{xtype:"button",arrowAlign:"bottom",menu:[],text:'<div style="display:inline-block;width:86px;height:84px;background-color:red;">&nbsp;</div>'}]});expect(K.items.getAt(0).getWidth()).toBe(100);expect(K.items.getAt(1).getWidth()).toBe(100);K.destroy()});it("should layout with overflowing text",function(){C=Ext.create({xtype:"button",renderTo:document.body,text:'<div style="display:inline-block;width:142px;background:red;">&nbsp;</div>',menu:[],width:50});expect(C).toHaveLayout({el:{w:50,h:22},btnWrap:{x:3,y:3,w:44,h:16},btnInnerEl:{x:3,y:3,w:36,h:16}})})});describe("binding",function(){it('should publish "pressed" state by default',function(){D();var I=C.getPublishes();G();D();expect(I.disabled).toBeFalsy();expect(I.pressed).toBeTruthy();expect(C.hasOwnProperty("publishes")).toBe(false)});it('should merge publishes "disabled" state with defaults',function(){D({publishes:["disabled"]});var I=C.getPublishes();expect(I.disabled).toBeTruthy();expect(I.pressed).toBeTruthy();expect(C.hasOwnProperty("publishes")).toBe(true)});describe("menu",function(){var I;beforeEach(function(){I=new Ext.app.ViewModel({data:{title:"someTitle",text:"otherText"}})});afterEach(function(){I=null});it("should be able to bind properties higher up in the hierarchy",function(){D({renderTo:Ext.getBody(),text:"Foo",viewModel:I,menu:{bind:{title:"{title}"},items:{bind:{text:"{text}"}}}});var J=C.getMenu();J.show();I.notify();expect(J.getTitle()).toBe("someTitle");expect(J.items.first().text).toBe("otherText")});it("should be able to bind when dynamically setting a menu",function(){D({renderTo:Ext.getBody(),text:"Foo",viewModel:I});C.setMenu([{bind:{text:"{text}"}}]);var J=C.getMenu();J.show();I.notify();expect(J.items.first().text).toBe("otherText")})})});describe("default ARIA attributes",function(){beforeEach(function(){D({renderTo:Ext.getBody()})});it("should not render aria-haspopup",function(){A("aria-haspopup")});it("should not render aria-pressed",function(){A("aria-pressed")})});describe("tabIndex",function(){describe("rendering",function(){it("should render tabIndex when not disabled",function(){B();E("tabIndex","0")});it("should not render tabIndex when disabled",function(){B({disabled:true});A("tabIndex")})});describe("disabling",function(){beforeEach(function(){B();C.disable()});it("should remove tabIndex when disabled",function(){A("tabIndex")});it("should add tabIndex back when re-enabled",function(){C.enable();E("tabIndex","0")})})});describe("toggle",function(){beforeEach(function(){D({renderTo:Ext.getBody(),enableToggle:true})});describe("aria-pressed",function(){describe("setup",function(){it("should render",function(){expect(C.ariaEl.dom.hasAttribute("aria-pressed")).toBe(true)});it("should equal pressed state",function(){E("aria-pressed","false")})});describe("programmatic toggling",function(){it("should be set to true when toggled",function(){C.toggle();E("aria-pressed","true")});it("should be set to false when toggled back",function(){C.toggle();C.toggle();E("aria-pressed","false")})});describe("clicking",function(){it("should be set to true when clicked",function(){H();E("aria-pressed","true")});it("should be set to false when clicked twice",function(){H();H();E("aria-pressed","false")})});describe("clicking with veto",function(){beforeEach(function(){C.addListener({beforetoggle:function(){return false}})});it("should not be set to true when clicked",function(){H();E("aria-pressed","false")})});describe("keyboarding",function(){it("should be set to true when Space key is pressed",function(){jasmine.simulateKey(C,"space");E("aria-pressed","true")});it("should be set to false when Space key is pressed twice",function(){jasmine.simulateKey(C,"space");jasmine.simulateKey(C,"space");E("aria-pressed","false")});it("should be set to true when Enter key is pressed",function(){jasmine.simulateKey(C,"enter");E("aria-pressed","true")});it("should be set to false when Enter key is pressed twice",function(){jasmine.simulateKey(C,"enter");jasmine.simulateKey(C,"enter");E("aria-pressed","false")})});describe("keyboarding with veto",function(){beforeEach(function(){C.addListener({beforetoggle:function(){return false}})});it("should not be set to true when Space key is pressed",function(){jasmine.simulateKey(C,"space");E("aria-pressed","false")});it("should not be set to true when Enter key is pressed",function(){jasmine.simulateKey(C,"enter");E("aria-pressed","false")})})})});describe("disable/enable",function(){describe("from parent",function(){it("should remain disabled if configured as disabled and the parent is enabled",function(){D({disabled:true});var I=new Ext.container.Container({renderTo:document.body,items:C});I.disable();expect(C.el).toHaveCls(C._disabledCls);expect(C.disabled).toBe(true);I.enable();expect(C.el).toHaveCls(C._disabledCls);expect(C.disabled).toBe(true);I.destroy()})})});describe("keyboard interaction",function(){var I,J,K;beforeEach(function(){I=jasmine.createSpy("button handler");D({text:"foo",handler:I});J=spyOn(C,"onEnterKey").andCallThrough();K=spyOn(C,"onDownKey").andCallThrough();C.render(Ext.getBody())});afterEach(function(){I=J=K=null});describe("Space key",function(){beforeEach(function(){jasmine.pressKey(C.el,"space");waitForSpy(J)});it("should have fired the handler",function(){expect(I).toHaveBeenCalled()});it("should stop the keydown event",function(){var L=J.mostRecentCall.args;expect(L[0].isStopped).toBe(true)});it("should return false to stop Event propagation loop",function(){expect(J.mostRecentCall.result).toBe(false)})});describe("Enter key",function(){beforeEach(function(){jasmine.pressKey(C.el,"enter");waitForSpy(J)});it("should have fired the handler",function(){expect(I).toHaveBeenCalled()});it("should stop the keydown event",function(){var L=J.mostRecentCall.args;expect(L[0].isStopped).toBe(true)});it("should return false to stop Event propagation loop",function(){expect(J.mostRecentCall.result).toBe(false)})});describe("Down key",function(){beforeEach(function(){jasmine.pressKey(C.el,"down");waitForSpy(K)});it("should NOT have fired the handler",function(){expect(I).not.toHaveBeenCalled()});it("should NOT stop the keydown event",function(){var L=K.mostRecentCall.args;expect(L[0].isStopped).toBeFalsy()});it("should NOT return false to stop Event propagation loop",function(){expect(K.mostRecentCall.result).not.toBeDefined()})})})})