describe("Ext.form.field.HtmlEditor",function(){var A;function B(C){A=Ext.widget(Ext.apply({renderTo:Ext.getBody(),xtype:"htmleditor"},C))}afterEach(function(){if(A){A.destroy();A=undefined}});describe("dirty state",function(){it("should not be dirty when rendered without a value",function(){B();expect(A.isDirty()).toBe(false)})});it("should be able to set the value before rendering",function(){A=new Ext.form.field.HtmlEditor();A.setValue("foo");A.render(Ext.getBody());expect(A.getValue()).toBe("foo")});it("should fire the change event",function(){var D,C;B();A.on("change",function(G,F,E){D=F;C=E});A.setValue("foo");expect(C).toBe("");expect(D).toBe("foo")});describe("Destruction",function(){it("should destroy successfully when it isn't rendered",function(){if(Ext.isIE){return }B({renderTo:null});expect(A.rendered).toBeFalsy();A.destroy();A=undefined});xit("should destroy successfully when it's rendered",function(){if(Ext.isIE){return }B();expect(A.rendered).toBeTruthy();waitsFor(function(){return A.initialized},20000);runs(function(){A.destroy();A=undefined;B();expect(A.rendered).toBeTruthy();waitsFor(function(){return A.initialized},20000);runs(function(){A.destroy();A=undefined})})})})})