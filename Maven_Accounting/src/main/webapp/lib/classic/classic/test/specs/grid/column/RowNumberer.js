describe("Ext.grid.column.RowNumberer",function(){var B,E,A=true,F=Ext.data.ProxyStore.prototype.load,D;function G(H,I){E=new Ext.data.Store(Ext.apply({fields:["name","email","phone"],data:[{"name":"Lisa","email":"lisa@simpsons.com","phone":"555-111-1224"},{"name":"Bart","email":"bart@simpsons.com","phone":"555-222-1234"},{"name":"Homer","email":"homer@simpsons.com","phone":"555-222-1244"},{"name":"Marge","email":"marge@simpsons.com","phone":"555-222-1254"}],autoDestroy:true},I));B=new Ext.grid.Panel(Ext.apply({store:E,columns:[{xtype:"rownumberer"},{header:"Name",dataIndex:"name",width:100},{header:"Email",dataIndex:"email",width:100},{header:"Phone",dataIndex:"phone",width:100}],height:200,width:400},H))}function C(I,H){E=new Ext.data.TreeStore(Ext.apply({root:{expanded:true,children:[{text:"detention",leaf:true},{text:"homework",expanded:true,children:[{text:"book report",leaf:true},{text:"algebra",leaf:true}]},{text:"buy lottery tickets",leaf:true}]}},H));B=new Ext.tree.Panel(Ext.apply({width:200,height:150,store:E,rootVisible:false,hideHeaders:true,columns:[{xtype:"rownumberer"},{text:"Data",dataIndex:"text",flex:1}]},I))}beforeEach(function(){D=Ext.data.ProxyStore.prototype.load=function(){F.apply(this,arguments);if(A){this.flushLoad.apply(this,arguments)}return this}});afterEach(function(){Ext.data.ProxyStore.prototype.load=F;Ext.destroy(B);B=E=null});describe("grids",function(){it("should create numbered rows",function(){var H;G({renderTo:Ext.getBody()});H=B.view;expect(Ext.fly(H.getNode(0)).down("td",true)).toHaveCls("x-grid-cell-row-numberer");expect(Ext.fly(H.getNode(0)).down(".x-grid-cell-inner",true).innerHTML).toBe("1");expect(Ext.fly(H.getNode(1)).down(".x-grid-cell-inner",true).innerHTML).toBe("2")});describe("beforeRender method",function(){it("should lookup up the rowbody feature by tablepanel",function(){G();expect(function(){B.columns[0].beforeRender()}).not.toThrow()})});it("should be able to survive a full row update",function(){G();var H=E.first();H.set("name","Foo");expect(function(){H.commit()}).not.toThrow()})});describe("trees",function(){it("should create numbered rows",function(){var H;C({renderTo:Ext.getBody()});H=B.view;expect(Ext.fly(H.getNode(0)).down("td",true)).toHaveCls("x-grid-cell-row-numberer");expect(Ext.fly(H.getNode(0)).down(".x-grid-cell-inner",true).innerHTML).toBe("1");expect(Ext.fly(H.getNode(1)).down(".x-grid-cell-inner",true).innerHTML).toBe("2")});describe("beforeRender method",function(){it("should lookup up the rowbody feature by tablepanel",function(){C();expect(function(){B.columns[0].beforeRender()}).not.toThrow()})})})})