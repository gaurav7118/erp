describe("Ext.layout.container.Border",function(){var E=28;var C=28;var D;function G(I,H){D=Ext.create("Ext.container.Container",Ext.apply({},{defaultType:"component",height:200,items:I,layout:"border",renderTo:Ext.getBody(),width:200},H));return D}afterEach(function(){Ext.destroy(D);D=null});function A(H,I){if(H.isComponent){H=H.el}if(I.isComponent){I=I.el}return I.getOffsetsTo(H)[0]}function F(H,I){if(H.isComponent){H=H.el}if(I.isComponent){I=I.el}return I.getOffsetsTo(H)[1]}var B=Ext.isIE9?xit:it;describe("removing items",function(){var I=function(J){if(J==="auto"){return""}else{if(J=="0px"){return""}}return J},H;beforeEach(function(){H=new Ext.container.Container({renderTo:Ext.getBody(),layout:"fit",width:100,height:100})});afterEach(function(){Ext.destroy(H)});it("should clear the top/left on the north region when removing",function(){var J;D=new Ext.container.Container({renderTo:Ext.getBody(),layout:"vbox",width:200,height:200,defaultType:"component",items:[J=new Ext.Component({region:"north",height:50}),{region:"west",width:50},{region:"south",height:50},{region:"east",width:50}]});D.remove(J,false);H.add(J);expect(I(J.getEl().getStyle("top"))).toBe("");expect(I(J.getEl().getStyle("left"))).toBe("")});it("should clear the top/left on the west region when removing",function(){var J;D=new Ext.container.Container({renderTo:Ext.getBody(),layout:"vbox",width:200,height:200,defaultType:"component",items:[{region:"north",height:50},J=new Ext.Component({region:"west",width:50}),{region:"south",height:50},{region:"east",width:50}]});D.remove(J,false);H.add(J);expect(I(J.getEl().getStyle("top"))).toBe("");expect(I(J.getEl().getStyle("left"))).toBe("")});it("should clear the top/left on the south region when removing",function(){var J;D=new Ext.container.Container({renderTo:Ext.getBody(),layout:"vbox",width:200,height:200,defaultType:"component",items:[{region:"north",height:50},{region:"west",width:50},J=new Ext.Component({region:"south",height:50}),{region:"east",width:50}]});D.remove(J,false);H.add(J);expect(I(J.getEl().getStyle("top"))).toBe("");expect(I(J.getEl().getStyle("left"))).toBe("")});it("should clear the top/left on the east region when removing",function(){var J;D=new Ext.container.Container({renderTo:Ext.getBody(),layout:"vbox",width:200,height:200,defaultType:"component",items:[{region:"north",height:50},{region:"west",width:50},{region:"south",height:50},J=new Ext.Component({region:"east",width:50})]});D.remove(J,false);H.add(J);expect(I(J.getEl().getStyle("top"))).toBe("");expect(I(J.getEl().getStyle("left"))).toBe("")});it("should remove an item when the item is not rendered and the item is not destroying",function(){D=new Ext.container.Container({renderTo:Ext.getBody(),collapsed:true,layout:"border",width:100,height:100,items:{region:"center"}});var J=D.add({});expect(function(){D.remove(J,false);J.destroy()}).not.toThrow()})});describe("splitters",function(){var H=function(J,I){J=J.concat({xtype:"component",region:"center"});G(J,I)};describe("creation",function(){it("should create a splitter with split: true",function(){var I=new Ext.Component({region:"north",height:50,split:true});H([I]);expect(I.nextSibling().isXType("splitter")).toBe(true)});it("should create a splitter with collapsible: true & collapseMode: 'mini'",function(){var I=new Ext.panel.Panel({region:"west",height:50,collapsible:true,collapseMode:"mini"});H([I]);expect(I.nextSibling().isXType("splitter")).toBe(true)});describe("splitter configuration",function(){var I,J;beforeEach(function(){I=new Ext.Component({region:"east",width:50,split:{collapseOnDblClick:false,id:"foosplitter"}});H([I]);J=I.previousSibling()});it("should create a splitter",function(){expect(J.isXType("splitter")).toBe(true)});it("should set custom properties passed in config",function(){expect(J.collapseOnDblClick).toBe(false)});it("should pass on default options unless overridden",function(){expect(J.collapseTarget).toEqual(I)});it("should allow to override default options",function(){expect(J.id).toBe("foosplitter")})})});describe("destruction",function(){it("should destroy the splitter when removing it's owner",function(){var I=new Ext.Component({region:"north",height:50,split:true});H([I]);D.remove(I);expect(D.items.getCount()).toBe(1)})});describe("visibility",function(){describe("initial",function(){it("should show the splitter if the component is visible",function(){var I=new Ext.Component({region:"north",height:50,split:true});H([I]);expect(I.nextSibling().isVisible()).toBe(true)});it("should hide the splitter if the component is hidden",function(){var I=new Ext.Component({region:"north",hidden:true,height:50,split:true});H([I]);expect(I.nextSibling().isVisible()).toBe(false)});it("should show the splitter if the component is collapsed",function(){var I=new Ext.Component({region:"north",height:50,split:true,collapsed:true});H([I]);expect(I.nextSibling().isVisible()).toBe(true)})});describe("dynamic",function(){it("should hide the splitter when hiding the component",function(){var I=new Ext.Component({region:"north",height:50,split:true});H([I]);I.hide();expect(I.nextSibling().isVisible()).toBe(false)});it("should show the splitter when showing the component",function(){var I=new Ext.Component({region:"north",height:50,split:true,hidden:true});H([I]);I.show();expect(I.nextSibling().isVisible()).toBe(true)})});it("should not affect other splitters",function(){var J=new Ext.Component({region:"north",height:50,split:true});var I=new Ext.Component({region:"south",height:50,split:true});H([J,I]);J.hide();expect(J.nextSibling().isVisible()).toBe(false);expect(I.previousSibling().isVisible()).toBe(true)})})});describe("Simple sizing and positioning",function(){it("should support no child regions",function(){G([])});describe("Fixed sizes",function(){it("should support a fixed-width west region",function(){var J=G([{region:"west",width:30},{region:"center"}]);var I=J.down("[region=west]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(30);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(170);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(30);expect(F(J,H)).toBe(0)});it("should support a fixed-width east region",function(){var I=G([{region:"east",width:30},{region:"center"}]);var J=I.down("[region=east]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(30);expect(J.getHeight()).toBe(200);expect(A(I,J)).toBe(170);expect(F(I,J)).toBe(0);expect(H.getWidth()).toBe(170);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support a fixed-height north region",function(){var I=G([{height:30,region:"north"},{region:"center"}]);var J=I.down("[region=north]");var H=I.down("[region=center]");expect(J.getHeight()).toBe(30);expect(J.getWidth()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(0);expect(H.getHeight()).toBe(170);expect(H.getWidth()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(30)});it("should support a fixed-height south region",function(){var I=G([{height:30,region:"south"},{region:"center"}]);var J=I.down("[region=south]");var H=I.down("[region=center]");expect(J.getHeight()).toBe(30);expect(J.getWidth()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(170);expect(H.getHeight()).toBe(170);expect(H.getWidth()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support 4 fixed-size regions",function(){var J=G([{height:60,region:"south"},{region:"west",width:20},{height:50,region:"north"},{region:"center"},{region:"east",width:80}]);var M=J.down("[region=north]");var L=J.down("[region=south]");var K=J.down("[region=east]");var I=J.down("[region=west]");var H=J.down("[region=center]");expect(M.getHeight()).toBe(50);expect(M.getWidth()).toBe(200);expect(A(J,M)).toBe(0);expect(F(J,M)).toBe(0);expect(L.getHeight()).toBe(60);expect(L.getWidth()).toBe(200);expect(A(J,L)).toBe(0);expect(F(J,L)).toBe(140);expect(K.getHeight()).toBe(90);expect(K.getWidth()).toBe(80);expect(A(J,K)).toBe(120);expect(F(J,K)).toBe(50);expect(I.getHeight()).toBe(90);expect(I.getWidth()).toBe(20);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(50);expect(H.getHeight()).toBe(90);expect(H.getWidth()).toBe(100);expect(A(J,H)).toBe(20);expect(F(J,H)).toBe(50)});it("should support 4 fixed-size regions with weights",function(){var J=G([{height:60,region:"south",weight:-100},{region:"west",width:20,weight:100},{height:50,region:"north",weight:-100},{region:"center"},{region:"east",width:80,weight:100}]);var M=J.down("[region=north]");var L=J.down("[region=south]");var K=J.down("[region=east]");var I=J.down("[region=west]");var H=J.down("[region=center]");expect(M.getHeight()).toBe(50);expect(M.getWidth()).toBe(100);expect(A(J,M)).toBe(20);expect(F(J,M)).toBe(0);expect(L.getHeight()).toBe(60);expect(L.getWidth()).toBe(100);expect(A(J,L)).toBe(20);expect(F(J,L)).toBe(140);expect(K.getHeight()).toBe(200);expect(K.getWidth()).toBe(80);expect(A(J,K)).toBe(120);expect(F(J,K)).toBe(0);expect(I.getHeight()).toBe(200);expect(I.getWidth()).toBe(20);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getHeight()).toBe(90);expect(H.getWidth()).toBe(100);expect(A(J,H)).toBe(20);expect(F(J,H)).toBe(50)});it("should support margin on a fixed-width west region",function(){var J=G([{margin:"10 20 30 40",region:"west",width:30},{region:"center"}]);var I=J.down("[region=west]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(30);expect(I.getHeight()).toBe(160);expect(A(J,I)).toBe(40);expect(F(J,I)).toBe(10);expect(H.getWidth()).toBe(110);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(90);expect(F(J,H)).toBe(0)});it("should support a fixed-width west region with no center region",function(){var I=G([{region:"west",width:40}]);var H=I.down("[region=west]");expect(H.getWidth()).toBe(40);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)})});describe("Percentage sizes",function(){it("should support a percentage-width west region",function(){var J=G([{region:"west",width:"25%"},{region:"center"}]);var I=J.down("[region=west]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(50);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(150);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(50);expect(F(J,H)).toBe(0)});it("should support a percentage-width east region",function(){var I=G([{region:"east",width:"40%"},{region:"center"}]);var J=I.down("[region=east]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(80);expect(J.getHeight()).toBe(200);expect(A(I,J)).toBe(120);expect(F(I,J)).toBe(0);expect(H.getWidth()).toBe(120);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support a percentage-height north region",function(){var I=G([{region:"north",height:"10%"},{region:"center"}]);var J=I.down("[region=north]");var H=I.down("[region=center]");expect(J.getHeight()).toBe(20);expect(J.getWidth()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(0);expect(H.getHeight()).toBe(180);expect(H.getWidth()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(20)});it("should support a percentage-height south region",function(){var I=G([{region:"south",height:"85%"},{region:"center"}]);var J=I.down("[region=south]");var H=I.down("[region=center]");expect(J.getHeight()).toBe(170);expect(J.getWidth()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(30);expect(H.getHeight()).toBe(30);expect(H.getWidth()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support 4 percentage-size regions",function(){var J=G([{height:"39%",region:"south"},{region:"west",width:"18%"},{height:"12%",region:"north"},{region:"center"},{region:"east",width:"11%"}]);var M=J.down("[region=north]");var L=J.down("[region=south]");var K=J.down("[region=east]");var I=J.down("[region=west]");var H=J.down("[region=center]");expect(M.getHeight()).toBe(24);expect(M.getWidth()).toBe(200);expect(A(J,M)).toBe(0);expect(F(J,M)).toBe(0);expect(L.getHeight()).toBe(78);expect(L.getWidth()).toBe(200);expect(A(J,L)).toBe(0);expect(F(J,L)).toBe(122);expect(K.getHeight()).toBe(98);expect(K.getWidth()).toBe(22);expect(A(J,K)).toBe(178);expect(F(J,K)).toBe(24);expect(I.getHeight()).toBe(98);expect(I.getWidth()).toBe(36);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(24);expect(H.getHeight()).toBe(98);expect(H.getWidth()).toBe(142);expect(A(J,H)).toBe(36);expect(F(J,H)).toBe(24)});it("should support 4 percentage-size regions with weights",function(){var J=G([{height:"39%",region:"south",weight:10},{region:"west",weight:20,width:"18%"},{height:"12%",region:"south",weight:100},{region:"center"},{region:"east",weight:20,width:"11%"}]);var M=J.down("[region=south][weight=100]");var L=J.down("[region=south][weight=10]");var K=J.down("[region=east]");var I=J.down("[region=west]");var H=J.down("[region=center]");expect(M.getHeight()).toBe(24);expect(M.getWidth()).toBe(200);expect(A(J,M)).toBe(0);expect(F(J,M)).toBe(176);expect(L.getHeight()).toBe(78);expect(L.getWidth()).toBe(142);expect(A(J,L)).toBe(36);expect(F(J,L)).toBe(98);expect(K.getHeight()).toBe(176);expect(K.getWidth()).toBe(22);expect(A(J,K)).toBe(178);expect(F(J,K)).toBe(0);expect(I.getHeight()).toBe(176);expect(I.getWidth()).toBe(36);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getHeight()).toBe(98);expect(H.getWidth()).toBe(142);expect(A(J,H)).toBe(36);expect(F(J,H)).toBe(0)})});describe("Flex sizes",function(){it("should support a flex-width west region",function(){var J=G([{flex:0.25,minWidth:10,region:"west"},{region:"center"}]);var I=J.down("[region=west]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(40);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(160);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(40);expect(F(J,H)).toBe(0)});it("should support a flex-width east region",function(){var I=G([{flex:3,region:"east"},{region:"center"}]);var J=I.down("[region=east]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(150);expect(J.getHeight()).toBe(200);expect(A(I,J)).toBe(50);expect(F(I,J)).toBe(0);expect(H.getWidth()).toBe(50);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support a flex-height north region",function(){var I=G([{flex:9,region:"north"},{region:"center"}]);var J=I.down("[region=north]");var H=I.down("[region=center]");expect(J.getHeight()).toBe(180);expect(J.getWidth()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(0);expect(H.getHeight()).toBe(20);expect(H.getWidth()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(180)});it("should support a flex-height south region",function(){var I=G([{flex:0.6,region:"south"},{region:"center"}]);var J=I.down("[region=south]");var H=I.down("[region=center]");expect(J.getHeight()).toBe(75);expect(J.getWidth()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(125);expect(H.getHeight()).toBe(125);expect(H.getWidth()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support 4 flex-size regions",function(){var J=G([{flex:2,region:"south"},{flex:0.25,region:"west"},{flex:1,region:"north"},{region:"center"},{flex:0.75,region:"east"}]);var M=J.down("[region=north]");var L=J.down("[region=south]");var K=J.down("[region=east]");var I=J.down("[region=west]");var H=J.down("[region=center]");expect(M.getHeight()).toBe(50);expect(M.getWidth()).toBe(200);expect(A(J,M)).toBe(0);expect(F(J,M)).toBe(0);expect(L.getHeight()).toBe(100);expect(L.getWidth()).toBe(200);expect(A(J,L)).toBe(0);expect(F(J,L)).toBe(100);expect(K.getHeight()).toBe(50);expect(K.getWidth()).toBe(75);expect(A(J,K)).toBe(125);expect(F(J,K)).toBe(50);expect(I.getHeight()).toBe(50);expect(I.getWidth()).toBe(25);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(50);expect(H.getHeight()).toBe(50);expect(H.getWidth()).toBe(100);expect(A(J,H)).toBe(25);expect(F(J,H)).toBe(50)});it("should support center flexing",function(){var J=G([{flex:1,region:"north"},{flex:2,region:"west",weight:50},{flex:3,region:"center"}]);var K=J.down("[region=north]");var I=J.down("[region=west]");var H=J.down("[region=center]");expect(K.getHeight()).toBe(50);expect(K.getWidth()).toBe(120);expect(A(J,K)).toBe(80);expect(F(J,K)).toBe(0);expect(I.getHeight()).toBe(200);expect(I.getWidth()).toBe(80);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getHeight()).toBe(150);expect(H.getWidth()).toBe(120);expect(A(J,H)).toBe(80);expect(F(J,H)).toBe(50)});it("should support margin on a center region with flexed south region",function(){var I=G([{margin:"10 20 30 40",region:"center"},{flex:3,region:"south"}]);var J=I.down("[region=south]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(200);expect(J.getHeight()).toBe(120);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(80);expect(H.getWidth()).toBe(140);expect(H.getHeight()).toBe(40);expect(A(I,H)).toBe(40);expect(F(I,H)).toBe(10)});it("should support margin on a center and flex-width east region",function(){var I=G([{flex:1,margin:"10 20 30 40",region:"east"},{margin:"10 20 30 40",region:"center"}]);var J=I.down("[region=east]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(40);expect(J.getHeight()).toBe(160);expect(A(I,J)).toBe(140);expect(F(I,J)).toBe(10);expect(H.getWidth()).toBe(40);expect(H.getHeight()).toBe(160);expect(A(I,H)).toBe(40);expect(F(I,H)).toBe(10)});it("should support margin on multiple flex-size regions",function(){var I=G([{flex:2,region:"east",margin:"10 19 30 10"},{margin:"4 10 15 20",region:"center"},{flex:3,region:"north",margin:"20 10 5 12"}]);var J=I.down("[region=east]");var K=I.down("[region=north]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(94);expect(J.getHeight()).toBe(18);expect(A(I,J)).toBe(87);expect(F(I,J)).toBe(152);expect(K.getWidth()).toBe(178);expect(K.getHeight()).toBe(117);expect(A(I,K)).toBe(12);expect(F(I,K)).toBe(20);expect(H.getWidth()).toBe(47);expect(H.getHeight()).toBe(39);expect(A(I,H)).toBe(20);expect(F(I,H)).toBe(146)});it("should support a flex-width west region with min-width",function(){var J=G([{flex:0.25,minWidth:90,region:"west"},{region:"center"}]);var I=J.down("[region=west]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(90);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(110);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(90);expect(F(J,H)).toBe(0)});it("should support a flex-width west region with min-width and margin",function(){var J=G([{flex:1,margin:"0 50 0 0",minWidth:120,region:"west"},{region:"center"}]);var I=J.down("[region=west]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(120);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(30);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(170);expect(F(J,H)).toBe(0)})});describe("Shrink-wrapping",function(){it("should support a shrink-wrapped west region",function(){var K=G([{region:"west",xtype:"container",layout:{align:"stretch",type:"hbox"},items:[{margin:"10 10 10 10",width:30,xtype:"component"}]},{region:"center"}]);var I=K.down("[region=west]");var J=I.down("component");var H=K.down("[region=center]");expect(I.getWidth()).toBe(50);expect(I.getHeight()).toBe(200);expect(A(K,I)).toBe(0);expect(F(K,I)).toBe(0);expect(J.getWidth()).toBe(30);expect(J.getHeight()).toBe(180);expect(A(K,J)).toBe(10);expect(F(K,J)).toBe(10);expect(H.getWidth()).toBe(150);expect(H.getHeight()).toBe(200);expect(A(K,H)).toBe(50);expect(F(K,H)).toBe(0)});it("should support a shrink-wrapped east region",function(){var J=G([{region:"east",xtype:"container",layout:{align:"stretch",type:"hbox"},items:[{margin:"20 30 40 50",width:100,xtype:"component"}]},{region:"center"}]);var K=J.down("[region=east]");var I=K.down("component");var H=J.down("[region=center]");expect(K.getWidth()).toBe(180);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(20);expect(F(J,K)).toBe(0);expect(I.getWidth()).toBe(100);expect(I.getHeight()).toBe(140);expect(A(J,I)).toBe(70);expect(F(J,I)).toBe(20);expect(H.getWidth()).toBe(20);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(0);expect(F(J,H)).toBe(0)});it("should support a shrink-wrapped north region",function(){var J=G([{region:"north",xtype:"container",layout:{align:"stretch",type:"vbox"},items:[{margin:"10 20 30 40",height:30,xtype:"component"}]},{region:"center"}]);var K=J.down("[region=north]");var I=K.down("component");var H=J.down("[region=center]");expect(K.getWidth()).toBe(200);expect(K.getHeight()).toBe(70);expect(A(J,K)).toBe(0);expect(F(J,K)).toBe(0);expect(I.getWidth()).toBe(140);expect(I.getHeight()).toBe(30);expect(A(J,I)).toBe(40);expect(F(J,I)).toBe(10);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(130);expect(A(J,H)).toBe(0);expect(F(J,H)).toBe(70)});it("should support a shrink-wrapped south region",function(){var J=G([{region:"south",xtype:"container",layout:{align:"stretch",type:"vbox"},items:[{margin:"10 20 30 40",height:30,xtype:"component"}]},{region:"center"}]);var K=J.down("[region=south]");var I=K.down("component");var H=J.down("[region=center]");expect(K.getWidth()).toBe(200);expect(K.getHeight()).toBe(70);expect(A(J,K)).toBe(0);expect(F(J,K)).toBe(130);expect(I.getWidth()).toBe(140);expect(I.getHeight()).toBe(30);expect(A(J,I)).toBe(40);expect(F(J,I)).toBe(140);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(130);expect(A(J,H)).toBe(0);expect(F(J,H)).toBe(0)});it("should support a shrink-wrapped west region with align stretch",function(){var M=G([{region:"west",xtype:"container",layout:{align:"stretch",type:"vbox"},items:[{flex:2,itemId:"cmp1",margin:"15 15 15 15",xtype:"component"},{flex:1,itemId:"cmp2",margin:"20 20 20 20",width:50,xtype:"component"},{flex:1,itemId:"cmp3",margin:"5 5 5 5",width:60,xtype:"component"}]},{region:"center"}]);var K=M.down("[region=west]");var L=K.down("#cmp1");var J=K.down("#cmp2");var I=K.down("#cmp3");var H=M.down("[region=center]");expect(K.getWidth()).toBe(90);expect(K.getHeight()).toBe(200);expect(A(M,K)).toBe(0);expect(F(M,K)).toBe(0);expect(L.getWidth()).toBe(60);expect(L.getHeight()).toBe(60);expect(A(M,L)).toBe(15);expect(F(M,L)).toBe(15);expect(J.getWidth()).toBe(50);expect(J.getHeight()).toBe(30);expect(A(M,J)).toBe(20);expect(F(M,J)).toBe(110);expect(I.getWidth()).toBe(80);expect(I.getHeight()).toBe(30);expect(A(M,I)).toBe(5);expect(F(M,I)).toBe(165);expect(H.getWidth()).toBe(110);expect(H.getHeight()).toBe(200);expect(A(M,H)).toBe(90);expect(F(M,H)).toBe(0)});it("should support a shrink-wrapped west region with align stretchmax",function(){var H=G([{region:"west",xtype:"container",layout:{align:"stretchmax",type:"vbox"},items:[{flex:2,itemId:"cmp1",margin:"15 15 15 15",xtype:"component"},{flex:1,itemId:"cmp2",margin:"20 20 20 20",width:50,xtype:"component"},{flex:1,itemId:"cmp3",margin:"5 5 5 5",width:60,xtype:"component"}]},{region:"center"}]);expect(H).toHaveLayout({el:{w:200,h:200},items:{"[region=west]":{el:{xywh:"0 0 90 200"},items:{cmp1:{el:{xywh:"15 15 60 60"}},cmp2:{el:{xywh:"20 110 50 30"}},cmp3:{el:{xywh:"5 165 80 30"}}}},"[region=center]":{el:{xywh:"90 0 110 200"}}}})})});describe("Mixing sizing paradigms",function(){it("should support mixing fixed-width and flex",function(){var J=G([{region:"west",width:80},{flex:3,region:"east"},{region:"center"}]);var I=J.down("[region=west]");var K=J.down("[region=east]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(80);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(90);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(110);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(30);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(80);expect(F(J,H)).toBe(0)});it("should support mixing fixed-width and percentage-width",function(){var J=G([{region:"west",width:80},{region:"east",width:"45%"},{region:"center"}]);var I=J.down("[region=west]");var K=J.down("[region=east]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(80);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(90);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(110);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(30);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(80);expect(F(J,H)).toBe(0)});it("should support mixing flex-width and percentage",function(){var J=G([{region:"west",width:"40%"},{flex:3,region:"east"},{region:"center"}]);var I=J.down("[region=west]");var K=J.down("[region=east]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(80);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(90);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(110);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(30);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(80);expect(F(J,H)).toBe(0)});it("should support mixing flex-width and percentage with a max-width capping the percentage",function(){var J=G([{maxWidth:50,region:"west",width:"40%"},{flex:2,region:"east"},{region:"center"}]);var I=J.down("[region=west]");var K=J.down("[region=east]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(50);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(100);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(100);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(50);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(50);expect(F(J,H)).toBe(0)});it("should prioritize percentages over flex and flex over fixed size",function(){var J=G([{flex:8,region:"west",width:"10%"},{flex:2,height:100,region:"east",width:100},{region:"center"}]);var I=J.down("[region=west]");var K=J.down("[region=east]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(20);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(120);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(80);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(60);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(20);expect(F(J,H)).toBe(0)})})});describe("Collapsed regions and placeholders",function(){it("should not fire a collapse event when the panel starts collapsed",function(){var H=false;G([{region:"center"},{xtype:"panel",region:"south",collapsible:true,collapsed:true,listeners:{collapse:function(){H=true}}}]);expect(H).toBe(false)});B("should support a collapsed west region",function(){var J=G([{collapsed:true,flex:2,region:"west",xtype:"panel",collapsible:true,floatable:true},{region:"center"}]),K=false;var I=J.down("[region=west]:not([placeholderFor])");var L=J.down("[region=west][placeholderFor]");var H=J.down("[region=center]");expect(L.getWidth()).toBe(C);expect(L.getHeight()).toBe(200);expect(A(J,L)).toBe(0);expect(F(J,L)).toBe(0);expect(H.getWidth()).toBe(200-C);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(C);expect(F(J,H)).toBe(0);I.on("float",function(){K=true});I.on("unfloat",function(){K=false});jasmine.fireMouseEvent(L.el,"mouseover");jasmine.fireMouseEvent(L.el,"click");waitsFor(function(){return K});runs(function(){expect(K).toBe(true);jasmine.fireMouseEvent(L.el,"mouseout")});waits(function(){return K===false});runs(Ext.emptyFn)});B("should support a collapsed east region",function(){var J=G([{collapsed:true,width:"20%",region:"east",xtype:"panel"},{region:"center"}]);var I=J.down("[region=east][placeholderFor]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(C);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(200-C);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(200-C);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(0);expect(F(J,H)).toBe(0)});it("should support a collapsed north region",function(){var J=G([{collapsed:true,height:73,region:"north",xtype:"panel"},{region:"center"}]);var I=J.down("[region=north][placeholderFor]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(200);expect(I.getHeight()).toBe(E);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(200-E);expect(A(J,H)).toBe(0);expect(F(J,H)).toBe(E)});it("should support a collapsed south region",function(){var J=G([{collapsed:true,flex:2,region:"south",xtype:"panel"},{region:"center"}]);var I=J.down("[region=south][placeholderFor]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(200);expect(I.getHeight()).toBe(E);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(200-E);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(200-E);expect(A(J,H)).toBe(0);expect(F(J,H)).toBe(0)});B("should support collapsed north and west regions",function(){var J=G([{collapsed:true,height:50,region:"north",xtype:"panel"},{collapsed:true,flex:2,region:"west",xtype:"panel"},{region:"center"}]);var I=J.down("[region=north][placeholderFor]");var K=J.down("[region=west][placeholderFor]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(200);expect(I.getHeight()).toBe(E);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(C);expect(K.getHeight()).toBe(200-E);expect(A(J,K)).toBe(0);expect(F(J,K)).toBe(E);expect(H.getWidth()).toBe(200-C);expect(H.getHeight()).toBe(200-E);expect(A(J,H)).toBe(C);expect(F(J,H)).toBe(E)});B("should support collapsed north and west regions with weights",function(){var J=G([{collapsed:true,height:50,region:"north",xtype:"panel"},{collapsed:true,flex:2,region:"west",weight:30,xtype:"panel"},{region:"center"}]);var I=J.down("[region=north][placeholderFor]");var K=J.down("[region=west][placeholderFor]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(200-C);expect(I.getHeight()).toBe(E);expect(A(J,I)).toBe(C);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(C);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(0);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(200-C);expect(H.getHeight()).toBe(200-E);expect(A(J,H)).toBe(C);expect(F(J,H)).toBe(E)});B("should support 4 collapsed regions",function(){var L=G([{collapsed:true,height:50,region:"north",xtype:"panel"},{collapsed:true,flex:2,region:"west",xtype:"panel"},{region:"center"},{collapsed:true,height:"50%",region:"south",xtype:"panel"},{collapsed:true,width:78,region:"east",xtype:"panel"}]);var I=L.down("[region=north][placeholderFor]");var J=L.down("[region=south][placeholderFor]");var M=L.down("[region=west][placeholderFor]");var K=L.down("[region=east][placeholderFor]");var H=L.down("[region=center]");expect(I.getWidth()).toBe(200);expect(I.getHeight()).toBe(E);expect(A(L,I)).toBe(0);expect(F(L,I)).toBe(0);expect(J.getWidth()).toBe(200);expect(J.getHeight()).toBe(E);expect(A(L,J)).toBe(0);expect(F(L,J)).toBe(200-E);expect(M.getWidth()).toBe(C);expect(M.getHeight()).toBe(200-2*E);expect(A(L,M)).toBe(0);expect(F(L,M)).toBe(E);expect(K.getWidth()).toBe(C);expect(K.getHeight()).toBe(200-2*E);expect(A(L,K)).toBe(200-C);expect(F(L,K)).toBe(E);expect(H.getWidth()).toBe(200-2*C);expect(H.getHeight()).toBe(200-2*E);expect(A(L,H)).toBe(C);expect(F(L,H)).toBe(E)});it("should support a fixed-size custom placeholder",function(){var I=G([{collapsed:true,flex:2,region:"east",xtype:"panel",placeholder:Ext.widget({width:70,vertical:true,xtype:"toolbar"})},{region:"center"}]);var J=I.down("[region=east][placeholderFor]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(70);expect(J.getHeight()).toBe(200);expect(A(I,J)).toBe(130);expect(F(I,J)).toBe(0);expect(H.getWidth()).toBe(130);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support a flex-size custom placeholder",function(){var I=G([{collapsed:true,flex:2,region:"west",xtype:"panel",placeholder:Ext.widget({flex:0.25,xtype:"toolbar"})},{region:"center"}]);var J=I.down("[region=west][placeholderFor]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(40);expect(J.getHeight()).toBe(200);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(0);expect(H.getWidth()).toBe(160);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(40);expect(F(I,H)).toBe(0)});it("should support a percentage-size custom placeholder",function(){var I=G([{collapsed:true,flex:2,region:"south",xtype:"panel",placeholder:Ext.widget({height:"75%",vertical:true,xtype:"toolbar"})},{region:"center"}]);var J=I.down("[region=south][placeholderFor]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(200);expect(J.getHeight()).toBe(150);expect(A(I,J)).toBe(0);expect(F(I,J)).toBe(50);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(50);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support an hbox custom placeholder",function(){var K=G([{collapsed:true,flex:2,region:"north",xtype:"panel",placeholder:Ext.widget({xtype:"container",layout:{align:"stretchmax",type:"hbox"},items:[{height:85,itemId:"cmp1",width:90,xtype:"component"},{flex:1,itemId:"cmp2",xtype:"component"}]})},{region:"center"}]);var J=K.down("#cmp1");var I=K.down("#cmp2");var L=K.down("[region=north][placeholderFor]");var H=K.down("[region=center]");expect(J.getWidth()).toBe(90);expect(J.getHeight()).toBe(85);expect(A(K,J)).toBe(0);expect(F(K,J)).toBe(0);expect(I.getWidth()).toBe(110);expect(I.getHeight()).toBe(85);expect(A(K,I)).toBe(90);expect(F(K,I)).toBe(0);expect(L.getWidth()).toBe(200);expect(L.getHeight()).toBe(85);expect(A(K,L)).toBe(0);expect(F(K,L)).toBe(0);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(115);expect(A(K,H)).toBe(0);expect(F(K,H)).toBe(85)});it("should update a rendered placeholder when setTitle is called",function(){var I=G([{collapsed:true,flex:2,region:"east",title:"Original Title",xtype:"panel"},{region:"center"}]);var K=I.down("[region=east][placeholderFor]");var J=I.down("[region=east][placeholder]");var H=I.down("[region=center]");expect(J.title).toBe("Original Title");expect(K.getTitle().getText()).toBe("Original Title");J.setTitle("New Title");expect(J.title).toBe("New Title");expect(K.getTitle().getText()).toBe("New Title")});it("should update an unrendered placeholder when setTitle is called",function(){var I=G([{animCollapse:false,flex:2,region:"east",title:"Original Title",xtype:"panel"},{region:"center"}]);var J=I.down("panel[region=east]");var H=I.down("[region=center]");expect(J.title).toBe("Original Title");J.setTitle("New Title");J.collapse();var K=I.down("[region=east][placeholderFor]");expect(J.title).toBe("New Title");expect(K.getTitle().getText()).toBe("New Title")});it("should support setTitle with a custom placeholder",function(){var I=G([{collapsed:true,flex:2,region:"east",title:"Original Title",xtype:"panel",placeholder:Ext.widget({width:70,xtype:"component"})},{region:"center"}]);var K=I.down("[region=east][placeholderFor]");var J=I.down("[region=east][placeholder]");var H=I.down("[region=center]");expect(J.title).toBe("Original Title");J.setTitle("New Title");expect(J.title).toBe("New Title")});it("should update a rendered placeholder when setIconCls is called",function(){var I=G([{collapsed:true,flex:2,iconCls:"firstCls",region:"east",title:"Title",xtype:"panel"},{region:"center"}]);var K=I.down("[region=east][placeholderFor]");var J=I.down("[region=east][placeholder]");var H=I.down("[region=center]");expect(J.iconCls).toBe("firstCls");expect(K.iconCls).toBe("firstCls");J.setIconCls("secondCls");expect(J.iconCls).toBe("secondCls");expect(K.iconCls).toBe("secondCls")});it("should update an unrendered placeholder when setIconCls is called",function(){var I=G([{animCollapse:false,flex:2,iconCls:"firstCls",region:"east",title:"Original Title",xtype:"panel"},{region:"center"}]);var J=I.down("panel[region=east]");var H=I.down("[region=center]");expect(J.iconCls).toBe("firstCls");J.setIconCls("secondCls");J.collapse();var K=I.down("[region=east][placeholderFor]");expect(J.iconCls).toBe("secondCls");expect(K.iconCls).toBe("secondCls")});it("should support setIconCls with a custom placeholder",function(){var I=G([{collapsed:true,flex:2,iconCls:"firstCls",region:"east",title:"Original Title",xtype:"panel",placeholder:Ext.widget({width:70,xtype:"component"})},{region:"center"}]);var K=I.down("[region=east][placeholderFor]");var J=I.down("[region=east][placeholder]");var H=I.down("[region=center]");expect(J.iconCls).toBe("firstCls");J.setIconCls("secondCls");expect(J.iconCls).toBe("secondCls")});it("should update a rendered placeholder when setIcon is called",function(){var I=G([{collapsed:true,flex:2,region:"east",title:"Title",xtype:"panel"},{region:"center"}]);var K=I.down("[region=east][placeholderFor]");var J=I.down("[region=east][placeholder]");var H=I.down("[region=center]");J.setIcon(Ext.BLANK_IMAGE_URL);expect(J.icon).toBe(Ext.BLANK_IMAGE_URL);expect(K.icon).toBe(Ext.BLANK_IMAGE_URL)});it("should update an unrendered placeholder when setIcon is called",function(){var I=G([{animCollapse:false,flex:2,region:"east",title:"Original Title",xtype:"panel"},{region:"center"}]);var J=I.down("panel[region=east]");var H=I.down("[region=center]");J.setIcon(Ext.BLANK_IMAGE_URL);J.collapse();var K=I.down("[region=east][placeholderFor]");expect(J.icon).toBe(Ext.BLANK_IMAGE_URL);expect(K.icon).toBe(Ext.BLANK_IMAGE_URL)});it("should support setIcon with a custom placeholder",function(){var I=G([{collapsed:true,flex:2,region:"east",title:"Original Title",xtype:"panel",placeholder:Ext.widget({width:70,xtype:"component"})},{region:"center"}]);var K=I.down("[region=east][placeholderFor]");var J=I.down("[region=east][placeholder]");var H=I.down("[region=center]");J.setIcon(Ext.BLANK_IMAGE_URL);expect(J.icon).toBe(Ext.BLANK_IMAGE_URL)})});describe("Changing regions",function(){describe("Adding regions",function(){it("should support adding a west region",function(){var I=G([]);I.add({flex:1.5,region:"west"});var H=I.down("[region=west]");expect(H.getWidth()).toBe(120);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support adding a center region",function(){var I=G([]);I.add({flex:1.5,region:"center"});var H=I.down("[region=center]");expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(200);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(0)});it("should support adding multiple regions simultaneously",function(){var I=G([]);I.add({height:70,region:"north"},{region:"center"},{flex:3,region:"east"});var J=I.down("[region=east]");var K=I.down("[region=north]");var H=I.down("[region=center]");expect(J.getWidth()).toBe(150);expect(J.getHeight()).toBe(130);expect(A(I,J)).toBe(50);expect(F(I,J)).toBe(70);expect(K.getWidth()).toBe(200);expect(K.getHeight()).toBe(70);expect(A(I,K)).toBe(0);expect(F(I,K)).toBe(0);expect(H.getWidth()).toBe(50);expect(H.getHeight()).toBe(130);expect(A(I,H)).toBe(0);expect(F(I,H)).toBe(70)});it("should set isViewportBorderChild flag",function(){var I=G([],{isViewport:true});I.add({flex:1.5,region:"west"});var H=I.down("[region=west]");expect(H.isViewportBorderChild).toBe(true)});xit("should support adding a collapsed region",function(){var J=G([{region:"west",width:30}]);J.add({collapsed:true,height:70,region:"south",xtype:"panel"});var I=J.down("[region=west]");var K=J.down("[region=south]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(30);expect(I.getHeight()).toBe(200-E);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(200);expect(K.getHeight()).toBe(E);expect(A(J,K)).toBe(0);expect(F(J,K)).toBe(200-E);expect(H.getWidth()).toBe(170);expect(H.getHeight()).toBe(200-E);expect(A(J,H)).toBe(30);expect(F(J,H)).toBe(0)})})});describe("Splitters",function(){it("should adjust for splitters in percentage size calculations",function(){var J=G([{region:"west",split:true,width:"10%"},{region:"center"},{region:"east",split:true,width:"50%"}]);var I=J.down("[region=west][split]");var K=J.down("[region=east][split]");var H=J.down("[region=center]");expect(I.getWidth()).toBe(19);expect(I.getHeight()).toBe(200);expect(A(J,I)).toBe(0);expect(F(J,I)).toBe(0);expect(K.getWidth()).toBe(95);expect(K.getHeight()).toBe(200);expect(A(J,K)).toBe(105);expect(F(J,K)).toBe(0);expect(H.getWidth()).toBe(76);expect(H.getHeight()).toBe(200);expect(A(J,H)).toBe(24);expect(F(J,H)).toBe(0)})});describe("Interaction with other layouts",function(){it("should be possible to use border layout within a docked item",function(){D=Ext.widget({border:false,height:200,renderTo:Ext.getBody(),width:200,xtype:"panel",dockedItems:[{dock:"bottom",itemId:"docked",layout:"border",height:80,xtype:"container",items:[{itemId:"inner",region:"center",xtype:"component"}]}]});var I=D.down("#docked");var H=I.down("#inner");expect(D.getWidth()).toBe(200);expect(D.getHeight()).toBe(200);expect(I.getWidth()).toBe(200);expect(I.getHeight()).toBe(80);expect(A(D,I)).toBe(0);expect(F(D,I)).toBe(120);expect(H.getWidth()).toBe(200);expect(H.getHeight()).toBe(80);expect(A(D,H)).toBe(0);expect(F(D,H)).toBe(120)});it("should be possible to use border layout within an absolute layout",function(){D=Ext.widget({defaultType:"container",height:200,layout:"absolute",renderTo:Ext.getBody(),width:200,xtype:"container",defaults:{anchor:"-10",layout:"border",height:25,x:10},items:[{itemId:"border1",y:10},{itemId:"border2",y:45}]});var I=D.down("#border1");var H=D.down("#border2");expect(D.getWidth()).toBe(200);expect(D.getHeight()).toBe(200);expect(I.getWidth()).toBe(180);expect(I.getHeight()).toBe(25);expect(A(D,I)).toBe(10);expect(F(D,I)).toBe(10);expect(H.getWidth()).toBe(180);expect(H.getHeight()).toBe(25);expect(A(D,H)).toBe(10);expect(F(D,H)).toBe(45)})});describe("collapsing/expanding/floating",function(){var J={north:{x:0,y:0},east:{x:200,y:100},south:{x:0,y:200},west:{x:0,y:100}},K={north:{x:0,y:27},east:{x:-27,y:0},south:{x:0,y:-27},west:{x:27,y:0}},H=Ext.clone(J),I,L;H.east.y=H.west.y=28;beforeEach(function(){I=Ext.widget({renderTo:Ext.getBody(),xtype:"panel",layout:"border",height:302,width:302,items:[{id:"north",region:"north",title:"north",collapsible:true,height:100,animCollapse:30},{id:"east",region:"east",title:"east",collapsible:true,width:100,animCollapse:30},{id:"south",region:"south",title:"south",collapsible:true,height:100,animCollapse:30},{id:"west",region:"west",title:"west",collapsible:true,width:100,animCollapse:30},{id:"center",region:"center"}]});L={north:Ext.getCmp("north"),east:Ext.getCmp("east"),south:Ext.getCmp("south"),west:Ext.getCmp("west"),center:Ext.getCmp("center")}});afterEach(function(){I.destroy()});describe("collapse collapse",function(){function M(U,T,R,P){var Q=L[U],O=L[T],N=L.center,S=0;Q.collapse();Q.on("collapse",function(){S++});waits(15);runs(function(){O.collapse();O.on("collapse",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(Q.el.isVisible()).toBe(false);expect(O.el.isVisible()).toBe(false);expect(N.getWidth()).toBeApprox(R);expect(N.getHeight()).toBeApprox(P)})}B("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("collapse expand",function(){function M(P,O,W,Q){var T=L[P],S=L[O],N=L.center,R=0,V=T.id==="north"?H:J,U;S.collapse(null,false);T.collapse();T.on("collapse",function(){R++});waitsForAnimation();runs(function(){S.expand();S.on("expand",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(false);expect(S.el.isVisible()).toBe(true);U=S.getPosition(true);expect(U[0]).toBeApprox(V[S.id].x);expect(U[1]).toBeApprox(V[S.id].y);expect(N.getWidth()).toBeApprox(W);expect(N.getHeight()).toBeApprox(Q)})}it("should handle north east",function(){M("north","east",100,172)});xit("should handle north south",function(){M("north","south",100,172)});xit("should handle north west",function(){M("north","west",100,172)});xit("should handle east north",function(){M("east","north",172,100)});xit("should handle east south",function(){M("east","south",172,100)});xit("should handle east west",function(){M("east","west",172,100)});xit("should handle south north",function(){M("south","north",100,172)});xit("should handle south east",function(){M("south","east",100,172)});xit("should handle south west",function(){M("south","west",100,172)});xit("should handle west north",function(){M("west","north",172,100)});xit("should handle west east",function(){M("west","east",172,100)});xit("should handle west south",function(){M("west","south",172,100)})});describe("collapse float",function(){function M(P,O,W,Q){var T=L[P],S=L[O],N=L.center,R=0,V=T.id==="north"?H:J,U;S.collapse(null,false);T.collapse();T.on("collapse",function(){R++});waits(15);runs(function(){S.floatCollapsedPanel();S.on("float",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(false);expect(S.el.isVisible()).toBe(true);U=S.getPosition(true);expect(U[0]).toBeApprox(V[S.id].x+K[S.id].x);expect(U[1]).toBeApprox(V[S.id].y+K[S.id].y);expect(N.getWidth()).toBeApprox(W);expect(N.getHeight()).toBeApprox(Q)})}it("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("collapse slideout",function(){function M(Q,O,V,R){var U=L[Q],T=L[O],N=L.center,S=0,P=false;T.collapse(null,false);T.floatCollapsedPanel();T.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){U.collapse();U.on("collapse",function(){S++})});waits(15);runs(function(){T.slideOutFloatedPanel();T.on("unfloat",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(false);expect(T.el.isVisible()).toBe(false);expect(N.getWidth()).toBeApprox(V);expect(N.getHeight()).toBeApprox(R)})}it("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("expand collapse",function(){function M(P,O,W,Q){var T=L[P],S=L[O],N=L.center,R=0,U=S.id==="north"?H:J,V;T.collapse(null,false);T.expand();T.on("expand",function(){R++});waits(15);runs(function(){S.collapse();S.on("collapse",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(true);expect(S.el.isVisible()).toBe(false);V=T.getPosition(true);expect(V[0]).toBeApprox(U[T.id].x);expect(V[1]).toBeApprox(U[T.id].y);expect(N.getWidth()).toBeApprox(W);expect(N.getHeight()).toBeApprox(Q)})}it("should handle north east",function(){M("north","east",172,100)});xit("should handle north south",function(){M("north","south",100,172)});xit("should handle north west",function(){M("north","west",172,100)});xit("should handle east north",function(){M("east","north",100,172)});xit("should handle east south",function(){M("east","south",100,172)});xit("should handle east west",function(){M("east","west",172,100)});xit("should handle south north",function(){M("south","north",100,172)});xit("should handle south east",function(){M("south","east",172,100)});xit("should handle south west",function(){M("south","west",172,100)});xit("should handle west north",function(){M("west","north",100,172)});xit("should handle west east",function(){M("west","east",172,100)});xit("should handle west south",function(){M("west","south",100,172)})});describe("expand expand",function(){function M(U,T){var P=L[U],O=L[T],N=L.center,S=0,R,Q;P.collapse(null,false);O.collapse(null,false);P.expand();P.on("expand",function(){S++});waits(15);runs(function(){O.expand();O.on("expand",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(P.el.isVisible()).toBe(true);expect(O.el.isVisible()).toBe(true);R=P.getPosition(true);Q=O.getPosition(true);expect(R[0]).toBeApprox(J[P.id].x);expect(R[1]).toBeApprox(J[P.id].y);expect(Q[0]).toBeApprox(J[O.id].x);expect(Q[1]).toBeApprox(J[O.id].y);expect(N.getWidth()).toBeApprox(100);expect(N.getHeight()).toBeApprox(100)})}it("should handle north east",function(){M("north","east")});xit("should handle north south",function(){M("north","south")});xit("should handle north west",function(){M("north","west")});xit("should handle east north",function(){M("east","north")});xit("should handle east south",function(){M("east","south")});xit("should handle east west",function(){M("east","west")});xit("should handle south north",function(){M("south","north")});xit("should handle south east",function(){M("south","east")});xit("should handle south west",function(){M("south","west")});xit("should handle west north",function(){M("west","north")});xit("should handle west east",function(){M("west","east")});xit("should handle west south",function(){M("west","south")})});describe("expand float",function(){function M(P,O,X,Q){var T=L[P],S=L[O],N=L.center,R=0,V=S.id==="north"?H:J,W,U;T.collapse(null,false);S.collapse(null,false);T.expand();T.on("expand",function(){R++});waits(15);runs(function(){S.floatCollapsedPanel();S.on("float",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(true);expect(S.el.isVisible()).toBe(true);W=T.getPosition(true);U=S.getPosition(true);expect(W[0]).toBeApprox(V[T.id].x);expect(W[1]).toBeApprox(V[T.id].y);expect(U[0]).toBeApprox(V[S.id].x+K[S.id].x);expect(U[1]).toBeApprox(V[S.id].y+K[S.id].y);expect(N.getWidth()).toBeApprox(X);expect(N.getHeight()).toBeApprox(Q)})}it("should handle north east",function(){M("north","east",172,100)});xit("should handle north south",function(){M("north","south",100,172)});xit("should handle north west",function(){M("north","west",172,100)});xit("should handle east north",function(){M("east","north",100,172)});xit("should handle east south",function(){M("east","south",100,172)});xit("should handle east west",function(){M("east","west",172,100)});xit("should handle south north",function(){M("south","north",100,172)});xit("should handle south east",function(){M("south","east",172,100)});xit("should handle south west",function(){M("south","west",172,100)});xit("should handle west north",function(){M("west","north",100,172)});xit("should handle west east",function(){M("west","east",172,100)});xit("should handle west south",function(){M("west","south",100,172)})});describe("expand slideout",function(){function M(Q,O,X,R){var U=L[Q],T=L[O],N=L.center,S=0,V=T.id==="north"?H:J,P=false,W;U.collapse(null,false);T.collapse(null,false);T.floatCollapsedPanel();T.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){U.expand();U.on("expand",function(){S++})});waits(15);runs(function(){T.slideOutFloatedPanel();T.on("unfloat",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(true);expect(T.el.isVisible()).toBe(false);W=U.getPosition(true);expect(W[0]).toBeApprox(V[U.id].x);expect(W[1]).toBeApprox(V[U.id].y);expect(N.getWidth()).toBeApprox(X);expect(N.getHeight()).toBeApprox(R)})}it("should handle north east",function(){M("north","east",172,100)});xit("should handle north south",function(){M("north","south",100,172)});xit("should handle north west",function(){M("north","west",172,100)});xit("should handle east north",function(){M("east","north",100,172)});xit("should handle east south",function(){M("east","south",100,172)});xit("should handle east west",function(){M("east","west",172,100)});xit("should handle south north",function(){M("south","north",100,172)});xit("should handle south east",function(){M("south","east",172,100)});xit("should handle south west",function(){M("south","west",172,100)});xit("should handle west north",function(){M("west","north",100,172)});xit("should handle west east",function(){M("west","east",172,100)});xit("should handle west south",function(){M("west","south",100,172)})});describe("float collapse",function(){function M(P,O,V,Q){var T=L[P],S=L[O],N=L.center,R=0,U;T.collapse(null,false);T.floatCollapsedPanel();T.on("float",function(){R++});waits(15);runs(function(){S.collapse();S.on("collapse",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(true);expect(S.el.isVisible()).toBe(false);U=T.getPosition(true);expect(U[0]).toBeApprox(J[T.id].x+K[T.id].x);expect(U[1]).toBeApprox(J[T.id].y+K[T.id].y);expect(N.getWidth()).toBeApprox(V);expect(N.getHeight()).toBeApprox(Q)})}B("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("float expand",function(){function M(P,O,W,Q){var T=L[P],S=L[O],N=L.center,R=0,U=S.id==="north"?H:J,V;T.collapse(null,false);S.collapse(null,false);T.floatCollapsedPanel();T.on("float",function(){R++});waits(15);runs(function(){S.expand();S.on("expand",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(true);expect(S.el.isVisible()).toBe(true);V=T.getPosition(true);expect(V[0]).toBeApprox(U[T.id].x+K[T.id].x);expect(V[1]).toBeApprox(U[T.id].y+K[T.id].y);expect(N.getWidth()).toBeApprox(W);expect(N.getHeight()).toBeApprox(Q)})}it("should handle north east",function(){M("north","east",100,172)});xit("should handle north south",function(){M("north","south",100,172)});xit("should handle north west",function(){M("north","west",100,172)});xit("should handle east north",function(){M("east","north",172,100)});xit("should handle east south",function(){M("east","south",172,100)});xit("should handle east west",function(){M("east","west",172,100)});xit("should handle south north",function(){M("south","north",100,172)});xit("should handle south east",function(){M("south","east",100,172)});xit("should handle south west",function(){M("south","west",100,172)});xit("should handle west north",function(){M("west","north",172,100)});xit("should handle west east",function(){M("west","east",172,100)});xit("should handle west south",function(){M("west","south",172,100)})});describe("float float",function(){function M(P,O,X,Q){var T=L[P],S=L[O],N=L.center,R=0,V=(T.id==="north"||S.id==="north")?H:J,W,U;T.collapse(null,false);S.collapse(null,false);T.floatCollapsedPanel();T.on("float",function(){R++});waits(15);runs(function(){S.floatCollapsedPanel();S.on("float",function(){R++})});waitsFor(function(){return R===2},"animation never completed",500);runs(function(){expect(T.el.isVisible()).toBe(true);expect(S.el.isVisible()).toBe(true);W=T.getPosition(true);U=S.getPosition(true);expect(W[0]).toBeApprox(V[T.id].x+K[T.id].x);expect(W[1]).toBeApprox(V[T.id].y+K[T.id].y);expect(U[0]).toBeApprox(V[S.id].x+K[S.id].x);expect(U[1]).toBeApprox(V[S.id].y+K[S.id].y);expect(N.getWidth()).toBeApprox(X);expect(N.getHeight()).toBeApprox(Q)})}it("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("float slideout",function(){function M(Q,O,X,R){var U=L[Q],T=L[O],N=L.center,S=0,V=T.id==="north"?H:J,P=false,W;U.collapse(null,false);T.collapse(null,false);T.floatCollapsedPanel();T.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){U.floatCollapsedPanel();U.on("float",function(){S++})});waits(15);runs(function(){T.slideOutFloatedPanel();T.on("unfloat",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(true);expect(T.el.isVisible()).toBe(false);W=U.getPosition(true);expect(W[0]).toBeApprox(V[U.id].x+K[U.id].x);expect(W[1]).toBeApprox(V[U.id].y+K[U.id].y);expect(N.getWidth()).toBeApprox(X);expect(N.getHeight()).toBeApprox(R)})}it("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("slideout collapse",function(){function M(Q,O,V,R){var U=L[Q],T=L[O],N=L.center,S=0,P=false;U.collapse(null,false);U.floatCollapsedPanel();U.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){U.slideOutFloatedPanel();U.on("unfloat",function(){S++})});waits(15);runs(function(){T.collapse();T.on("collapse",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(false);expect(T.el.isVisible()).toBe(false);expect(N.getWidth()).toBeApprox(V);expect(N.getHeight()).toBeApprox(R)})}B("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("slideout expand",function(){function M(Q,O,X,R){var U=L[Q],T=L[O],N=L.center,S=0,W=U.id==="north"?H:J,P=false,V;U.collapse(null,false);T.collapse(null,false);U.floatCollapsedPanel();U.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){U.slideOutFloatedPanel();U.on("unfloat",function(){S++})});waits(15);runs(function(){T.expand();T.on("expand",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(false);expect(T.el.isVisible()).toBe(true);V=T.getPosition(true);expect(V[0]).toBeApprox(W[T.id].x);expect(V[1]).toBeApprox(W[T.id].y);expect(N.getWidth()).toBeApprox(X);expect(N.getHeight()).toBeApprox(R)})}it("should handle north east",function(){M("north","east",100,172)});xit("should handle north south",function(){M("north","south",100,172)});xit("should handle north west",function(){M("north","west",100,172)});xit("should handle east north",function(){M("east","north",172,100)});xit("should handle east south",function(){M("east","south",172,100)});xit("should handle east west",function(){M("east","west",172,100)});xit("should handle south north",function(){M("south","north",100,172)});xit("should handle south east",function(){M("south","east",100,172)});xit("should handle south west",function(){M("south","west",100,172)});xit("should handle west north",function(){M("west","north",172,100)});xit("should handle west east",function(){M("west","east",172,100)});xit("should handle west south",function(){M("west","south",172,100)})});describe("slideout float",function(){function M(Q,O,X,R){var U=L[Q],T=L[O],N=L.center,S=0,W=U.id==="north"?H:J,P=false,V;U.collapse(null,false);T.collapse(null,false);U.floatCollapsedPanel();U.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){U.slideOutFloatedPanel();U.on("unfloat",function(){S++})});waits(15);runs(function(){T.floatCollapsedPanel();T.on("float",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(false);expect(T.el.isVisible()).toBe(true);V=T.getPosition(true);expect(V[0]).toBeApprox(W[T.id].x+K[T.id].x);expect(V[1]).toBeApprox(W[T.id].y+K[T.id].y);expect(N.getWidth()).toBeApprox(X);expect(N.getHeight()).toBeApprox(R)})}it("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("slideout slideout",function(){function M(Q,O,V,R){var U=L[Q],T=L[O],N=L.center,S=0,P=0;U.collapse(null,false);T.collapse(null,false);U.floatCollapsedPanel();T.floatCollapsedPanel();U.on("float",function(){P++});T.on("float",function(){P++});waitsFor(function(){return P===2});runs(function(){U.slideOutFloatedPanel();U.on("unfloat",function(){S++})});waits(15);runs(function(){T.slideOutFloatedPanel();T.on("unfloat",function(){S++})});waitsFor(function(){return S===2},"animation never completed",500);runs(function(){expect(U.el.isVisible()).toBe(false);expect(T.el.isVisible()).toBe(false);expect(N.getWidth()).toBeApprox(V);expect(N.getHeight()).toBeApprox(R)})}it("should handle north east",function(){M("north","east",172,172)});xit("should handle north south",function(){M("north","south",100,248)});xit("should handle north west",function(){M("north","west",172,172)});xit("should handle east north",function(){M("east","north",172,172)});xit("should handle east south",function(){M("east","south",172,172)});xit("should handle east west",function(){M("east","west",248,100)});xit("should handle south north",function(){M("south","north",100,248)});xit("should handle south east",function(){M("south","east",172,172)});xit("should handle south west",function(){M("south","west",172,172)});xit("should handle west north",function(){M("west","north",172,172)});xit("should handle west east",function(){M("west","east",248,100)});xit("should handle west south",function(){M("west","south",172,172)})});describe("expanding a floated panel",function(){function M(Q){var O=L[Q],N=L.center,R=false,P=false;O.collapse(null,false);O.floatCollapsedPanel();O.on("float",function(){P=true});waitsFor(function(){return P});runs(function(){O.expand();O.on("expand",function(){R=true})});waitsFor(function(){return R});runs(function(){expect(O.el.isVisible()).toBe(true);expect(Math.round(parseFloat(O.el.getStyle("left")))).toBeApprox(J[O.id].x);expect(Math.round(parseFloat(O.el.getStyle("top")))).toBeApprox(J[O.id].y);expect(N.getWidth()).toBeApprox(100);expect(N.getHeight()).toBeApprox(100)})}it("should handle north",function(){M("north")});xit("should handle east",function(){M("east")});xit("should handle south",function(){M("south")});xit("should handle west",function(){M("west")})})});describe("floating",function(){var K=400,N,H,L,J;beforeEach(function(){L=jasmine.createSpy();J=jasmine.createSpy()});afterEach(function(){H=N=L=J=null});function M(P){runs(function(){L.reset();P.un("float",L);P.on("float",L);P.floatCollapsedPanel()});waitsFor(function(){return L.callCount>0},"Never floated")}function O(P){runs(function(){J.reset();P.un("unfloat",J);P.on("unfloat",J);P.slideOutFloatedPanel()});waitsFor(function(){return J.callCount>0},"Never unfloated")}function I(P,Q){D=new Ext.container.Container({renderTo:Ext.getBody(),border:false,layout:"border",height:K,width:K,items:[Ext.apply({xtype:"panel",itemId:P,region:P,collapsible:true,border:false,bodyBorder:false,animCollapse:1,layout:"fit",items:{xtype:"component",itemId:"comp"}},Q),{region:"center"}]});N=D.down("#"+P);H=D.down("#comp")}describe("positioning",function(){describe("north",function(){var P=150;beforeEach(function(){I("north",{height:P})});it("should position the floater below the placeholder",function(){N.collapse(null,false);var Q=N.placeholder.getHeight();M(N);runs(function(){var R=N.getBox();expect(R.left).toBe(0);expect(R.right).toBe(K);expect(R.top).toBe(Q);expect(R.bottom).toBe(Q+P)})});it("should reset the position if the container resizes",function(){N.collapse(null,false);var Q=N.placeholder.getHeight();M(N);runs(function(){D.setSize(K-100,K-100);var R=N.getBox();expect(R.left).toBe(0);expect(R.right).toBe(K-100);expect(R.top).toBe(Q);expect(R.bottom).toBe(Q+P)})})});describe("south",function(){var P=150;beforeEach(function(){I("south",{height:P})});it("should position the floater above the placeholder",function(){N.collapse(null,false);var Q=N.placeholder.getHeight();M(N);runs(function(){var R=N.getBox();expect(R.left).toBe(0);expect(R.right).toBe(K);expect(R.top).toBe(K-Q-P);expect(R.bottom).toBe(K-Q)})});it("should reset the position if the container resizes",function(){N.collapse(null,false);var Q=N.placeholder.getHeight();M(N);runs(function(){D.setSize(K-100,K-100);var R=N.getBox();expect(R.left).toBe(0);expect(R.right).toBe(K-100);expect(R.top).toBe(K-Q-P-100);expect(R.bottom).toBe(K-Q-100)})})});describe("west",function(){var P=150;beforeEach(function(){I("west",{width:P})});it("should position the floater to the right of the placeholder",function(){N.collapse(null,false);var Q=N.placeholder.getWidth();M(N);runs(function(){var R=N.getBox();expect(R.left).toBe(Q);expect(R.right).toBe(Q+P);expect(R.top).toBe(0);expect(R.bottom).toBe(K)})});it("should reset the position if the container resizes",function(){N.collapse(null,false);var Q=N.placeholder.getWidth();M(N);runs(function(){D.setSize(K-100,K-100);var R=N.getBox();expect(R.left).toBe(Q);expect(R.right).toBe(Q+P);expect(R.top).toBe(0);expect(R.bottom).toBe(K-100)})})});describe("east",function(){var P=150;beforeEach(function(){I("east",{width:P})});it("should position the floater to the left of the placeholder",function(){N.collapse(null,false);var Q=N.placeholder.getWidth();M(N);runs(function(){var R=N.getBox();expect(R.left).toBe(K-Q-P);expect(R.right).toBe(K-Q);expect(R.top).toBe(0);expect(R.bottom).toBe(K)})});it("should reset the position if the container resizes",function(){N.collapse(null,false);var Q=N.placeholder.getWidth();M(N);runs(function(){D.setSize(K-100,K-100);var R=N.getBox();expect(R.left).toBe(K-Q-P-100);expect(R.right).toBe(K-Q-100);expect(R.top).toBe(0);expect(R.bottom).toBe(K-100)})})})});describe("sizing",function(){describe("north",function(){beforeEach(function(){I("north",{height:100})});it("should layout the size correctly when layout updates while floating",function(){var P=N.getWidth();N.collapse(null,false);M(N);runs(function(){H.setHtml("Foo");expect(H.getWidth()).toBe(P)})});it("should update the size of the floater if floated if the ct size changes",function(){var P=N.getWidth()-100;N.collapse(null,false);M(N);runs(function(){D.setWidth(P);expect(H.getWidth()).toBe(P)})});it("should update the size of the floater if not floated if the ct size changes",function(){var P=N.getWidth()-100;N.collapse(null,false);M(N);O(N);runs(function(){D.setWidth(P)});M(N);runs(function(){expect(H.getWidth()).toBe(P)})})});describe("south",function(){beforeEach(function(){I("south",{height:100})});it("should layout the size correctly when layout updates while floating",function(){var P=N.getWidth();N.collapse(null,false);M(N);runs(function(){H.setHtml("Foo");expect(H.getWidth()).toBe(P)})});it("should update the size of the floater if floated if the ct size changes",function(){var P=N.getWidth()-100;N.collapse(null,false);M(N);runs(function(){D.setWidth(P);expect(H.getWidth()).toBe(P)})});it("should update the size of the floater if not floated if the ct size changes",function(){var P=N.getWidth()-100;N.collapse(null,false);M(N);O(N);runs(function(){D.setWidth(P)});M(N);runs(function(){expect(H.getWidth()).toBe(P)})})});describe("west",function(){beforeEach(function(){I("west",{width:100})});it("should layout the size correctly when layout updates while floating",function(){var P=N.getHeight();N.collapse(null,false);M(N);runs(function(){H.setHtml("Foo");expect(H.getHeight()).toBe(P-N.header.getHeight())})});it("should update the size of the floater if floated if the ct size changes",function(){var P=N.getHeight()-100;N.collapse(null,false);M(N);runs(function(){D.setHeight(P);expect(H.getHeight()).toBe(P-N.header.getHeight())})});it("should update the size of the floater if not floated if the ct size changes",function(){var P=N.getHeight()-100;N.collapse(null,false);M(N);O(N);runs(function(){D.setHeight(P)});M(N);runs(function(){expect(H.getHeight()).toBe(P-N.header.getHeight())})})});describe("east",function(){beforeEach(function(){I("east",{width:100})});it("should layout the size correctly when layout updates while floating",function(){var P=N.getHeight();N.collapse(null,false);M(N);runs(function(){H.setHtml("Foo");expect(H.getHeight()).toBe(P-N.header.getHeight())})});it("should update the size of the floater if floated if the ct size changes",function(){var P=N.getHeight()-100;N.collapse(null,false);M(N);runs(function(){D.setHeight(P);expect(H.getHeight()).toBe(P-N.header.getHeight())})});it("should update the size of the floater if not floated if the ct size changes",function(){var P=N.getHeight()-100;N.collapse(null,false);M(N);O(N);runs(function(){D.setHeight(P)});M(N);runs(function(){expect(H.getHeight()).toBe(P-N.header.getHeight())})})})})});describe("adding items dynamically",function(){it("should be able to add a collapsed region",function(){G([{region:"north",title:"North"},{region:"center"}]);var H=D.add({xtype:"panel",title:"South",region:"south",collapsible:true,collapsed:true,height:100,animCollapse:false});H.expand();expect(H.getHeight()).toBe(100)})});describe("focus management",function(){var O=jasmine.asyncPressKey,M=jasmine.focusAndWait,J=jasmine.expectFocused,N=["north","east","south","west"],I,H,L;function K(Q,P){describe(Q+" animCollapse: "+!!P,function(){var S,W,T,X,U,R,V;beforeEach(function(){R=jasmine.createSpy("collapse");V=jasmine.createSpy("expand");G([{xtype:"panel",title:"foo",region:Q,collapsible:true,testRegion:true,animCollapse:P,listeners:{collapse:R,expand:V}},{xtype:"panel",region:"center",items:[{xtype:"button",text:"bar"}]}]);S=D.down("panel[testRegion]");U=D.down("button");T=S.collapseTool});afterEach(function(){S=W=T=X=U=null;R=V=null});describe("tools when expanded",function(){it("should have a collapse tool",function(){expect(T.type).toMatch(/^collapse-/)});it("tool should be focusable",function(){expect(T.el.isFocusable()).toBe(true)})});describe("tools when collapsed",function(){beforeEach(function(){runs(function(){S.collapse()});waitForSpy(R,"collapse",1000);runs(function(){W=D.down("[placeholderFor]");X=W.expandTool})});it("should have an expand tool",function(){expect(X.type).toMatch(/^expand-/)});it("should be tabbable",function(){expect(X.el.isFocusable()).toBe(true)})});describe("pointer interaction",function(){describe("collapsing",function(){beforeEach(function(){M(U);jasmine.fireMouseEvent(T.el,"click");waitForSpy(R,"collapse",1000);runs(function(){W=D.down("[placeholderFor]");X=W.expandTool})});it("should collapse",function(){expect(!!S.collapsed).toBe(true)});it("should not steal focus from button",function(){J(U)});describe("expanding",function(){it("should expand",function(){jasmine.fireMouseEvent(X.el,"click");waitForSpy(V,"expand",1000);runs(function(){expect(!!S.collapsed).toBe(false)})});it("should not steal focus from button",function(){J(U)})})})});describe("keyboard interaction",function(){function Y(Z){describe("by "+Z+" key",function(){describe("collapsing",function(){beforeEach(function(){O(T,Z);waitForSpy(R,"collapse",1000);runs(function(){W=D.down("[placeholderFor]");X=W.expandTool})});it("should collapse",function(){expect(!!S.collapsed).toBe(true)});it("should place focus on expand tool",function(){J(X)});describe("expanding",function(){beforeEach(function(){O(X,Z);waitForSpy(V,"expand",1000)});it("should expand",function(){expect(!!S.collapsed).toBe(false)});it("should place focus on collapse tool",function(){J(T)})})})})}Y("space");Y("enter")})})}for(I=0,H=N.length;I<H;I++){L=N[I];K(L,100);K(L,false)}})})