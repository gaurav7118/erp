describe("Ext.panel.Header",function(){var D;function A(E){E=Ext.apply({title:"foo",renderTo:Ext.getBody()},E);return D=new Ext.panel.Header(E)}function C(E,F){jasmine.expectAriaAttr(D,E,F)}function B(E){jasmine.expectNoAriaAttr(D,E)}afterEach(function(){Ext.destroy(D);D=null});describe("Title value",function(){it("should set it as configured",function(){A({title:10});expect(D.title.getText()).toBe(10)})});describe("setTitlePosition",function(){beforeEach(function(){A({tools:[{type:"close"},{type:"pin"}]})});it("should insert the header at the new title position",function(){D.setTitlePosition(2);expect(D.items.getAt(2)).toBe(D.getTitle())});it("should update the titlePosition property",function(){D.setTitlePosition(2);expect(D.titlePosition).toBe(2)});it("should not allow a titlePosition greater than the max item index",function(){D.setTitlePosition(3);expect(D.items.getAt(2)).toBe(D.getTitle());expect(D.titlePosition).toBe(2)})});describe("ARIA",function(){function F(I,J){jasmine.expectAriaAttr(D.titleCmp,I,J)}function H(I){jasmine.expectNoAriaAttr(D.titleCmp,I)}function G(I,J){jasmine.expectAriaAttr(D.titleCmp.textEl,I,J)}function E(I){jasmine.expectNoAriaAttr(D.titleCmp.textEl,I)}it("should have el as ariaEl",function(){A();expect(D.ariaEl).toBe(D.el)});describe("no tools",function(){describe("ordinary header",function(){beforeEach(function(){A()});it("should have presentation ariaRole",function(){expect(D.ariaRole).toBe("presentation")});it("should have presentation role on header el",function(){C("role","presentation")});it("should have presentation role on titleCmp el",function(){F("role","presentation")});it("should have presentation role on titleCmp textEl",function(){G("role","presentation")});it("should have FocusableContainer disabled",function(){expect(D.enableFocusableContainer).toBe(false)});describe("after adding tools",function(){beforeEach(function(){D.addTool({type:"expand"})});it("should change ariaRole to toolbar",function(){expect(D.ariaRole).toBe("toolbar")});it("should change header el role to toolbar",function(){C("role","toolbar")});it("should not change titleCmp el role",function(){F("role","presentation")});it("should not change titleCmp textEl role",function(){G("role","presentation")});it("should enable FocusableContainer",function(){expect(D.enableFocusableContainer).toBe(true)})})});describe("accordion header",function(){beforeEach(function(){A({isAccordionHeader:true})});it("should have presentation ariaRole",function(){expect(D.ariaRole).toBe("presentation")});it("should have presentation role on header el",function(){C("role","presentation")});it("should have tab role on titleCmp el",function(){F("role","tab")});it("should have no role on titleCmp textEl",function(){E("role")});it("should have FocusableContainer disabled",function(){expect(D.enableFocusableContainer).toBe(false)});describe("after adding tools",function(){beforeEach(function(){D.addTool({type:"pin"})});it("should not change ariaRole",function(){expect(D.ariaRole).toBe("presentation")});it("should not change header el role",function(){C("role","presentation")});it("should not change titleCmp el role",function(){F("role","tab")});it("should not change titleCmp textEl role",function(){E("role")});it("should not enable FocusableContainer",function(){expect(D.enableFocusableContainer).toBe(false)})})})});describe("with tools",function(){describe("ordinary header",function(){beforeEach(function(){A({tools:[{type:"close"}]})});it("should have toolbar ariaRole",function(){expect(D.ariaRole).toBe("toolbar")});it("should have toolbar role on header el",function(){C("role","toolbar")});it("should have presentation role on titleCmp",function(){F("role","presentation")});it("should have presentation role on titleCmp textEl",function(){G("role","presentation")});it("should have FocusableContainer enabled",function(){expect(D.enableFocusableContainer).toBe(true)})});describe("accordion header",function(){beforeEach(function(){A({isAccordionHeader:true,tools:[{type:"collapse"}]})});it("should have presentation ariaRole",function(){expect(D.ariaRole).toBe("presentation")});it("should have presentation role on header el",function(){C("role","presentation")});it("should have tab role on titleCmp el",function(){F("role","tab")});it("should have no role on titleCmp textEl",function(){E("role")});it("should have FocusableContainer disabled",function(){expect(D.enableFocusableContainer).toBe(false)})})})})})