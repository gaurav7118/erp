xdescribe("Ext.util.History",function(){var B,C,A;beforeEach(function(){location.hash=""});afterEach(function(){B.parentNode.removeChild(B);C.parentNode.removeChild(C);A.parentNode.removeChild(A);location.hash=""});it("should track history",function(){B=document.createElement("a");C=document.createElement("a");A=document.createElement("a");var E=[],F=Ext.isWebKit||Ext.isGecko,G=B.click,D=F?function(H){if(Ext.isGecko){H.focus()}jasmine.fireMouseEvent(H,"click")}:G?function(H){H.click()}:function(H){Ext.util.History.setHash(H.hash.substr(1))};B.href="#foo";C.href="#bar";A.href="#bletch";document.body.appendChild(B);document.body.appendChild(C);document.body.appendChild(A);Ext.History.init();Ext.History.on("change",function(H){E.push(H)});D(B);waitsFor(function(){return E.length===1},"Hash history change #foo",200);runs(function(){expect(location.hash).toBe("#foo");D(C)});waitsFor(function(){return E.length===2},"Hash history change #bar",200);runs(function(){expect(location.hash).toBe("#bar");D(A)});waitsFor(function(){return E.length===3},"Hash history change #bletch",200);runs(function(){expect(location.hash).toBe("#bletch");Ext.util.History.back()});waitsFor(function(){return E.length===4},"Hash history change #bar",200);runs(function(){expect(location.hash).toBe("#bar");Ext.util.History.back()});waitsFor(function(){return E.length===5},"Hash history change #foo",200);runs(function(){expect(location.hash).toBe("#foo");expect(E).toEqual(["foo","bar","bletch","bar","foo"])})})})