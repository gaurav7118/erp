describe("Ext.util.Renderable",function(){describe("framing",function(){var A,C;afterEach(function(){Ext.destroy(A);A=null;if(C){C.destroy();C=null}});function B(F){var E=Ext.supports.CSS3BorderRadius,D=Ext.util.CSS;D.createStyleSheet(".style-proxy { font-family: "+F+" }","renderable-test-stylesheet");Ext.supports.CSS3BorderRadius=false;C=Ext.getBody().createChild({cls:"style-proxy"});A=new Ext.Component({frame:true,getStyleProxy:function(){return C}});A.getFrameInfo();D.removeStyleSheet("renderable-test-stylesheet");Ext.supports.CSS3BorderRadius=E}describe("getFrameInfo",function(){it("should return framing info",function(){B("dh-1-2-3-4");var D=A.frameSize;expect(D.table).toBe(false);expect(D.vertical).toBe(false);expect(D.top).toBe(1);expect(D.right).toBe(2);expect(D.bottom).toBe(3);expect(D.left).toBe(4);expect(D.width).toBe(6);expect(D.height).toBe(4)})});describe("getFrameRenderData",function(){beforeEach(function(){B("dh-1-2-3-4")});it("should include id in frame render data",function(){var D=A.getFrameRenderData();expect(D.id).toBe(A.id)})})});describe("Using existing el",function(){var A,B;beforeEach(function(){var E=document.body.childNodes,C=E.length,D;B=document.createDocumentFragment();for(D=0;D<C;D++){B.appendChild(E[0])}});afterEach(function(){A.destroy();document.body.appendChild(B)});it("should incorporate existing DOM into the Component tree",function(){Ext.getBody().createChild({tag:"div",id:"existing-element",cn:{tag:"ul",cn:[{tag:"li",html:'<a href="http://www.sencha.com">Sencha</a>'},{tag:"li",html:'<a href="http://www.google.com">Google</a>'}]}});A=new Ext.container.Viewport({layout:"border",items:[{region:"north",ariaRole:"foo",xtype:"component",el:"existing-element"},{xtype:"panel",ariaRole:"bar",id:"test-panel",region:"center",html:"test"}]});var E=/\s*(class|style|role|data-ref|aria-\w+)=(?:"[^"]*"|[^> ]+\b)/g,C=A.el.dom.innerHTML.replace(E,"").replace(/\s{2,}/g," ");var D=(Ext.isIE8?["<DIV id=existing-element> ","<UL> ","<LI>",'<A href="http://www.sencha.com">Sencha</A>',"</LI> ","<LI>",'<A href="http://www.google.com">Google</A>',"</LI>","</UL>","</DIV> ","<DIV id=test-panel> ","<DIV id=test-panel-body> ","<DIV id=test-panel-outerCt> ","<DIV id=test-panel-innerCt>test</DIV>","</DIV>","</DIV>","</DIV>"]:['<div id="existing-element">',"<ul>","<li>",'<a href="http://www.sencha.com">Sencha</a>',"</li>","<li>",'<a href="http://www.google.com">Google</a>',"</li>","</ul>","</div>",'<div id="test-panel">','<div id="test-panel-body">','<div id="test-panel-outerCt">','<div id="test-panel-innerCt">test</div>',"</div>","</div>","</div>"]).join("");if(Ext.isIE8){D=D.replace(/(<\/?)div/g,"$1DIV").replace(/(<\/?)ul/g,"$1UL").replace(/(<\/?)li/g,"$1LI").replace(/(<\/?)a/g,"$1A")}expect(C).toBe(D)})});describe("Accessibility",function(){var D,B,A;function C(E){E=Ext.apply({renderTo:Ext.getBody(),width:100,height:100,maskOnDisable:false,style:{"background-color":"green"},renderTpl:['<div id="{id}-wrapEl" data-ref="wrapEl" {ariaAttributes:attributes}>','<div id="{id}-labelEl" data-ref="labelEl" class="label"></div>','<div id="{id}-descEl" data-ref="descEl" class="desc"></div>',"</div>"]},E);D=new Ext.Component(E);B=D.ariaEl;A=B.dom;return D}afterEach(function(){if(D){D.destroy()}D=B=A=null});describe("ariaEl",function(){it("should be defined before rendering",function(){C({renderTo:undefined});expect(D.ariaEl).toBeDefined()});it("should default to main el",function(){C();expect(B).toBe(D.el)});it("should resolve ariaEl after rendering",function(){C({childEls:["wrapEl"],ariaEl:"wrapEl"});expect(B).toBe(D.wrapEl)})});describe("attributes",function(){function E(G,F){describe(G,function(){var M=!F||!F.ariaEl||F.ariaEl==="el",P=M?"should":"should not",L=M?"should not":"should",H,J,Q,I,R,O,N;function K(S){S=Ext.apply({},S,F);C(S);H=D.el;J=H.dom;Q=D.wrapEl;I=Q.dom}function N(U,S,T){it(P+" "+U+" on main el",function(){R(S,T)});it(L+" "+U+" on wrapEl",function(){O(S,T)})}beforeEach(function(){R=function(S,U){if(typeof U==="function"){U=U()}if(M){var T=D.el.dom.getAttribute(S);expect(T).toBe(U)}else{expect(D.el.dom.hasAttribute(S)).toBe(false)}};O=function(S,U){if(typeof U==="function"){U=U()}if(!M){var T=D.wrapEl.dom.getAttribute(S);expect(T).toBe(U)}else{expect(D.wrapEl.dom.hasAttribute(S)).toBe(false)}}});afterEach(function(){H=J=Q=I=null});describe("basic",function(){describe("role undefined",function(){beforeEach(function(){K()});it("should not render role on el",function(){expect(A.hasAttribute("role")).toBe(false)});it("should not render role on wrapEl",function(){expect(I.hasAttribute("role")).toBe(false)})});describe("role defined",function(){beforeEach(function(){K({ariaRole:"foo"})});N("render role","role","foo")})});describe("static roles",function(){function S(T){describe(T,function(){var W=["aria-hidden","aria-disabled","aria-label","aria-expanded","aria-blerg"],X,V,U;function Y(Z){describe(Z,function(){it("should not render on main el",function(){expect(J.hasAttribute(Z)).toBe(false)});it("should not render on wrap el",function(){expect(I.hasAttribute(Z)).toBe(false)})})}beforeEach(function(){K({ariaRole:T,ariaLabel:"foo",region:"north",ariaAttributes:{"aria-foo":"bar"},ariaRenderAttributes:{"aria-blerg":"qux"}})});describe("role",function(){N("render "+T+" role","role",T)});for(X=0,V=W.length;X<V;X++){U=W[X];Y(U)}})}S("presentation");S("document")});describe("widget roles",function(){function S(T,U){describe(T,function(){N("render "+T,T,U)})}describe("collapsible component",function(){var U,V,T={role:"throbbe","aria-hidden":"false","aria-disabled":"false","aria-label":"sploosh!","aria-expanded":"true"};beforeEach(function(){K({ariaRole:"throbbe",ariaLabel:"sploosh!",collapsible:true})});for(U in T){V=T[U];S(U,V)}it("should null ariaRenderAttributes",function(){expect(D.ariaRenderAttributes).toBe(null)})});describe("collapsible panel",function(){var U,V,T={role:"foo","aria-hidden":"false","aria-disabled":"false","aria-label":"frogg","aria-expanded":"true","aria-baz":"qux","aria-fred":"frob"};beforeEach(function(){K({collapsible:true,ariaRole:"foo",ariaLabel:"frogg",ariaAttributes:{"aria-baz":"qux"},ariaRenderAttributes:{"aria-fred":"frob"}})});for(U in T){V=T[U];S(U,V)}it("should null ariaRenderAttributes",function(){expect(D.ariaRenderAttributes).toBe(null)})})});describe("component state",function(){describe("hidden",function(){beforeEach(function(){K({ariaRole:"hidden-test",hidden:true})});N("render aria-hidden","aria-hidden","true")});describe("disabled",function(){beforeEach(function(){K({ariaRole:"disabled-test",disabled:true})});N("render aria-disabled","aria-disabled","true")});describe("collapsed",function(){beforeEach(function(){K({ariaRole:"expanded-test",collapsible:true,collapsed:true})});N("render aria-expanded","aria-expanded","false")});describe("expanded",function(){beforeEach(function(){K({ariaRole:"expanded-test",collapsible:true,collapsed:false})});N("render aria-expanded","aria-expanded","true")})})})}E("on main el",{childEls:["wrapEl"]});E("on child el",{ariaUsesMainElement:false,ariaEl:"wrapEl",childEls:["wrapEl"]})})})})