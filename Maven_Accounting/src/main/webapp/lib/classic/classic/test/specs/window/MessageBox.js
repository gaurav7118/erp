describe("Ext.window.MessageBox",function(){var A;beforeEach(function(){A=new Ext.window.MessageBox()});afterEach(function(){if(A.isVisible()){A.hide()}Ext.destroy(A)});it("should have a single instance",function(){var B=Ext.MessageBox,C=Ext.Msg;expect(B).toBe(C);expect(B instanceof Ext.window.MessageBox).toBe(true)});it("should show up on top of another window",function(){var B=Ext.widget("window",{height:200,width:200});B.show();A.alert("Title","Message");expect(A.el.dom.style.zIndex).toBeGreaterThan(B.el.dom.style.zIndex);Ext.destroy(B)});it("should be able to hide before being shown",function(){expect(function(){A.hide()}).not.toThrow()});it("should show even when not passed a config object",function(){expect(A.show().rendered).toBe(true)});describe("MessageBox header",function(){it("should not create a header by default",function(){expect(A.header).toBeUndefined()});describe("passed in the config to the constructor",function(){beforeEach(function(){A.destroy()});it("should create a header when `true`",function(){A=new Ext.window.MessageBox({header:true}).show();expect(A.header).toBeDefined()});it("should create a header when an object`",function(){A=new Ext.window.MessageBox({header:{title:"GLUMR"}}).show();expect(A.header).toBeDefined();expect(A.header.getTitle().getText()).toBe("GLUMR");expect(A.header.isHeader).toBe(true)});it("should not create a header when `false`",function(){A=new Ext.window.MessageBox({header:false}).show();expect(A.header).toBe(false)})})});describe("MessageBox title",function(){it("should set an HTML entitiy as the title if none is provided (default)",function(){A.show();expect(A.title).toBe("&#160;")});it("should set the title on the instance",function(){A.show({title:"Bob the Cat"});expect(A.title).toBe("Bob the Cat")});it("should pass the title to the Header constructor",function(){A.show({title:"Chuck the Cat"});expect(A.header.getTitle().getText()).toBe("Chuck the Cat")});it("should set the same title on the instance and on the Header",function(){A.show({title:"Chuck the Cat"});expect(A.title).toBe(A.header.getTitle().getText())});describe("passed in the config to the constructor",function(){beforeEach(function(){A.destroy()});it("should pass the title to the Header constructor",function(){A=new Ext.window.MessageBox({title:"Mr. G"}).show();expect(A.header.getTitle().getText()).toBe("Mr. G")});it("should set the same title on the instance and on the Header",function(){A=new Ext.window.MessageBox({title:"Kerfuffle"}).show();expect(A.title).toBe(A.header.getTitle().getText())});it("should give precedence to the title in the header config if both are present",function(){A=new Ext.window.MessageBox({header:{title:"Zap!"},title:"Foo"}).show();expect(A.title).toBe("Zap!")});it('should not "win" if show is also called with a title config',function(){A=new Ext.window.MessageBox({header:{title:"Zap!"},title:"Foo"}).show({title:"Bar"});expect(A.title).toBe("Bar")})})});describe("custom button text",function(){var B;beforeEach(function(){B=A.buttonText;A.buttonText={ok:"okText",yes:"yesText",no:"noText",cancel:"cancelText"}});afterEach(function(){A.buttonText=B});it("should apply custom text to the buttons",function(){var C=A.msgButtons;A.show({buttons:A.YESNO});expect(C.yes.text).toBe("yesText");expect(C.no.text).toBe("noText");A.hide();A.show({buttons:A.OKCANCEL});expect(C.ok.text).toBe("okText");expect(C.cancel.text).toBe("cancelText")});it("should persist the custom text on each show",function(){var C=A.msgButtons;A.show({buttons:A.YES});expect(C.yes.text).toBe("yesText");A.hide();A.show({buttons:A.YES});expect(C.yes.text).toBe("yesText")});it("should accept a buttonText config",function(){var C=A.msgButtons;A.show({buttons:A.YESNO,buttonText:{yes:"newYesText",no:"newNoText"}});expect(C.yes.text).toBe("newYesText");expect(C.no.text).toBe("newNoText")})});describe("shortcuts",function(){describe("buttons",function(){it("should use the OK shortcut",function(){A.show({buttons:A.OK});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(true);expect(B.cancel.isVisible()).toBe(false)});it("should use the YES shortcut",function(){A.show({buttons:A.YES});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(true);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(false)});it("should use the NO shortcut",function(){A.show({buttons:A.NO});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(true);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(false)});it("should use the CANCEL shortcut",function(){A.show({buttons:A.CANCEL});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(true)});it("should use the OKCANCEL shortcut",function(){A.show({buttons:A.OKCANCEL});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(true);expect(B.cancel.isVisible()).toBe(true)});it("should use the YESNO shortcut",function(){A.show({buttons:A.YESNO});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(true);expect(B.no.isVisible()).toBe(true);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(false)});it("should use the YESNOCANCEL shortcut",function(){A.show({buttons:A.YESNOCANCEL});var B=A.msgButtons;expect(B.yes.isVisible()).toBe(true);expect(B.no.isVisible()).toBe(true);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(true)})});describe("confirm",function(){it("should configure yes/no buttons",function(){A.confirm("a","b");var B=A.msgButtons;expect(B.yes.isVisible()).toBe(true);expect(B.no.isVisible()).toBe(true);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(false)});it("should show the close tool",function(){A.confirm("a","b");expect(A.down("tool").isVisible()).toBe(true)})});describe("prompt",function(){it("should configure ok/cancel buttons",function(){A.prompt("a","b");var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(true);expect(B.cancel.isVisible()).toBe(true)});it("should show the close tool",function(){A.prompt("a","b");expect(A.down("tool").isVisible()).toBe(true)})});describe("wait",function(){it("should hide all buttons",function(){A.wait("a","b");var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(false)});it("should hide the close tool",function(){A.wait("a","b");expect(A.down("tool").isVisible()).toBe(false)})});describe("alert",function(){it("should configure an ok button",function(){A.alert("a","b");var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(true);expect(B.cancel.isVisible()).toBe(false)});it("should show the close tool",function(){A.alert("a","b");expect(A.down("tool").isVisible()).toBe(true)})});describe("progress",function(){it("should hide all buttons",function(){A.progress("a","b");var B=A.msgButtons;expect(B.yes.isVisible()).toBe(false);expect(B.no.isVisible()).toBe(false);expect(B.ok.isVisible()).toBe(false);expect(B.cancel.isVisible()).toBe(false)});it("should show the close tool",function(){A.progress("a","b");expect(A.down("tool").isVisible()).toBe(true)})})});describe("callbacks",function(){var B;beforeEach(function(){B=function(C){if(typeof C=="string"){C=A.msgButtons[C]}C.onClick({button:0,preventDefault:Ext.emptyFn,stopEvent:Ext.emptyFn})}});afterEach(function(){B=null});it("should pass ok when ok is clicked",function(){var C;A.show({buttons:A.OK,callback:function(D){C=D}});B("ok");expect(C).toBe("ok")});it("should pass cancel when cancel is clicked",function(){var C;A.show({buttons:A.CANCEL,callback:function(D){C=D}});B("cancel");expect(C).toBe("cancel")});it("should pass yes when yes is clicked",function(){var C;A.show({buttons:A.YES,callback:function(D){C=D}});B("yes");expect(C).toBe("yes")});it("should pass no when no is clicked",function(){var C;A.show({buttons:A.NO,callback:function(D){C=D}});B("no");expect(C).toBe("no")});it("should pass cancel when close is pressed",function(){var C;A.show({buttons:A.OKCANCEL,callback:function(D){C=D}});B(A.down("tool"));expect(C).toBe("cancel")})});describe("closable",function(){it("should be closable by default",function(){A.show({title:"a",msg:"b"});expect(A.down("tool").isVisible()).toBe(true)});it("should not show the tool if closable it set to false",function(){A.show({title:"a",msg:"b",closable:false});expect(A.down("tool").isVisible()).toBe(false)})});describe("layouts",function(){var L=[null,10,250,10000],M="a b c d e f g h i j k l m n o p q r s t u v w x y z",N=M+" "+M.toUpperCase()+"<br>",C=["line1<br>","line2<br>","line3<br>","line4<br>","line5<br>","<ol>","<li>list1 list1 list1</li>","<li>list2 list2 list2</li>","</ol>","line6<br>"].join(""),U=250,I=110,T=600,H=500,O=4,B=10,S=N+"<br>"+C,K=5,G=3,R=5,F=4,J=6,E=0,Q=1,P=Ext.MessageBox;function D(X){var a=P.el.getHeight(),d=P.el.getWidth(),c=P.msg.el.getHeight(),f=P.msg.el.getWidth(),g=P.bottomTb.el.getHeight(),W=P.bottomTb.el.getWidth(),e=P.header.el.getHeight(),V=P.header.el.getWidth(),Z=P.promptContainer.el.getWidth(),Y=Z-f,b={el:{h:[I,H],w:[U,T]},msg:{el:{w:d-Y-((O+B+Q)*2),h:a-(K+e+B*2+R+F+g+O)}}};expect(P).toHaveLayout(b)}xdescribe("Standard Layouts (Msg Only - No Icons)",function(){beforeEach(function(){P=Ext.MessageBox=Ext.Msg=new Ext.window.MessageBox()});afterEach(function(){Ext.destroy(P);P=null});it("should layout an unspecified width (shrinkWrap)",function(){var V={title:"TEXT",modal:true,buttons:Ext.MessageBox.OKCANCEL,msg:S};P.show(V);expect(P.el.getHeight()).toBeLessThan(P.el.getWidth());D(true);P.hide()});it("should layout a configured width",function(){var V={width:250,title:"TEXT",modal:true,buttons:Ext.MessageBox.OKCANCEL,msg:S};P.show(V);D();P.hide()});it("should honor minWidth constraints",function(){var V={width:10,title:"TEXT",modal:true,buttons:Ext.MessageBox.OKCANCEL,msg:S};P.show(V);D();P.hide()});it("should honor maxWidth constraints",function(){var V={width:10000,title:"TEXT",modal:true,buttons:Ext.MessageBox.OKCANCEL,msg:S};P.show(V);D();P.hide()})});xdescribe("Generated Test",function(){beforeEach(function(){P=Ext.MessageBox=Ext.Msg=new Ext.window.MessageBox()});afterEach(function(){Ext.destroy(P);P=null});it("should layout shrinkWrap",function(){var V={title:"TEXT",modal:true,buttons:Ext.MessageBox.OKCANCEL,msg:S};P.show(V);expect(P).toHaveLayout({"el":{"xywh":"0 0 582 229"},"body":{"xywh":"0 0 572 168"},"items":{"container-1004":{"el":{"xywh":"5 27 572 168"},"items":{"container-1003":{"el":{"xywh":"10 10 552 148"},"items":{"messagebox-1001-displayfield":{"el":{"xywh":"0 0 547 143"},"inputRow":{"xywh":"0 0 547 143"},"bodyEl":{"xywh":"0 0 547 143"},"inputEl":{"xywh":"0 0 547 143"}}}}}}},"dockedItems":{"messagebox-1001_header":{"el":{"xywh":"0 0 582 22"},"body":{"xywh":"6 6 570 16"},"items":{"messagebox-1001_header_hd":{"el":{"xywh":"6 6 553 16"},"textEl":{"xywh":"6 6 553 16"}},"tool-1009":{"el":{"xywh":"561 7 15 15"},"toolEl":{"xywh":"561 7 15 15"}}}},"messagebox-1001-toolbar":{"el":{"xywh":"5 198 572 26"},"items":{"button-1005":{"el":{"xywh":"208 2 75 22"},"btnIconEl":{"xywh":"211 21 0 0"},"btnInnerEl":{"xywh":"211 5 69 16"},"btnWrap":{"xywh":"211 8 69 13"},"btnEl":{"xywh":"211 5 69 16"}},"button-1008":{"el":{"xywh":"289 2 75 22"},"btnIconEl":{"xywh":"292 21 0 0"},"btnInnerEl":{"xywh":"292 5 69 16"},"btnWrap":{"xywh":"292 8 69 13"},"btnEl":{"xywh":"292 5 69 16"}}}}}})});it("should layout configured width",function(){var V={width:250,title:"TEXT",modal:true,buttons:Ext.MessageBox.OKCANCEL,msg:S};P.show(V);expect(P).toHaveLayout({"el":{"xywh":"0 0 260 257"},"body":{"xywh":"0 0 250 196"},"items":{"container-1004":{"el":{"xywh":"5 27 250 196"},"items":{"container-1003":{"el":{"xywh":"10 10 230 176"},"items":{"messagebox-1001-displayfield":{"el":{"xywh":"0 0 230 171"},"inputRow":{"xywh":"0 0 230 171"},"bodyEl":{"xywh":"0 0 230 171"},"inputEl":{"xywh":"0 0 230 171"}}}}}}},"dockedItems":{"messagebox-1001_header":{"el":{"xywh":"0 0 260 22"},"body":{"xywh":"6 6 248 16"},"items":{"messagebox-1001_header_hd":{"el":{"xywh":"6 6 231 16"},"textEl":{"xywh":"6 6 231 16"}},"tool-1009":{"el":{"xywh":"239 7 15 15"},"toolEl":{"xywh":"239 7 15 15"}}}},"messagebox-1001-toolbar":{"el":{"xywh":"5 226 250 26"},"items":{"button-1005":{"el":{"xywh":"47 2 75 22"},"btnIconEl":{"xywh":"50 21 0 0"},"btnInnerEl":{"xywh":"50 5 69 16"},"btnWrap":{"xywh":"50 8 69 13"},"btnEl":{"xywh":"50 5 69 16"}},"button-1008":{"el":{"xywh":"128 2 75 22"},"btnIconEl":{"xywh":"131 21 0 0"},"btnInnerEl":{"xywh":"131 5 69 16"},"btnWrap":{"xywh":"131 8 69 13"},"btnEl":{"xywh":"131 5 69 16"}}}}}})})})})})