var validator=require("../validator.js");var CONTENT_TYPES={"image/jpeg":"jpeg","image/png":"png"};var VALID_POST_DATA={svg:"string",type:"string",width:"string",height:"string"};function verifyImageData(A){if(typeof A!=="string"){return }if(A.substr(0,5)==="<?xml"){A="data:image/svg+xml;utf8,"+encodeURIComponent(A)}return A}function convert(A){A=validator.verifyConfig(A,VALID_POST_DATA);A.data=verifyImageData(A.svg);delete A.svg;if(A.type in CONTENT_TYPES){A.format=CONTENT_TYPES[A.type];A.contentType=A.type}else{A.format="png";A.contentType="image/png"}A.width=A.width||0;A.height=A.height||0;A.scale=A.scale||1;return A}module.exports={convert:convert}