Ext.define("Ext.chart.MarkerHolder",{extend:"Ext.Mixin",mixinConfig:{id:"markerHolder",after:{constructor:"constructor",preRender:"preRender"},before:{destroy:"destroy"}},isMarkerHolder:true,surfaceMatrix:null,inverseSurfaceMatrix:null,deprecated:{6:{methods:{getBoundMarker:{message:"Please use the 'getMarker' method instead.",fn:function(B){var A=this.boundMarkers[B];return A?[A]:A}}}}},constructor:function(){this.boundMarkers={};this.cleanRedraw=false},bindMarker:function(B,A){var C=this,D=C.boundMarkers;if(A&&A.isMarkers){if(D[B]&&D[B]===A){Ext.log.warn(C.getId()," (MarkerHolder): the Markers instance '",A.getId(),"' is already bound under the name '",B,"'.")}C.releaseMarker(B);D[B]=A;A.on("destroy",C.onMarkerDestroy,C)}},onMarkerDestroy:function(A){this.releaseMarker(A)},releaseMarker:function(A){var C=this.boundMarkers,B;if(A&&A.isMarkers){for(B in C){if(C[B]===A){delete C[B];break}}}else{B=A;A=C[B];delete C[B]}return A||null},getMarker:function(A){return this.boundMarkers[A]||null},preRender:function(){var F=this,G=F.getId(),D=F.boundMarkers,E=F.getParent(),C,A,B;if(F.surfaceMatrix){B=F.surfaceMatrix.set(1,0,0,1,0,0)}else{B=F.surfaceMatrix=new Ext.draw.Matrix()}F.cleanRedraw=!F.attr.dirty;if(!F.cleanRedraw){for(C in D){A=D[C];if(A){A.clear(G)}}}while(E&&E.attr&&E.attr.matrix){B.prependMatrix(E.attr.matrix);E=E.getParent()}B.prependMatrix(E.matrix);F.surfaceMatrix=B;F.inverseSurfaceMatrix=B.inverse(F.inverseSurfaceMatrix)},putMarker:function(D,A,C,G,E){var B=this.boundMarkers[D],F=this.getId();if(B){B.putMarkerFor(F,A,C,G,E)}},getMarkerBBox:function(C,B,D){var A=this.boundMarkers[C],E=this.getId();if(A){return A.getMarkerBBoxFor(E,B,D)}},destroy:function(){var C=this.boundMarkers,B,A;for(B in C){A=C[B];A.destroy()}}})