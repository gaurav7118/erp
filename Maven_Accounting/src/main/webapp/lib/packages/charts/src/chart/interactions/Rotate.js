Ext.define("Ext.chart.interactions.Rotate",{extend:"Ext.chart.interactions.Abstract",type:"rotate",alias:"interaction.rotate",config:{gesture:"rotate",gestures:{rotate:"onRotate",rotateend:"onRotate",dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd"},rotation:0},oldRotations:null,getAngle:function(E){var C=this,B=C.getChart(),D=B.getEventXY(E),A=B.getCenter();return Math.atan2(D[1]-A[1],D[0]-A[0])},getRadius:function(A){return this.getChart().getRadius()},getEventRadius:function(G){var E=this,D=E.getChart(),F=D.getEventXY(G),A=D.getCenter(),C=F[0]-A[0],B=F[1]-A[1];return Math.sqrt(C*C+B*B)},onGestureStart:function(D){var C=this,B=C.getRadius(D),A=C.getEventRadius(D);if(B>=A){C.lockEvents("drag");C.angle=C.getAngle(D);C.oldRotations={};return false}},onGesture:function(B){var A=this,C=A.getAngle(B)-A.angle;if(A.getLocks().drag===A){A.doRotateTo(C,true);return false}},doRotateTo:function(D,A,B){var M=this,K=M.getChart(),J=K.getAxes(),F=K.getSeries(),L=M.oldRotations,C,I,G,E,H;if(!B){K.suspendAnimation()}for(E=0,H=J.length;E<H;E++){C=J[E];G=L[C.getId()]||(L[C.getId()]=C.getRotation());C.setRotation(D+(A?G:0))}for(E=0,H=F.length;E<H;E++){I=F[E];G=L[I.getId()]||(L[I.getId()]=I.getRotation());I.setRotation(D+(A?G:0))}M.setRotation(D+(A?G:0));M.fireEvent("rotate",M,M.getRotation());M.sync();if(!B){K.resumeAnimation()}},rotateTo:function(C,B,A){this.doRotateTo(C,B,A);this.oldRotations={}},onGestureEnd:function(B){var A=this;if(A.getLocks().drag===A){A.onGesture(B);A.unlockEvents("drag");A.fireEvent("rotationEnd",A,A.getRotation());return false}},onRotate:function(A){}})