Ext.define("Ext.chart.series.sprite.Box",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.box",type:"box",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",depth:"number",orientation:"enums(vertical,horizontal)",showStroke:"bool",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},triggers:{x:"bbox",y:"bbox",width:"bbox",height:"bbox",depth:"bbox",orientation:"bbox"},defaults:{x:0,y:0,width:8,height:8,depth:8,orientation:"vertical",showStroke:false,saturationFactor:1,brightnessFactor:1,colorSpread:1,lineJoin:"bevel"}}},constructor:function(A){this.callParent([A]);this.topGradient=new Ext.draw.gradient.Linear({});this.rightGradient=new Ext.draw.gradient.Linear({});this.frontGradient=new Ext.draw.gradient.Linear({})},updatePlainBBox:function(D){var C=this.attr,B=C.x,G=C.y,E=C.width,A=C.height,F=C.depth;D.x=B-E*0.5;D.width=E+F;if(A>0){D.y=G;D.height=A+F}else{D.y=G+F;D.height=A-F}},render:function(L,M){var U=this,K=U.attr,R=K.x,J=K.y,F=J+K.height,I=J<F,E=K.width*0.5,V=K.depth,D=K.orientation==="horizontal",G=K.globalAlpha<1,C=K.fillStyle,N=Ext.draw.Color.create(C.isGradient?C.getStops()[0].color:C),H=K.saturationFactor,O=K.brightnessFactor,T=K.colorSpread,B=N.getHSV(),A={},S,Q,P;if(!K.showStroke){M.strokeStyle=Ext.draw.Color.RGBA_NONE}if(I){P=J;J=F;F=P}U.topGradient.setDegrees(D?0:80);U.topGradient.setStops([{offset:0,color:Ext.draw.Color.fromHSV(B[0],Ext.Number.constrain(B[1]*H,0,1),Ext.Number.constrain((0.5+T*0.1)*O,0,1))},{offset:1,color:Ext.draw.Color.fromHSV(B[0],Ext.Number.constrain(B[1]*H,0,1),Ext.Number.constrain((0.5-T*0.11)*O,0,1))}]);U.rightGradient.setDegrees(D?45:90);U.rightGradient.setStops([{offset:0,color:Ext.draw.Color.fromHSV(B[0],Ext.Number.constrain(B[1]*H,0,1),Ext.Number.constrain((0.5-T*0.14)*O,0,1))},{offset:1,color:Ext.draw.Color.fromHSV(B[0],Ext.Number.constrain(B[1]*(1+T*0.4)*H,0,1),Ext.Number.constrain((0.5-T*0.32)*O,0,1))}]);if(D){U.frontGradient.setDegrees(0)}else{U.frontGradient.setRadians(Math.atan2(J-F,E*2))}U.frontGradient.setStops([{offset:0,color:Ext.draw.Color.fromHSV(B[0],Ext.Number.constrain(B[1]*(1-T*0.1)*H,0,1),Ext.Number.constrain((0.5+T*0.1)*O,0,1))},{offset:1,color:Ext.draw.Color.fromHSV(B[0],Ext.Number.constrain(B[1]*(1+T*0.1)*H,0,1),Ext.Number.constrain((0.5-T*0.23)*O,0,1))}]);if(G||I){M.beginPath();M.moveTo(R-E,F);M.lineTo(R-E+V,F+V);M.lineTo(R+E+V,F+V);M.lineTo(R+E,F);M.closePath();A.x=R-E;A.y=J;A.width=E+V;A.height=V;M.fillStyle=(D?U.rightGradient:U.topGradient).generateGradient(M,A);M.fillStroke(K)}if(G){M.beginPath();M.moveTo(R-E,J);M.lineTo(R-E+V,J+V);M.lineTo(R-E+V,F+V);M.lineTo(R-E,F);M.closePath();A.x=R+E;A.y=F;A.width=V;A.height=J+V-F;M.fillStyle=(D?U.topGradient:U.rightGradient).generateGradient(M,A);M.fillStroke(K)}Q=L.roundPixel(J);M.beginPath();M.moveTo(R-E,Q);M.lineTo(R-E+V,J+V);M.lineTo(R+E+V,J+V);M.lineTo(R+E,Q);M.closePath();A.x=R-E;A.y=J;A.width=E+V;A.height=V;M.fillStyle=(D?U.rightGradient:U.topGradient).generateGradient(M,A);M.fillStroke(K);S=L.roundPixel(R+E);M.beginPath();M.moveTo(S,L.roundPixel(J));M.lineTo(R+E+V,J+V);M.lineTo(R+E+V,F+V);M.lineTo(S,F);M.closePath();A.x=R+E;A.y=F;A.width=V;A.height=J+V-F;M.fillStyle=(D?U.topGradient:U.rightGradient).generateGradient(M,A);M.fillStroke(K);S=L.roundPixel(R+E);Q=L.roundPixel(J);M.beginPath();M.moveTo(R-E,F);M.lineTo(R-E,Q);M.lineTo(S,Q);M.lineTo(S,F);M.closePath();A.x=R-E;A.y=F;A.width=E*2;A.height=J-F;M.fillStyle=U.frontGradient.generateGradient(M,A);M.fillStroke(K)}})