Ext.define("Ext.draw.modifier.Highlight",{extend:"Ext.draw.modifier.Modifier",alias:"modifier.highlight",config:{enabled:false,highlightStyle:null},preFx:true,applyHighlightStyle:function(B,A){A=A||{};if(this.getSprite()){Ext.apply(A,this.getSprite().self.def.normalize(B))}else{Ext.apply(A,B)}return A},prepareAttributes:function(A){if(!A.hasOwnProperty("highlightOriginal")){A.highlighted=false;A.highlightOriginal=Ext.Object.chain(A);A.highlightOriginal.prototype=A;A.highlightOriginal.removeFromInstance={}}if(this._previous){this._previous.prepareAttributes(A.highlightOriginal)}},updateSprite:function(B,A){if(B){if(this.getHighlightStyle()){this._highlightStyle=B.self.def.normalize(this.getHighlightStyle())}this.setHighlightStyle(B.config.highlight)}B.self.def.setConfig({defaults:{highlighted:false},processors:{highlighted:"bool"}});this.setSprite(B)},filterChanges:function(A,D){var E=this,F=A.highlightOriginal,C=E.getHighlightStyle(),B;if(A.highlighted){for(B in D){if(C.hasOwnProperty(B)){F[B]=D[B];delete D[B]}}}for(B in D){if(B!=="highlighted"&&F[B]===D[B]){delete D[B]}}return D},pushDown:function(E,G){var F=this.getHighlightStyle(),C=E.highlightOriginal,I=C.removeFromInstance,D,A,H,B;if(G.hasOwnProperty("highlighted")){D=G.highlighted;delete G.highlighted;if(this._previous){G=this._previous.pushDown(C,G)}G=this.filterChanges(E,G);if(D!==E.highlighted){if(D){for(A in F){if(A in G){C[A]=G[A]}else{H=E.template&&E.template.ownAttr;if(H&&!E.prototype.hasOwnProperty(A)){I[A]=true;C[A]=H.animationOriginal[A]}else{B=C.timers[A];if(B&&B.remove){I[A]=true}C[A]=E[A]}}if(C[A]!==F[A]){G[A]=F[A]}}}else{for(A in F){if(!(A in G)){G[A]=C[A]}delete C[A]}G.removeFromInstance=G.removeFromInstance||{};Ext.apply(G.removeFromInstance,I);C.removeFromInstance={}}G.highlighted=D}}else{if(this._previous){G=this._previous.pushDown(C,G)}G=this.filterChanges(E,G)}return G},popUp:function(A,B){B=this.filterChanges(A,B);Ext.draw.modifier.Modifier.prototype.popUp.call(this,A,B)}})