Ext.define("Ext.draw.sprite.Image",{extend:"Ext.draw.sprite.Rect",alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},defaults:{src:"",width:null,height:null}}},render:function(D,O){var J=this,I=J.attr,N=I.matrix,A=I.src,L=I.x,K=I.y,C=I.width,M=I.height,H=Ext.draw.sprite.Image.imageLoaders[A],G,E,F;if(H&&H.done){N.toContext(O);E=H.image;O.drawImage(E,L,K,C||(E.naturalWidth||E.width)/D.devicePixelRatio,M||(E.naturalHeight||E.height)/D.devicePixelRatio)}else{if(!H){G=new Image();H=Ext.draw.sprite.Image.imageLoaders[A]={image:G,done:false,pendingSprites:[J],pendingSurfaces:[D]};G.width=C;G.height=M;G.onload=function(){if(!H.done){H.done=true;for(F=0;F<H.pendingSprites.length;F++){H.pendingSprites[F].setDirty(true)}for(F in H.pendingSurfaces){H.pendingSurfaces[F].renderFrame()}}};G.src=A}else{Ext.Array.include(H.pendingSprites,J);Ext.Array.include(H.pendingSurfaces,D)}}var B=I.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;if(B){B.bbox&&this.renderBBox(D,O)}}})