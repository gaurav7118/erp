Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(A){var B=this;Ext.apply(B,A||{});B.all={};B.references={};B.onAvailableCallbacks={}},create:function(A,B){if(typeof A==="string"){return Ext.widget(A)}if(A.isComponent){return A}if("xclass" in A){return Ext.create(A.xclass,A)}return Ext.widget(A.xtype||B,A)},get:function(A){return this.all[A]},register:function(A){var E=this,D=E.all,C=A.getId(),B=E.onAvailableCallbacks;if(C===undefined){Ext.raise("Component id is undefined. Please ensure the component has an id.")}if(C in D){Ext.raise('Registering duplicate component id "'+C+'"')}D[C]=A;if(A.getReference&&A.getReference()){E.references[C]=A}++E.count;if(!E.hasFocusListener){Ext.on("focus",E.onGlobalFocus,E);E.hasFocusListener=true}B=B&&B[C];if(B&&B.length){E.notifyAvailable(A)}},unregister:function(A){var B=A.getId();if(A.getReference&&A.getReference()){this.references[B]=null;delete this.references[B]}this.all[B]=null;delete this.all[B];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var C=this,B=C.references,A;if(C.referencesDirty){for(A in B){if(B.hasOwnProperty(A)){B[A].fixReference()}}C.referencesDirty=false}},onAvailable:function(G,C,B){var F=this,E=F.onAvailableCallbacks,A=F.all,D;if(G in A){D=A[G];C.call(B||D,D)}else{if(G){if(!Ext.isArray(E[G])){E[G]=[]}E[G].push(function(H){C.call(B||H,H)})}}},notifyAvailable:function(B){var A=this.onAvailableCallbacks[B&&B.getId()]||[];while(A.length){(A.shift())(B)}},each:function(B,A){return Ext.Object.each(this.all,B,A)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(G){var D=this,B=G.toElement,H=G.fromElement,F=Ext.Component.fromElement(B),A=Ext.Component.fromElement(H),C,E;if(F===A){return }C=D.getCommonAncestor(A,F);if(A&&!(A.destroyed||A.destroying)){if(A.handleBlurEvent){A.handleBlurEvent(G)}for(E=A;E&&E!==C;E=E.getRefOwner()){if(!(E.destroyed||E.destroying)){E.onFocusLeave({event:G.event,type:"focusleave",target:H,relatedTarget:B,fromComponent:A,toComponent:F})}}}if(F&&!F.destroyed){if(F.handleFocusEvent){F.handleFocusEvent(G)}for(E=F;E&&E!==C;E=E.getRefOwner()){E.onFocusEnter({event:G.event,type:"focusenter",relatedTarget:H,target:B,fromComponent:A,toComponent:F})}}},getCommonAncestor:function(B,A){if(B===A){return B}while(B&&!(B.isAncestor(A)||B===A)){B=B.getRefOwner()}return B},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(B,D,C){var G=Ext.getDom(B),A=this.all,E=0,I,F,H;if(typeof D!=="number"){I=Ext.getDom(D);D=Number.MAX_VALUE}while(G&&G.nodeType===1&&E<D&&G!==I){F=G.getAttribute("data-componentid")||G.id;if(F){H=A[F];if(H&&(!C||Ext.ComponentQuery.is(H,C))){return H}E++}G=G.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},function(){Ext.getCmp=function(A){return Ext.ComponentManager.get(A)}})