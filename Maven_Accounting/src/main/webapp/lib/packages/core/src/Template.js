Ext.define("Ext.Template",{requires:["Ext.util.Format"],inheritableStatics:{from:function(B,A){B=Ext.getDom(B);return new this(B.value||B.innerHTML,A||"")}},useEval:Ext.isGecko,constructor:function(D){var F=this,B=arguments,A=[],C,E=B.length,G;F.initialConfig={};if(E===1&&Ext.isArray(D)){B=D;E=B.length}if(E>1){for(C=0;C<E;C++){G=B[C];if(typeof G==="object"){Ext.apply(F.initialConfig,G);Ext.apply(F,G)}else{A.push(G)}}}else{A.push(D)}F.html=A.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(A){var B=this;if(B.compiled){if(!B.fn){B.compile()}return B.fn(A).join("")}return B.evaluate(A)},evaluate:function(A){var F=this,C=!F.disableFormats,E=Ext.util.Format,B=F;function D(J,I,H,K,G){if(H==null||H===""){H=I}if(K&&C){if(G){G=[A[H]].concat(Ext.functionFactory("return ["+G+"];")())}else{G=[A[H]]}if(K.substr(0,5)==="this."){return B[K.substr(5)].apply(B,G)}else{if(E[K]){return E[K].apply(E,G)}else{return J}}}else{return A[H]!==undefined?A[H]:""}}return F.html.replace(F.tokenRe,D)},applyOut:function(A,B){var C=this;if(C.compiled){if(!C.fn){C.compile()}B.push.apply(B,C.fn(A))}else{B.push(C.apply(A))}return B},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(A,C){var B=this;B.html=A;B.compiled=!!C;B.fn=null;return B},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var B=this,A;A=B.html.replace(B.compileARe,"\\\\").replace(B.compileBRe,"\\n").replace(B.compileCRe,"\\'").replace(B.tokenRe,B.regexReplaceFn.bind(B));A=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(B.useEval?"$=":"return")+" function(v){return ['"+A+"'];};";B.fn=B.useEval?B.evalCompiled(A):(new Function("Ext",A))(Ext);B.compiled=true;return B},evalCompiled:function($){eval($);return $},regexReplaceFn:function(D,C,B,E,A){if(C==null||C===""){C='"'+B+'"'}else{if(this.stringFormat){C=parseInt(C)+1}}if(E&&this.disableFormats!==true){A=A?","+A:"";if(E.substr(0,5)==="this."){E=E+"("}else{if(Ext.util.Format[E]){E="fm."+E+"("}else{return D}}return"',"+E+"v["+C+"]"+A+"),'"}else{return"',v["+C+"] == undefined ? '' : v["+C+"],'"}},insertFirst:function(B,A,C){return this.doInsert("afterBegin",B,A,C)},insertBefore:function(B,A,C){return this.doInsert("beforeBegin",B,A,C)},insertAfter:function(B,A,C){return this.doInsert("afterEnd",B,A,C)},append:function(B,A,C){return this.doInsert("beforeEnd",B,A,C)},doInsert:function(B,D,A,E){var C=Ext.DomHelper.insertHtml(B,Ext.getDom(D),this.apply(A));return E?Ext.get(C):C},overwrite:function(C,A,D){var B=Ext.DomHelper.overwrite(Ext.getDom(C),this.apply(A));return D?Ext.get(B):B}},function(D){var C=/\{\d+\}/,A=function(F){if(C.test(F)){F=new D(F,B);return function(){return F.apply(arguments)}}else{return function(){return F}}},B={useFormat:false,compiled:true,stringFormat:true},E={};Ext.String.format=Ext.util.Format.format=function(G){var F=E[G]||(E[G]=A(G));return F.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}})