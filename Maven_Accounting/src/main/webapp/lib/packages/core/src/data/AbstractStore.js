Ext.define("Ext.data.AbstractStore",{mixins:["Ext.mixin.Observable","Ext.mixin.Factoryable"],requires:["Ext.util.Collection","Ext.data.schema.Schema","Ext.util.Filter"],factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:null,remoteSort:{lazy:true,$value:false},remoteFilter:{lazy:true,$value:false},groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isStore:true,updating:0,constructor:function(B){var C=this,A;C.isInitializing=true;C.mixins.observable.constructor.call(C,B);C.isInitializing=false;A=C.getStoreId();if(!A&&(B&&B.id)){C.setStoreId(A=B.id)}if(A){Ext.data.StoreManager.register(C)}},getCount:function(){return this.getData().getCount()},rangeCached:function(B,A){return this.getData().getCount()>=Math.max(B,A)},find:function(F,E,G,H,A,D){var C=!H,B=!!(C&&D);return this.getData().findIndex(F,E,G,C,B,!A)},findRecord:function(){var B=this,A=B.find.apply(B,arguments);return A!==-1?B.getAt(A):null},findExact:function(B,A,C){return this.getData().findIndexBy(function(D){return D.isEqual(D.get(B),A)},this,C)},findBy:function(B,A,C){return this.getData().findIndexBy(B,A,C)},getAt:function(A){return this.getData().getAt(A)||null},getRange:function(D,B,C){var A=this.getData().getRange(D,Ext.isNumber(B)?B+1:B);if(C&&C.callback){C.callback.call(C.scope||this,A,D,B,C)}return A},getFilters:function(B){var A=this.callParent();if(!A&&B!==false){this.setFilters([]);A=this.callParent()}return A},applyFilters:function(B,A){var C;if(!A){A=this.createFiltersCollection();C=true}A.add(B);if(C){this.onRemoteFilterSet(A,this.getRemoteFilter())}return A},getSorters:function(B){var A=this.callParent();if(!A&&B!==false){this.setSorters([]);A=this.callParent()}return A},applySorters:function(B,A){var C;if(!A){A=this.createSortersCollection();C=true}A.add(B);if(C){this.onRemoteSortSet(A,this.getRemoteSort())}return A},filter:function(B,C,A){if(Ext.isString(B)){B={property:B,value:C}}this.suppressNextFilter=!!A;this.getFilters().add(B);this.suppressNextFilter=false},removeFilter:function(A,D){var C=this,B=C.getFilters();C.suppressNextFilter=!!D;if(A instanceof Ext.util.Filter){B.remove(A)}else{B.removeByKey(A)}C.suppressNextFilter=false},updateRemoteSort:function(A){this.onRemoteSortSet(this.getSorters(false),A)},updateRemoteFilter:function(A){this.onRemoteFilterSet(this.getFilters(false),A)},addFilter:function(B,A){this.suppressNextFilter=!!A;this.getFilters().add(B);this.suppressNextFilter=false},filterBy:function(B,A){this.getFilters().add({filterFn:B,scope:A||this})},clearFilter:function(C){var B=this,A=B.getFilters(false);if(!A||A.getCount()===0){return }B.suppressNextFilter=!!C;A.removeAll();B.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var A=this.getSorters(false);return !!(A&&A.length>0)||this.isGrouped()},addFieldTransform:function(E){if(E.getTransform()){return }var D=E.getProperty(),C=this.getModel(),A,B;if(C){A=C.getField(D);B=A?A.getSortType():null}if(B&&B!==Ext.identityFn){E.setTransform(B)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var E=this,F=[],D=E.getFilters(),B=E.getGrouper(),G,C,A;E.getSorters().each(function(H){F[F.length]=H.getState();C=true});if(E.statefulFilters&&E.saveStatefulFilters){C=true;G=[];D.each(function(H){G[G.length]=H.getState()})}if(B){C=true}if(C){A={};if(F.length){A.sorters=F}if(G){A.filters=G}if(B){A.grouper=B.getState()}}return A},applyState:function(E){var C=this,B=E.sorters,A=E.filters,D=E.grouper;if(B){C.getSorters().replaceAll(B)}if(A){C.saveStatefulFilters=true;C.getFilters().replaceAll(A)}if(D){C.setGrouper(D)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var A=this;if(A.getStoreId()){Ext.data.StoreManager.unregister(A)}A.callParent();A.onDestroy()},sort:function(C,B,D){var A=this;if(arguments.length===0){if(A.getRemoteSort()){A.load()}else{A.forceLocalSort()}}else{A.getSorters().addSort(C,B,D)}},onBeforeCollectionSort:function(A,B){if(B){this.fireEvent("beforesort",this,B.getRange())}},onSorterEndUpdate:function(){var A=this,B;B=A.getSorters(false);if(A.settingGroups||!B){return }B=B.getRange();if(B.length){if(A.getRemoteSort()){A.load({callback:function(){A.fireEvent("sort",A,B)}})}else{A.fireEvent("datachanged",A);A.fireEvent("refresh",A);A.fireEvent("sort",A,B)}}else{A.fireEvent("sort",A,B)}},onFilterEndUpdate:function(){var B=this,A=B.suppressNextFilter;if(B.getRemoteFilter()){B.getFilters().each(function(C){if(C.getInitialConfig().filterFn){Ext.raise("Unable to use a filtering function in conjunction with remote filtering.")}});B.currentPage=1;if(!A){B.load()}}else{if(!A){B.fireEvent("datachanged",B);B.fireEvent("refresh",B)}}if(B.trackStateChanges){B.saveStatefulFilters=true}B.fireEvent("filterchange",B,B.getFilters().getRange())},updateGroupField:function(A){if(A){this.setGrouper({property:A,direction:this.getGroupDir()})}else{this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(A,D){var B=this,C=B.getSorters(false),E=A||(C&&C.length);if(A&&typeof A==="string"){A={property:A,direction:D||B.getGroupDir()}}B.settingGroups=true;B.getData().setGrouper(A);delete B.settingGroups;if(E){if(B.getRemoteSort()){B.load({scope:B,callback:B.fireGroupChange})}else{B.fireEvent("datachanged",B);B.fireEvent("refresh",B);B.fireGroupChange()}}else{B.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent("groupchange",this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var A=this.getGrouper(),B="";if(A){B=A.getProperty()}return B},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(A){this.group(A);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(A,B){if(A){A[B?"on":"un"]("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(B,C){var A=this;if(B){B[C?"on":"un"]("endupdate",A.onSorterEndUpdate,A);A.getData()[C?"un":"on"]("beforesort",A.onBeforeCollectionSort,A)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}})