Ext.define("Ext.data.request.Base",{requires:["Ext.Deferred"],mixins:["Ext.mixin.Factoryable"],factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(A){var B=this;Ext.apply(B,A.options||{},A.ownerConfig);B.id=++Ext.data.Connection.requestId;B.owner=A.owner;B.options=A.options;B.requestOptions=A.requestOptions},start:function(){var A=this,B=A.getTimeout();if(B&&A.async){A.timer=Ext.defer(A.onTimeout,B,A)}},abort:function(){var A=this;A.clearTimer();if(!A.timedout){A.aborted=true}A.abort=Ext.emptyFn},createDeferred:function(){return(this.deferred=new Ext.Deferred())},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var A=this.getPromise();return A.then.apply(A,arguments)},onComplete:function(){var C=this,B=C.deferred,A=C.result;C.clearTimer();if(B){if(C.success){B.resolve(A)}else{B.reject(A)}}},onTimeout:function(){var A=this;A.timedout=true;A.timer=null;A.abort(true)},getTimeout:function(){return this.timeout},clearTimer:function(){var A=this.timer;if(A){clearTimeout(A);this.timer=null}},destroy:function(){var A=this;A.abort();A.owner=A.options=A.requestOptions=A.result=null;A.callParent()},privates:{createException:function(){var B=this,A;A={request:B,requestId:B.id,status:B.aborted?-1:0,statusText:B.aborted?"transaction aborted":"communication failure",getResponseHeader:B._getHeader,getAllResponseHeaders:B._getHeaders};if(B.aborted){A.aborted=true}if(B.timedout){A.timedout=true}return A},_getHeader:function(A){var B=this.headers;return B&&B[A.toLowerCase()]},_getHeaders:function(){return this.headers}}})