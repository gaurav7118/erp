Ext.define("Ext.data.session.ChildChangesVisitor",{extend:"Ext.data.session.ChangesVisitor",constructor:function(){this.seen={};this.callParent(arguments)},setupOptions:function(A){this.callParent([A]);A.serialize=false},onDirtyRecord:function(A){if(this.callParent(arguments)!==false){if(!A.$source&&(A.dropped||!A.phantom)){this.readEntity(A)}}},readEntity:function(F){var G=this,E=G.readKey,B=F.entityName,C=F.id,A=G.seen,H=B+C,I,D;if(A[H]){return }A[H]=true;I=G.result||(G.result={});D=I[B]||(I[B]={});D=D[E]||(D[E]=[]);D.push(Ext.apply({},F.modified,F.data))}})