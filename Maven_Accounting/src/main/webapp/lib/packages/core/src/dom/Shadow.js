Ext.define("Ext.dom.Shadow",{extend:"Ext.dom.Underlay",alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:Ext.baseCSSPrefix+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(B){var D=this,E,C,F,A;D.callParent([B]);D.elementConfig={cls:D.cls,role:"presentation"};F=D.offset;A=Math.floor(F/2);D.opacity=50;switch(D.mode.toLowerCase()){case"drop":E={x:0,y:0,w:F,h:F};if(Ext.supports.CSS3BoxShadow){C={x:F,y:F,h:-F,w:-F}}else{C={x:-A,y:-A,h:-A,w:-A}}break;case"sides":E={x:-F,y:0,w:F*2,h:F};if(Ext.supports.CSS3BoxShadow){C={x:0,y:F,h:-F,w:0}}else{C={x:1+A-2*F,y:-(1+A),h:-1,w:A-1}}break;case"frame":E={x:-F,y:-F,w:F*2,h:F*2};if(Ext.supports.CSS3BoxShadow){C={x:0,y:0,h:0,w:0}}else{C={x:1+A-2*F,y:1+A-2*F,h:F-A-1,w:F-A-1}}break;case"bottom":E={x:-F,y:0,w:F*2,h:F};if(Ext.supports.CSS3BoxShadow){C={x:0,y:F,h:-F,w:0}}else{C={x:0,y:F,h:0,w:0}}break}D.offsets=C;D.outerOffsets=E},getShadowSize:function(){var B=this,D=B.el?B.offset:0,A=[D,D,D,D],C=B.mode.toLowerCase();if(B.el&&C!=="frame"){A[0]=0;if(C=="drop"){A[3]=0}}return A},boxShadowProperty:(function(){var B="boxShadow",A=document.documentElement.style;if(!("boxShadow" in A)){if("WebkitBoxShadow" in A){B="WebkitBoxShadow"}else{if("MozBoxShadow" in A){B="MozBoxShadow"}}}return B}()),beforeShow:function(){var B=this,A=B.el.dom.style,C=B.shim;if(Ext.supports.CSS3BoxShadow){A[B.boxShadowProperty]="0 0 "+(B.offset+2)+"px #888"}else{A.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+B.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(B.offset)+")"}if(C){C.realign()}},setOpacity:function(A){var B=this.el;if(B){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){A=Math.floor(A*100/2)/100}this.opacity=A;B.setOpacity(A)}}})