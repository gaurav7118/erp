Ext.define("Ext.fx.runner.Css",{extend:"Ext.Evented",requires:["Ext.fx.Animation"],prefixedProperties:{"transform":true,"transform-origin":true,"perspective":true,"transform-style":true,"transition":true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,"animation":true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{"top":true,"right":true,"bottom":true,"left":true,"width":true,"height":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,"translate":true,"translateX":true,"translateY":true,"translateZ":true,"translate3d":true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var A=this;A.transformMethods=Ext.feature.has.Css3dTransforms?A.transformMethods3d:A.transformMethodsNo3d;A.vendorPrefix=Ext.browser.getStyleDashPrefix();A.ruleStylesCache={};A.callParent()},getStyleSheet:function(){var C=this.styleSheet,A,B;if(!C){A=document.createElement("style");A.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(A);B=document.styleSheets;this.styleSheet=C=B[B.length-1]}return C},applyRules:function(I){var G=this.getStyleSheet(),K=this.ruleStylesCache,J=G.cssRules,C,E,H,B,D,A,F;for(C in I){E=I[C];H=K[C];if(H===undefined){D=J.length;G.insertRule(C+"{}",D);H=K[C]=J.item(D).style}B=H.$cache;if(!B){B=H.$cache={}}for(A in E){F=this.formatValue(E[A],A);A=this.formatName(A);if(B[A]!==F){B[A]=F;if(F===null){H.removeProperty(A)}else{H.setProperty(A,F,"important")}}}}return this},applyStyles:function(D){var G,C,F,B,A,E;for(G in D){if(D.hasOwnProperty(G)){C=document.getElementById(G);if(!C){continue}F=C.style;B=D[G];for(A in B){if(B.hasOwnProperty(A)){E=this.formatValue(B[A],A);A=this.formatName(A);if(E===null){F.removeProperty(A)}else{F.setProperty(A,E,"important")}}}}}return this},formatName:function(B){var A=this.formattedNameCache,C=A[B];if(!C){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[B]){C=this.vendorPrefix+B}else{C=B}A[B]=C}return C},formatValue:function(I,B){var G=typeof I,K=this.DEFAULT_UNIT_LENGTH,E,A,D,F,C,J,H;if(I===null){return""}if(G=="string"){if(this.lengthProperties[B]){H=I.match(this.lengthUnitRegex)[1];if(H.length>0){if(H!==K){Ext.Logger.error("Length unit: '"+H+"' in value: '"+I+"' of property: '"+B+"' is not valid for animation. Only 'px' is allowed")}}else{return I+K}}return I}else{if(G=="number"){if(I==0){return"0"}if(this.lengthProperties[B]){return I+K}if(this.angleProperties[B]){return I+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[B]){return I+this.DEFAULT_UNIT_DURATION}}else{if(B==="transform"){E=this.transformMethods;C=[];for(D=0,F=E.length;D<F;D++){A=E[D];C.push(A+"("+this.formatValue(I[A],A)+")")}return C.join(" ")}else{if(Ext.isArray(I)){J=[];for(D=0,F=I.length;D<F;D++){J.push(this.formatValue(I[D],B))}return(J.length>0)?J.join(", "):"none"}}}}return I}})