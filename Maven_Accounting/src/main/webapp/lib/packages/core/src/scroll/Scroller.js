Ext.define("Ext.scroll.Scroller",{extend:"Ext.Evented",alias:"scroller.scroller",mixins:["Ext.mixin.Factoryable"],uses:["Ext.scroll.TouchScroller","Ext.scroll.DomScroller"],factoryConfig:{defaultType:"dom"},isScroller:true,_spacerCls:Ext.baseCSSPrefix+"domscroller-spacer",config:{direction:undefined,directionLock:false,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:true,y:true,spacerXY:null},statics:{create:function(A){return Ext.Factory.scroller(A,Ext.supports.Touch?"touch":"dom")}},constructor:function(A){var B=this;B.position={x:0,y:0};B.callParent([A]);B.onDomScrollEnd=Ext.Function.createBuffered(B.onDomScrollEnd,100,B)},destroy:function(){var A=this;A.setX(Ext.emptyString);A.setY(Ext.emptyString);A.setElement(null);A.onDomScrollEnd=A._partners=A.component=null;A.callParent()},addPartner:function(D,B){var C=this,E=C._partners||(C._partners={}),A=D._partners||(D._partners={});E[D.getId()]={scroller:D,axis:B};A[C.getId()]={scroller:C,axis:B}},applyElement:function(B,A){var D=this,C,E;if(A){D.scrollListener.destroy()}if(B){if(B.isElement){C=B}else{C=Ext.get(B);if(!C&&(typeof B==="string")){Ext.raise("Cannot create Ext.scroll.Scroller instance. Element with id '"+B+"' not found.")}}if(C.dom===document.body){C=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement));E=Ext.get(Ext.isIE9m?window:document)}else{E=C}D.scrollListener=E.on({scroll:D.onDomScroll,scope:D,destroyable:true});return C}},getClientSize:function(){var A=this.getElement().dom;return{x:A.clientWidth,y:A.clientHeight}},getScrollbarSize:function(){var F=this,B=0,J=0,E,D,I,H,G,C,A;if(F.isDomScroller||Ext.supports.touchScroll===1){E=F.getElement();if(E&&!E.destroyed){I=F.getX();H=F.getY();D=E.dom;if(I||H){A=Ext.getScrollbarSize()}if(I==="scroll"){G=true}else{if(I){G=D.scrollWidth>D.clientWidth}}if(H==="scroll"){C=true}else{if(H){C=D.scrollHeight>D.clientHeight}}if(G){J=A.height}if(C){B=A.width}}}return{width:B,height:J}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.fireEvent("refresh",this);return this},removePartner:function(B){var C=this._partners,A=B._partners;if(C){delete C[B.getId()]}if(A){delete (A[this.getId()])}},scrollBy:function(C,B,D){var A=this.getPosition();if(C){if(C.length){D=B;B=C[1];C=C[0]}else{if(typeof C!=="number"){D=B;B=C.y;C=C.x}}}C=(typeof C==="number")?C+A.x:null;B=(typeof B==="number")?B+A.y:null;return this.doScrollTo(C,B,D)},scrollIntoView:function(D,E,B,G){var I=this,H=I.getPosition(),F,A,J,C=I.getElement();if(D){F=Ext.fly(D).getScrollIntoViewXY(C,H.x,H.y);A=(E===false)?H.x:F.x;J=F.y;if(G){I.on({scrollend:"doHighlight",scope:I,single:true,args:[D,G]})}I.doScrollTo(A,J,B)}},isInView:function(C){var D=this,A={x:false,y:false},E,F=D.getElement(),B;if(C&&F.contains(C)){B=F.getRegion();E=Ext.fly(C).getRegion();A.x=E.right>B.left&&E.left<B.right;A.y=E.bottom>B.top&&E.top<B.bottom}return A},scrollTo:function(A,D,B){var C;if(A){if(A.length){B=D;D=A[1];A=A[0]}else{if(typeof A!=="number"){B=D;D=A.y;A=A.x}}}if(A<0||D<0){C=this.getMaxPosition();if(A<0){A+=C.x}if(D<0){D+=C.y}}this.doScrollTo(A,D,B)},updateDirection:function(C){var B=this,A,D;if(!C){A=B.getX();D=B.getY();if(A&&D){C=(D==="scroll"&&A==="scroll")?"both":"auto"}else{if(D){C="vertical"}else{if(A){C="horizontal"}}}B._direction=C}else{if(C==="auto"){A=true;D=true}else{if(C==="vertical"){A=false;D=true}else{if(C==="horizontal"){A=true;D=false}else{if(C==="both"){A="scroll";D="scroll"}}}}B.setX(A);B.setY(D)}},updateSize:function(D){var E=this,C=E.getElement(),B,A,F;if(C){B=E.getSpacer();if(D==null){B.hide()}else{if(typeof D==="number"){A=D;F=D}else{A=D.x||0;F=D.y||0}if(A>0){A-=1}if(F>0){F-=1}E.setSpacerXY({x:A,y:F});B.show()}}},deprecated:{"5":{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(A){return this.scrollTo(0,0,A)},scrollToEnd:function(A){return this.scrollTo(Infinity,Infinity,A)}}}},privates:{getSpacer:function(){var C=this,A=C._spacer,B;if(!A){B=C.getElement();A=C._spacer=B.createChild({cls:C._spacerCls,role:"presentation"});A.setVisibilityMode(2);B.position()}return A},applySpacerXY:function(B,A){if(A&&B.x===A.x&&B.y===A.y){B=undefined}return B},updateSpacerXY:function(A){this.getSpacer().setLocalXY(A.x,A.y)},convertX:function(A){return A},doHighlight:function(B,A){if(A!==true){Ext.fly(B).highlight(A)}else{Ext.fly(B).highlight()}},fireScrollStart:function(A,D){var C=this,B=C.component;C.invokePartners("onPartnerScrollStart",A,D);if(C.hasListeners.scrollstart){C.fireEvent("scrollstart",C,A,D)}if(B&&B.onScrollStart){B.onScrollStart(A,D)}Ext.GlobalEvents.fireEvent("scrollstart",C,A,D)},fireScroll:function(A,D){var C=this,B=C.component;C.invokePartners("onPartnerScroll",A,D);if(C.hasListeners.scroll){C.fireEvent("scroll",C,A,D)}if(B&&B.onScrollMove){B.onScrollMove(A,D)}Ext.GlobalEvents.fireEvent("scroll",C,A,D)},fireScrollEnd:function(A,D){var C=this,B=C.component;C.invokePartners("onPartnerScrollEnd",A,D);if(C.hasListeners.scrollend){C.fireEvent("scrollend",C,A,D)}if(B&&B.onScrollEnd){B.onScrollEnd(A,D)}Ext.GlobalEvents.fireEvent("scrollend",C,A,D)},initXStyle:function(){var B=this.getElement(),A=this.getX();if(B&&B.dom){if(!A){A="hidden"}else{if(A===true){A="auto"}}B.setStyle("overflow-x",A)}},initYStyle:function(){var A=this.getElement(),B=this.getY();if(A&&A.dom){if(!B){B="hidden"}else{if(B===true){B="auto"}}A.setStyle("overflow-y",B)}},invokePartners:function(H,A,G){var C=this,E=C._partners,B,F,D=H==="onPartnerScrollEnd";if(!C.suspendSync&!C.isReflecting){for(F in E){B=E[F].scroller;B.isReflecting=true;B[H](C,A,G);if(D){B.isReflecting=false}}}},clearReflecting:function(){this.isReflecting=false},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){if(this.suspendSync){this.suspendSync--}},updateDomScrollPosition:function(){var D=this,C=D.getElement(),B,A=D.position;if(C&&!C.destroyed){B=D.getElementScroll(C);A.x=B.left;A.y=B.top}D.positionDirty=false;return A},getElementScroll:function(A){return A.getScroll()},onDomScroll:function(){var D=this,B,A,E,C;if(D.isTouchScroller&&Ext.supports.touchScroll===2){C=D.getElement().dom;C.scrollTop=C.scrollLeft=0;return }B=D.updateDomScrollPosition();A=B.x;E=B.y;if(!D.isScrolling){D.isScrolling=Ext.isScrolling=true;D.fireScrollStart(A,E)}D.fireScroll(A,E);D.onDomScrollEnd()},onDomScrollEnd:function(){var C=this,B=C.getPosition(),A=B.x,D=B.y;C.isScrolling=Ext.isScrolling=false;C.trackingScrollLeft=A;C.trackingScrollTop=D;C.fireScrollEnd(A,D)},onPartnerScroll:function(C,A,D){var B=C._partners[this.getId()].axis;if(B){if(B==="x"){D=null}else{if(B==="y"){A=null}}}this.doScrollTo(A,D,false,true)},restoreState:function(){var B=this,A=B.getElement(),C;if(A){C=A.dom;if(B.trackingScrollTop!==undefined){C.scrollTop=B.trackingScrollTop;C.scrollLeft=B.trackingScrollLeft}}}}})