Ext.define("Ext.util.Sorter",{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(B,A){A=A||0;return function(C,H){var E=B.isCollection?B.items:B,G=E.length,D,F;for(F=0;F<G;++F){D=E[F].sort(C,H);if(D){return D}}return A&&A(C,H)}}},multiplier:1,constructor:function(A){if(A&&!this.isGrouper){if(!A.property===!A.sorterFn){Ext.raise("A Sorter requires either a property or a sorterFn.")}}this.initConfig(A)},getId:function(){var A=this._id;if(!A){A=this.getProperty();if(!A){A=Ext.id(null,"ext-sorter-")}this._id=A}return A},sort:function(A,B){return this.multiplier*this.sortFn(A,B)},sortFn:function(D,C){var F=this,E=F._transform,B=F._root,G=F._property,A,H;if(B){D=D[B];C=C[B]}A=D[G];H=C[G];if(E){A=E(A);H=E(H)}return(A>H)?1:(A<H?-1:0)},applyDirection:function(A){return A?A:"ASC"},updateDirection:function(A){this.multiplier=(A.toUpperCase()==="DESC")?-1:1},updateProperty:function(A){if(A){delete this.sortFn}},updateSorterFn:function(A){this.sortFn=A},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var B=this,A={root:B.getRoot(),property:B.getProperty(),direction:B.getDirection()};if(B._id){A.id=B._id}return A},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}})