Ext.define("Ext.util.translatable.Abstract",{extend:"Ext.Evented",requires:["Ext.fx.easing.Linear"],config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(A){this.mixins.observable.constructor.call(this,A);this.position={x:0,y:0}},factoryEasing:function(A){return Ext.factory(A,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(A){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(A))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(A))}},applyEasingX:function(A){return this.factoryEasing(A)},applyEasingY:function(A){return this.factoryEasing(A)},doTranslate:Ext.emptyFn,translate:function(A,C,B){if(B){return this.translateAnimated(A,C,B)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(A)&&typeof A=="number"){this.x=A}if(!isNaN(C)&&typeof C=="number"){this.y=C}this.doTranslate(A,C)},translateAxis:function(B,D,C){var A,E;if(B=="x"){A=D}else{E=D}return this.translate(A,E,C)},getPosition:function(){var B=this,A=B.position;A.x=-B.x;A.y=-B.y;return A},animate:function(B,A){this.activeEasingX=B;this.activeEasingY=A;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(B,H,F){var E=this;if(!Ext.isObject(F)){F={}}if(E.isAnimating){E.stopAnimation()}E.callback=F.callback;E.callbackScope=F.scope;var D=Ext.Date.now(),G=F.easing,C=(typeof B=="number")?(F.easingX||G||E.getEasingX()||true):null,A=(typeof H=="number")?(F.easingY||G||E.getEasingY()||true):null;if(C){C=E.factoryEasing(C);C.setStartTime(D);C.setStartValue(E.x);C.setEndValue(B);if("duration" in F){C.setDuration(F.duration)}}if(A){A=E.factoryEasing(A);A.setStartTime(D);A.setStartValue(E.y);A.setEndValue(H);if("duration" in F){A.setDuration(F.duration)}}return E.animate(C,A)},doAnimationFrame:function(){var E=this,C=E.activeEasingX,B=E.activeEasingY,D=Date.now(),A,F;if(!E.isAnimating){return }E.lastRun=D;if(C===null&&B===null){E.stopAnimation();return }if(C!==null){E.x=A=Math.round(C.getValue());if(C.isEnded){E.activeEasingX=null;E.fireEvent("axisanimationend",E,"x",A)}}else{A=E.x}if(B!==null){E.y=F=Math.round(B.getValue());if(B.isEnded){E.activeEasingY=null;E.fireEvent("axisanimationend",E,"y",F)}}else{F=E.y}if(E.lastX!==A||E.lastY!==F){E.doTranslate(A,F);E.lastX=A;E.lastY=F}E.fireEvent("animationframe",E,A,F)},stopAnimation:function(){var A=this;if(!A.isAnimating){return }A.activeEasingX=null;A.activeEasingY=null;A.isAnimating=false;Ext.AnimationQueue.stop(A.doAnimationFrame,A);A.fireEvent("animationend",A,A.x,A.y);if(A.callback){A.callback.call(A.callbackScope);A.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}this.callParent()}})