describe("Ext.CompositeElementLite",function(){var I,B,J,G=6,H=5,A=4,F=5,K=4,E=2,C=2,D=3,L=2,M=function(N){return document.getElementById(N)};beforeEach(function(){I=Ext.getBody().createChild({id:"mainRoot"});I.dom.innerHTML=['<div class="foo toFilter" id="a">','<div class="child1">c1</div>','<div class="child2">c2</div>','<div class="child1">c3</div>','<div class="child2">c4</div>',"</div>",'<div class="bar" id="b"></div>','<div class="baz" id="c"></div>','<div class="foo" id="d"></div>','<div class="bar" id="e"></div>','<div class="baz" id="f"></div>','<div class="foo toFilter" id="g"></div>','<div class="bar" id="h"></div>','<div class="baz" id="i"></div>','<div class="foo" id="j"></div>','<div class="bar" id="k"></div>','<div class="baz" id="l"></div>','<div class="foo" id="m"></div>','<div class="bar" id="n"></div>','<div class="foo" id="o"></div>','<div class="child1" id="p"></div>','<div class="child2" id="q"></div>','<div class="child1" id="r"></div>','<div class="child2" id="s"></div>','<div class="child1" id="t"></div>'].join("");J=function(N){B=new Ext.CompositeElementLite(N)}});afterEach(function(){I.destroy();J=I=B=null});describe("constructor",function(){});describe("add",function(){it("should accept a selector",function(){J();B.add(".foo");expect(B.getCount()).toBe(G)});it("should accept a selector with a root",function(){J();B.add(".child1","a");expect(B.getCount()).toBe(E)});it("should accept another CompositeElement",function(){var N=new Ext.CompositeElementLite();N.add(M("a"));N.add(M("b"));N.add(M("c"));J();B.add(N);expect(B.getCount()).toBe(3)});it("should accept an array of elements",function(){J();B.add([M("a"),M("b")]);expect(B.getCount()).toBe(2)});it("should accept a NodeList",function(){J();B.add(M("a").getElementsByTagName("div"));expect(B.getCount()).toBe(4)});it("should accept a single element",function(){J();B.add(M("a"));expect(B.getCount()).toBe(1)});it("should accept a null argument",function(){J();expect(B.add(null)).toBe(B)});it("should return the CompositeElement",function(){J();expect(B.add(".foo")).toBe(B)})});describe("item",function(){it("should return null if there are no items",function(){J();expect(B.item(0)).toBeNull()});it("should return null if an item at that index does not exist",function(){J(".foo");expect(B.item(G)).toBeNull()});it("should return the item at the specified index",function(){J(".foo");expect(B.item(2).dom.id).toBe("g")});describe("first",function(){it("should return null when there are no items",function(){J();expect(B.first()).toBeNull()});it("should return the first item",function(){J(".foo");expect(B.first().dom.id).toBe("a")})});describe("last",function(){it("should return null when there are no items",function(){J();expect(B.last()).toBeNull()});it("should return the last item",function(){J(".foo");expect(B.last().dom.id).toBe("o")})})});describe("each",function(){it("should never iterate if there are no items",function(){var N=0;J();B.each(function(){++N});expect(N).toBe(0)});it("should iterate over each item",function(){var N=0;J(".baz");B.each(function(){++N});expect(N).toBe(A)});it("should default the scope to the element",function(){var N;J(M("a"));B.each(function(O){N=(O==this)});expect(N).toBe(true)});it("should use a specified scope",function(){var O={},N;J(".foo");B.each(function(){N=this},O);expect(N).toBe(O)});it("should pass the element, the ce & the index",function(){var N;J(M("a"));B.each(function(Q,O,P){N=[Q.dom.id,O,P]});expect(N).toEqual(["a",B,0])});it("should exit upon returning false",function(){var N=0;J(".foo");B.each(function(O){if(O.dom.id=="d"){return false}++N});expect(N).toBe(1)});it("should return the CompositeElement",function(){J();expect(B.each(function(){})).toBe(B)})});describe("fill",function(){it("should clear any existing elements",function(){J(".foo");B.fill(null);expect(B.getCount()).toBe(0)});it("should accept a selector",function(){J(".foo");expect(B.getCount()).toBe(G);B.fill(".bar");expect(B.getCount()).toBe(H)});it("should accept an array of elements",function(){J();B.fill([M("a"),M("b")]);expect(B.getCount()).toBe(2)});it("should accept a NodeList",function(){J();B.fill(M("a").getElementsByTagName("div"));expect(B.getCount()).toBe(4)});it("should accept another CompositeElement",function(){var N=new Ext.CompositeElementLite();N.add(M("a"));N.add(M("b"));N.add(M("c"));J();B.fill(N);expect(B.getCount()).toBe(3)});it("should return the CompositeElement",function(){J();expect(B.fill(null)).toBe(B)})});describe("slice",function(){beforeEach(function(){J(I.dom.childNodes)});it("should return all nodes if no start or end is passed",function(){var N=B.slice();expect(N.length).toBe(20)});it("should return to the end if a start is specified but the end is omitted",function(){var N=B.slice(17);expect(N.length).toBe(3);expect(N[0]).toBe(M("r"));expect(N[1]).toBe(M("s"));expect(N[2]).toBe(M("t"))});it("should return to the specified range",function(){var N=B.slice(14,18);expect(N.length).toBe(4);expect(N[0]).toBe(M("o"));expect(N[1]).toBe(M("p"));expect(N[2]).toBe(M("q"));expect(N[3]).toBe(M("r"))})});describe("filter",function(){it("should accept a selector",function(){J(".foo");expect(B.getCount()).toBe(G);expect(B.filter(".toFilter").getCount()).toBe(2)});it("should return the CompositeElement",function(){J();expect(B.filter(function(){})).toBe(B)});it("should accept a function",function(){J(".foo");B.filter(function(N){var O=N.dom.id;return O=="a"||O=="d"||O=="g"});expect(B.getCount()).toBe(3)});it("should set the scope to the element",function(){var N;J(M("a"));B.filter(function(){N=this.dom.id});expect(N).toBe("a")});it("should pass the element, the CompositeElement & the index",function(){var N;J(M("a"));B.filter(function(P,Q,O){N=[P.dom.id,Q,O]});expect(N).toEqual(["a",B,0])})});describe("indexOf",function(){it("should return -1 when there are no items",function(){J();expect(B.indexOf("a")).toBe(-1)});it("should return -1 when the item doesn't exist in the collection",function(){J(".bar");expect(B.indexOf("a")).toBe(-1)});it("should accept an id",function(){J(".foo");expect(B.indexOf("a")).toBe(0)});it("should accept an HTMLElement",function(){J(".foo");expect(B.indexOf(M("d"))).toBe(1)});it("should accept an Ext.dom.Element",function(){J(".foo");expect(B.indexOf(Ext.fly("g"))).toBe(2)})});describe("contains",function(){it("should return false when there are no items",function(){J();expect(B.contains("a")).toBe(false)});it("should return false when the item doesn't exist in the collection",function(){J(".bar");expect(B.contains("a")).toBe(false)});it("should accept an id",function(){J(".foo");expect(B.contains("a")).toBe(true)});it("should accept an HTMLElement",function(){J(".foo");expect(B.contains(M("d"))).toBe(true)});it("should accept an Ext.dom.Element",function(){J(".foo");expect(B.contains(Ext.fly("g"))).toBe(true)})});describe("removeElement",function(){it("should accept a string id",function(){J(".foo");B.removeElement("a");expect(B.contains("a")).toBe(false)});it("should accept an HTMLElement",function(){J(".foo");B.removeElement(M("a"));expect(B.contains("a")).toBe(false)});it("should accept an Ext.dom.Element",function(){J(".foo");B.removeElement(Ext.fly("a"));expect(B.contains("a")).toBe(false)});it("should accept an index",function(){J(".foo");B.removeElement(0);expect(B.contains("a")).toBe(false)});it("should remove the element if removeDom is specified",function(){J(".foo");B.removeElement("a",true);B.fill(".foo");expect(B.contains("a")).toBe(false)});it("should return the CompositeElement",function(){J();expect(B.removeElement(null)).toBe(B)})});describe("clear",function(){it("should do nothing when the collection is empty",function(){J();B.clear();expect(B.getCount()).toBe(0)});it("should remove all elements",function(){J(".foo");B.clear();expect(B.getCount()).toBe(0)})})})