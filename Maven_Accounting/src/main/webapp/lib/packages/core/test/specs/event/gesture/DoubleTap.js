((Ext.isIE9m||Ext.isFirefox)?xdescribe:describe)("Ext.event.gesture.DoubleTap",function(){var D=Ext.testHelper,B=Ext.event.gesture.DoubleTap.instance,I=B.getMoveDistance(),K=B.getTapDistance(),H=130,F,M,J,C,L;function A(O){D.touchStart(M,O)}function E(O){D.touchMove(M,O)}function G(O){D.touchEnd(M,O)}function N(O){D.touchCancel(M,O)}beforeEach(function(){F=B.getMaxDuration();B.setMaxDuration(H);M=Ext.getBody().createChild({});J=jasmine.createSpy();C=jasmine.createSpy();J.andCallFake(function(O){L=O});C.andCallFake(function(O){L=O});M.on("doubletap",C);M.on("singletap",J)});afterEach(function(){B.setMaxDuration(F);M.destroy()});it("should fire doubletap and not singletap when a second tap occurs within maxDuration",function(){runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waits(H-30);runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(C).toHaveBeenCalled();expect(J).not.toHaveBeenCalled();expect(L&&L.type).toBe("doubletap")})});it("should fire singletap and not doubletap when a second tap does not occur within maxDuration",function(){runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waits(H+30);runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(C).not.toHaveBeenCalled();expect(J).toHaveBeenCalled();expect(L&&L.type).toBe("singletap")})});it("should not fire singletap if movement of the first pointer exceeds moveDistance",function(){runs(function(){A({id:1,x:10,y:10});E({id:1,x:10,y:10+I});G({id:1,x:10,y:10+I})});waits(H+30);runs(function(){expect(J).not.toHaveBeenCalled()})});it("should not fire doubletap if movement of the first pointer exceeds moveDistance",function(){runs(function(){A({id:1,x:10,y:10});E({id:1,x:10,y:10+I});G({id:1,x:10,y:10+I})});waits(H-30);runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(C).not.toHaveBeenCalled()});waits(H+30);runs(function(){expect(J).toHaveBeenCalled()})});it("should fire singletap if movement of the first pointer is within moveDistance",function(){runs(function(){A({id:1,x:10,y:10});E({id:1,x:10,y:9+I});G({id:1,x:10,y:9+I})});waits(H+30);runs(function(){expect(J).toHaveBeenCalled()})});it("should fire doubletap if movement of the first pointer is within moveDistance",function(){runs(function(){A({id:1,x:10,y:10});E({id:1,x:9+I,y:10});G({id:1,x:9+I,y:10})});waits(H-30);runs(function(){A({id:1,x:10,y:10});G({id:1,x:11,y:11})});waitsForAnimation();runs(function(){expect(C).toHaveBeenCalled()})});it("should fire double tap if the second tap is within tapDistance from the first tap",function(){runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waits(H-30);runs(function(){A({id:1,x:10+K,y:10});G({id:1,x:10+K,y:10})});waitsForAnimation();runs(function(){expect(C).toHaveBeenCalled()})});it("should not fire double tap if the second tap exceeds tapDistance from the first tap",function(){runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waits(H-30);runs(function(){A({id:1,x:11+K,y:10});G({id:1,x:11+K,y:10})});waitsForAnimation();runs(function(){expect(C).not.toHaveBeenCalled()})});if(Ext.supports.Touch){it("should not fire single tap if the first touch is canceled",function(){runs(function(){A({id:1,x:10,y:10});N({id:1,x:10,y:10})});waits(H+30);runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(J).not.toHaveBeenCalled()})});it("should not fire double tap if the first touch is canceled",function(){runs(function(){A({id:1,x:10,y:10});N({id:1,x:10,y:10})});waits(H-30);runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(C).not.toHaveBeenCalled()})});it("should not fire double tap if the second touch is canceled",function(){runs(function(){A({id:1,x:10,y:10});G({id:1,x:10,y:10})});waits(H-30);runs(function(){A({id:1,x:10,y:10});N({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(C).not.toHaveBeenCalled()})})}})