describe("Ext.event.gesture.LongPress",function(){var E=Ext.testHelper,D=Ext.event.gesture.LongPress.instance,H=D.getMinDuration(),I=D.getMoveDistance(),C=60,M,K,J,B,L;function A(N){E.touchStart(M,N)}function F(N){E.touchMove(M,N)}function G(N){E.touchEnd(M,N)}beforeEach(function(){M=Ext.getBody().createChild({});D.setMinDuration(C);K=jasmine.createSpy();J=jasmine.createSpy();K.andCallFake(function(N){B=N});J.andCallFake(function(N){L=N});M.on("longpress",K);M.on("taphold",J)});afterEach(function(){D.setMinDuration(H);M.destroy()});it("should fire longpress and taphold when the hold duration is longer than minDuration",function(){runs(function(){A({id:1,x:10,y:10})});waits(C+30);runs(function(){G({id:1,x:10,y:10});expect(K).toHaveBeenCalled();expect(B.type).toBe("longpress");expect(J).toHaveBeenCalled();expect(L.type).toBe("taphold");expect(B.duration).toBe(C);expect(L.duration).toBe(C)})});it("should not fire longpress and taphold when the hold duration is shorter than minDuration",function(){runs(function(){A({id:1,x:10,y:10})});waits(C-30);runs(function(){G({id:1,x:10,y:10});expect(K).not.toHaveBeenCalled();expect(J).not.toHaveBeenCalled()});waitsForAnimation()});it("should not fire longpress and taphold if the amount of movement exceeds moveDistance",function(){runs(function(){A({id:1,x:10,y:10});F({id:1,x:10,y:10+I})});waits(C+30);runs(function(){G({id:1,x:10,y:10+I});expect(K).not.toHaveBeenCalled();expect(J).not.toHaveBeenCalled()});waitsForAnimation()});it("should fire longpress and taphold if the amount of movement is within moveDistance",function(){runs(function(){A({id:1,x:10,y:10});F({id:1,x:10,y:9+I})});waits(C+30);runs(function(){G({id:1,x:10,y:9+I});expect(K).toHaveBeenCalled();expect(J).toHaveBeenCalled()});waitsForAnimation()});if(Ext.supports.Touch){it("should not fire longpress and taphold if a second touch is initiated",function(){runs(function(){A({id:1,x:10,y:10});A({id:2,x:20,y:20})});waits(C+30);runs(function(){G({id:1,x:10,y:10});G({id:2,x:20,y:20});expect(K).not.toHaveBeenCalled();expect(J).not.toHaveBeenCalled()});waitsForAnimation()})}})