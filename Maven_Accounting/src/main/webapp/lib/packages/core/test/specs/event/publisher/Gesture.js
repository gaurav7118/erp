describe("Ext.event.publisher.Gesture",function(){describe("removing the target el before a gesture is complete",function(){var C=Ext.dom.GarbageCollector,B=Ext.testHelper,A=C.interval,D;beforeEach(function(){D=Ext.getBody().createChild({id:"gesture-target"});spyOn(D,"clearListeners");C.interval=60;C.pause();C.resume()});afterEach(function(){if(D&&!D.destroyed){D.destroy()}C.interval=A;C.pause();C.resume()});function F(){document.body.removeChild(D.dom)}function E(G){if(G){expect("gesture-target" in Ext.cache).toBe(false);expect(D.clearListeners).toHaveBeenCalled()}else{expect("gesture-target" in Ext.cache).toBe(true);expect(D.clearListeners).not.toHaveBeenCalled()}}(Ext.toolkit==="classic"?it:xit)("should not garbage collect the target element until the current gesture is complete",function(){runs(function(){B.touchStart(D,{id:1,x:10,y:10});B.touchMove(D,{id:1,x:15,y:15});F()});waits(90);runs(function(){E(false);B.touchEnd(Ext.supports.TouchEvents?D:document.body,{id:1,x:15,y:15})});waits(90);runs(function(){E(true)})})});describe("order of recognizers",function(){it("should invoke the recognizers in priority order when an event is fired",function(){var H=Ext.event.gesture,G=H.Drag.instance,E=H.Tap.instance,I=H.DoubleTap.instance,C=H.LongPress.instance,B=H.Swipe.instance,D=H.Pinch.instance,F=H.Rotate.instance,A=H.EdgeSwipe.instance,J=[];G.onStart=E.onStart=I.onStart=C.onStart=B.onStart=D.onStart=F.onStart=A.onStart=function(){J.push([this.$className,this.priority])};Ext.testHelper.touchStart(document.body,{id:1,x:100,y:100});expect(J[0]).toEqual(["Ext.event.gesture.Drag",100]);expect(J[1]).toEqual(["Ext.event.gesture.Tap",200]);expect(J[2]).toEqual(["Ext.event.gesture.DoubleTap",300]);expect(J[3]).toEqual(["Ext.event.gesture.LongPress",400]);expect(J[4]).toEqual(["Ext.event.gesture.Swipe",500]);expect(J[5]).toEqual(["Ext.event.gesture.Pinch",600]);expect(J[6]).toEqual(["Ext.event.gesture.Rotate",700]);expect(J[7]).toEqual(["Ext.event.gesture.EdgeSwipe",800]);delete G.onStart;delete E.onStart;delete I.onStart;delete C.onStart;delete B.onStart;delete D.onStart;delete F.onStart;delete A.onStart})})})