describe("Ext.mixin.Responsive",function(){function G(L,K,N){for(var M=N.length;M-->0;){var J=N[M];if(J in K){L[J]=K[J]}else{delete L[J]}}}var I,H,B,F,C,A,E={ipad:{landscape:{width:1024,height:768,orientation:"landscape"},portrait:{width:768,height:1024,orientation:"portrait"}},iphone:{landscape:{width:480,height:320,orientation:"landscape"},portrait:{width:320,height:480,orientation:"portrait"}}},D;beforeEach(function(){B=Ext.mixin.Responsive;F=Ext.dom.Element.getOrientation;C=Ext.dom.Element.getViewportWidth;A=Ext.dom.Element.getViewportHeight;Ext.dom.Element.getOrientation=function(){return D.orientation};Ext.dom.Element.getViewportWidth=function(){return D.width};Ext.dom.Element.getViewportHeight=function(){return D.height};I=Ext.define(null,{mixins:["Ext.mixin.Responsive"],config:{title:"Hello",bar:null,foo:null},responsiveFormulas:{small:"width < 600",medium:"width >= 600 && width < 800",large:"width >= 800"},responsiveConfig:{small:{bar:"S"},medium:{bar:"M"},large:{bar:"L"},landscape:{title:"Landscape"},portrait:{title:"Portrait"}},constructor:function(J){this.initConfig(J)}})});afterEach(function(){Ext.dom.Element.getOrientation=F;Ext.dom.Element.getViewportWidth=C;Ext.dom.Element.getViewportHeight=A;I=null;H=Ext.destroy(H);expect(B.active).toBe(false);expect(B.count).toBe(0)});describe("initialization",function(){var J=["tablet","desktop"],K;beforeEach(function(){D=E.ipad.landscape;K={};G(Ext.platformTags,K,J);Ext.platformTags.desktop=false;Ext.platformTags.tablet=true});afterEach(function(){G(K,Ext.platformTags,J)});it("should init with landscape from class",function(){H=new I();var L=H.getTitle();expect(L).toBe("Landscape")});it("should init with landscape from class over instanceConfig",function(){H=new I({title:"Foo"});var L=H.getTitle();expect(L).toBe("Landscape")});it("should init with portrait from class",function(){D=E.ipad.portrait;H=new I();var L=H.getTitle();expect(L).toBe("Portrait")});it("should init with wide from instanceConfig",function(){H=new I({responsiveConfig:{wide:{foo:"Wide"},tall:{foo:"Tall"}}});var L=H.getFoo();expect(L).toBe("Wide")});it("should init with tall from instanceConfig",function(){D=E.ipad.portrait;H=new I({responsiveConfig:{wide:{foo:"Wide"},tall:{foo:"Tall"}}});var L=H.getFoo();expect(L).toBe("Tall")});it("should init with landscape from instanceConfig",function(){H=new I({responsiveConfig:{landscape:{title:"Landscape 2"}}});var L=H.getTitle();expect(L).toBe("Landscape 2")});it("should init with portrait not hidden by instanceConfig",function(){D=E.ipad.portrait;H=new I({responsiveConfig:{landscape:{title:"Landscape 2"}}});var L=H.getTitle();expect(L).toBe("Portrait")});it("should init with platform.tablet from instanceConfig",function(){H=new I({responsiveConfig:{"platform.tablet":{foo:"Tablet"}}});var L=H.getFoo();expect(L).toBe("Tablet")});it("should init with tablet from instanceConfig",function(){H=new I({responsiveConfig:{tablet:{foo:"Tablet"}}});var L=H.getFoo();expect(L).toBe("Tablet")});it("should preserve instanceConfig if responsiveConfig has no match",function(){H=new I({foo:"Foo",responsiveConfig:{"platform.desktop":{foo:"Desktop"}}});var L=H.getFoo();expect(L).toBe("Foo")});it("should preserve instanceConfig if responsiveConfig has no match w/o prefix",function(){H=new I({foo:"Foo",responsiveConfig:{desktop:{foo:"Desktop"}}});var L=H.getFoo();expect(L).toBe("Foo")});it("should pick responsiveConfig over instanceConfig",function(){H=new I({foo:"Foo",responsiveConfig:{"platform.tablet":{foo:"Tablet"}}});var L=H.getFoo();expect(L).toBe("Tablet")});it("should pick responsiveConfig over instanceConfig w/o prefix",function(){H=new I({foo:"Foo",responsiveConfig:{tablet:{foo:"Tablet"}}});var L=H.getFoo();expect(L).toBe("Tablet")})});describe("formulas",function(){var J=["tablet","desktop"],K;beforeEach(function(){D=E.ipad.landscape;K={};G(Ext.platformTags,K,J);Ext.platformTags.desktop=false;Ext.platformTags.tablet=true});afterEach(function(){G(K,Ext.platformTags,J)});it("should init on iPad Landscape using formulas from class",function(){H=new I();var L=H.getBar();expect(L).toBe("L")});it("should init on iPad Portrait using formulas from class",function(){D=E.ipad.portrait;H=new I();var L=H.getBar();expect(L).toBe("M")});it("should init on iPhone Portrait using formulas from class",function(){D=E.iphone.portrait;H=new I();var L=H.getBar();expect(L).toBe("S")})});describe("dynamic",function(){var J=["tablet","desktop"],K;beforeEach(function(){D=E.ipad.landscape;K={};G(Ext.platformTags,K,J);Ext.platformTags.desktop=false;Ext.platformTags.tablet=true});afterEach(function(){G(K,Ext.platformTags,J)});it("should update when responsive state changes",function(){H=new I({responsiveConfig:{wide:{foo:"Wide"},tall:{foo:"Tall"}}});var L=H.getFoo();expect(L).toBe("Wide");D=E.ipad.portrait;B.notify();L=H.getFoo();expect(L).toBe("Tall")});it("should update formulas when responsive state changes",function(){H=new I();var L=H.getBar();expect(L).toBe("L");D=E.ipad.portrait;B.notify();L=H.getBar();expect(L).toBe("M")})})})