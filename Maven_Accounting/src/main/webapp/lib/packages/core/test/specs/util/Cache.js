describe("Ext.util.Cache",function(){var C=[],A;function B(){var D=[],E=0;A.each(function(F,G){D.push(F+"="+G);++E});D.unshift(E);return D.join(",")}beforeEach(function(){C.length=0;A=new Ext.util.Cache({maxSize:3,evict:function(D,E){C.push("evict:"+D+"="+E)},miss:function(D){return"{"+D+"}"}})});it("should add entries until maxSize",function(){expect(A.count).toBe(0);expect(B()).toBe("0");var E=A.get("a");expect(E).toBe("{a}");expect(A.count).toBe(1);expect(B()).toBe("1,a={a}");var D=A.get("b");expect(D).toBe("{b}");expect(A.count).toBe(2);expect(B()).toBe("2,b={b},a={a}");var F=A.get("c");expect(F).toBe("{c}");expect(A.count).toBe(3);expect(B()).toBe("3,c={c},b={b},a={a}")});it("should reorder entries",function(){var E=A.get("a");var D=A.get("b");var G=A.get("c");expect(A.count).toBe(3);expect(C.length).toBe(0);var F=A.get("b");expect(C.length).toBe(0);expect(F).toBe(D);expect(A.count).toBe(3);expect(B()).toBe("3,b={b},c={c},a={a}")});it("should remove oldest entry after maxSize",function(){var E=A.get("a");var D=A.get("b");var G=A.get("c");expect(A.count).toBe(3);expect(C.length).toBe(0);var F=A.get("d");expect(C).toEqual(["evict:a={a}"]);expect(F).toBe("{d}");expect(A.count).toBe(3);expect(B()).toBe("3,d={d},c={c},b={b}")});it("should remove everything on clear",function(){var E=A.get("a");var D=A.get("b");var F=A.get("c");expect(A.count).toBe(3);A.clear();expect(A.count).toBe(0);expect(B()).toBe("0")});it("should evict everything on clear",function(){var E=A.get("a");var D=A.get("b");var F=A.get("c");expect(A.count).toBe(3);A.clear();expect(C.length).toBe(3);expect(C).toEqual(["evict:c={c}","evict:b={b}","evict:a={a}"])});it("should evict everything on destroy",function(){var E=A.get("a");var D=A.get("b");var F=A.get("c");expect(A.count).toBe(3);A.destroy();expect(A.count).toBe(0);expect(B()).toBe("0");expect(C.length).toBe(3);expect(C).toEqual(["evict:c={c}","evict:b={b}","evict:a={a}"])})})