Ext.define("Ext.device.communicator.Default",{SERVER_URL:"http://localhost:3000",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:"0",generateId:function(){return String(++this.idSeed)},getId:function(A){var B=A.$callbackId;if(!B){A.$callbackId=B=this.generateId()}return B},getCallbackId:function(H,D){var C=this.callbackIdMap,B=this.callbackDataMap,G,A,F,E;if(!D){A=this.globalScopeId}else{if(D.isIdentifiable){A=D.getId()}else{A=this.getId(D)}}F=this.getId(H);if(!C[A]){C[A]={}}if(!C[A][F]){G=this.generateId();E={callback:H,scope:D};C[A][F]=G;B[G]=E}return C[A][F]},getCallbackData:function(A){return this.callbackDataMap[A]},invoke:function(C,A){var B=this.getCallbackData(C);B.callback.apply(B.scope,A)},send:function(C){var E,D,B,F;if(!C){C={}}else{if(C.callbacks){E=C.callbacks;D=C.scope;delete C.callbacks;delete C.scope;for(B in E){if(E.hasOwnProperty(B)){F=E[B];if(typeof F=="function"){C[B]=this.getCallbackId(F,D)}}}}}C.__source=document.location.href;var A=this.doSend(C);return(A&&A.length>0)?JSON.parse(A):null},doSend:function(A){var C=new XMLHttpRequest();C.open("GET",this.SERVER_URL+"?"+Ext.Object.toQueryString(A)+"&_dc="+new Date().getTime(),false);try{C.send(null);return C.responseText}catch(B){if(A.failure){this.invoke(A.failure)}else{if(A.callback){this.invoke(A.callback)}}}}})