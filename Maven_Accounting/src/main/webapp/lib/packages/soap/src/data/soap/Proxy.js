Ext.define("Ext.data.soap.Proxy",{extend:"Ext.data.proxy.Ajax",alias:"proxy.soap",requires:["Ext.data.soap.Reader"],config:{soapAction:{},operationParam:"op",reader:"soap",url:"",envelopeTpl:['<?xml version="1.0" encoding="utf-8" ?>','<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">',"{[values.bodyTpl.apply(values)]}","</soap:Envelope>"],createBodyTpl:null,readBodyTpl:["<soap:Body>",'<{operation} xmlns="{targetNamespace}">','<tpl foreach="params">',"<{$}>{.}</{$}>","</tpl>","</{operation}>","</soap:Body>"],updateBodyTpl:null,destroyBodyTpl:null,writeBodyTpl:["<soap:Body>",'<{operation} xmlns="{targetNamespace}">','<tpl for="records">','{% var recordName=values.modelName.split(".").pop(); %}',"<{[recordName]}>",'<tpl for="fields">',"<{name}>{[parent.get(values.name)]}</{name}>","</tpl>","</{[recordName]}>","</tpl>","</{operation}>","</soap:Body>"],targetNamespace:""},applyEnvelopeTpl:function(A){return this.createTpl(A)},applyCreateBodyTpl:function(A){return this.createTpl(A)},applyReadBodyTpl:function(A){return this.createTpl(A)},applyUpdateBodyTpl:function(A){return this.createTpl(A)},applyDestroyBodyTpl:function(A){return this.createTpl(A)},applyWriteBodyTpl:function(A){return this.createTpl(A)},createTpl:function(A){if(A&&!A.isTpl){A=new Ext.XTemplate(A)}return A},doRequest:function(A){var D=this,E=A.getAction(),G=D.getApi()[E],F=Ext.applyIf(A.getParams()||{},D.getExtraParams()||{}),B=D.getEnvelopeTpl().apply({operation:G,targetNamespace:D.getTargetNamespace(),params:F,records:A.getRecords(),bodyTpl:D.getBodyTpl(E)}),C=new Ext.data.Request({url:D.getUrl()+"?"+D.getOperationParam()+"="+G,method:"POST",action:E,operation:A,xmlData:B,headers:Ext.apply({SOAPAction:D.getSoapAction()[E]},D.getHeaders()),timeout:D.getTimeout(),scope:D,disableCaching:false});C.setCallback(D.createRequestCallback(C,A));return D.sendRequest(C)},getBodyTpl:function(B){B=Ext.String.capitalize(B);var A=this["get"+B+"BodyTpl"]();return A||this.getWriteBodyTpl()}})