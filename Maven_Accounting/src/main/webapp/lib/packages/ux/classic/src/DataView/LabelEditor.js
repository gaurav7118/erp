Ext.define("Ext.ux.DataView.LabelEditor",{extend:"Ext.Editor",alignment:"tl-tl",completeOnEnter:true,cancelOnEsc:true,shim:false,autoSize:{width:"boundEl",height:"field"},labelSelector:"x-editable",requires:["Ext.form.field.Text"],constructor:function(A){A.field=A.field||Ext.create("Ext.form.field.Text",{allowOnlyWhitespace:false,selectOnFocus:true});this.callParent([A])},init:function(A){this.view=A;this.mon(A,"afterrender",this.bindEvents,this);this.on("complete",this.onSave,this)},bindEvents:function(){this.mon(this.view.getEl(),{click:{fn:this.onClick,scope:this}})},onClick:function(E,D){var C=this,B,A;if(Ext.fly(D).hasCls(C.labelSelector)&&!C.editing&&!E.ctrlKey&&!E.shiftKey){E.stopEvent();B=C.view.findItemByChild(D);A=C.view.store.getAt(C.view.indexOf(B));C.startEdit(D,A.data[C.dataIndex]);C.activeRecord=A}else{if(C.editing){C.field.blur();E.preventDefault()}}},onSave:function(A,B){this.activeRecord.set(this.dataIndex,B)}})