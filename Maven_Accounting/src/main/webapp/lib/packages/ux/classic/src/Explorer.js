Ext.define("Ext.ux.Explorer",{extend:"Ext.panel.Panel",xtype:"explorer",requires:["Ext.layout.container.Border","Ext.toolbar.Breadcrumb","Ext.tree.Panel"],config:{breadcrumb:{dock:"top",xtype:"breadcrumb",reference:"breadcrumb"},contentView:{xtype:"dataview",reference:"contentView",region:"center",cls:Ext.baseCSSPrefix+"explorer-view",itemSelector:"."+Ext.baseCSSPrefix+"explorer-item",tpl:'<tpl for="."><div class="'+Ext.baseCSSPrefix+'explorer-item"><div class="{iconCls}"><div class="'+Ext.baseCSSPrefix+'explorer-node-icon{[values.leaf ? " '+Ext.baseCSSPrefix+'explorer-leaf-icon" : ""]}"></div><div class="'+Ext.baseCSSPrefix+'explorer-item-text">{text}</div></div></div></tpl>'},store:null,tree:{xtype:"treepanel",reference:"tree",region:"west",width:200}},renderConfig:{selection:null},layout:"border",referenceHolder:true,defaultListenerScope:true,cls:Ext.baseCSSPrefix+"explorer",initComponent:function(){var B=this,A=B.getStore();if(!A){Ext.raise("Ext.ux.Explorer requires a store.")}B.dockedItems=[B.getBreadcrumb()];B.items=[B.getTree(),B.getContentView()];B.callParent()},applyBreadcrumb:function(B){var A=this.getStore();B=Ext.create(Ext.apply({store:A,selection:A.getRoot()},B));B.on("selectionchange","_onBreadcrumbSelectionChange",this);return B},applyContentView:function(A){var B=this.contentStore=new Ext.data.Store({model:this.getStore().model});A=Ext.create(Ext.apply({store:B},A));return A},applyTree:function(A){A=Ext.create(Ext.apply({store:this.getStore()},A));A.on("selectionchange","_onTreeSelectionChange",this);return A},updateSelection:function(B){var F=this,H=F.getReferences(),E=H.breadcrumb,I=H.tree,D=I.getSelectionModel(),G=F.contentStore,C,A;if(E.getSelection()!==B){E.setSelection(B)}if(D.getSelection()[0]!==B){D.select([B]);C=B.parentNode;if(C){C.expand()}A=I.getView();A.scrollRowIntoView(A.getRow(B))}G.removeAll();G.add(B.hasChildNodes()?B.childNodes:[B])},updateStore:function(A){this.getBreadcrumb().setStore(A)},privates:{_onTreeSelectionChange:function(A,B){this.setSelection(B[0])},_onBreadcrumbSelectionChange:function(B,A){this.setSelection(A)}}})