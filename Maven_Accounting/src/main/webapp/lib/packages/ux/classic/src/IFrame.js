Ext.define("Ext.ux.IFrame",{extend:"Ext.Component",alias:"widget.uxiframe",loadMask:"Loading...",src:"about:blank",renderTpl:['<iframe src="{src}" id="{id}-iframeEl" data-ref="iframeEl" name="{frameName}" width="100%" height="100%" frameborder="0"></iframe>'],childEls:["iframeEl"],initComponent:function(){this.callParent();this.frameName=this.frameName||this.id+"-frame"},initEvents:function(){var A=this;A.callParent();A.iframeEl.on("load",A.onLoad,A)},initRenderData:function(){return Ext.apply(this.callParent(),{src:this.src,frameName:this.frameName})},getBody:function(){var A=this.getDoc();return A.body||A.documentElement},getDoc:function(){try{return this.getWin().document}catch(A){return null}},getWin:function(){var B=this,A=B.frameName,C=Ext.isIE?B.iframeEl.dom.contentWindow:window.frames[A];return C},getFrame:function(){var A=this;return A.iframeEl.dom},beforeDestroy:function(){this.cleanupListeners(true);this.callParent()},cleanupListeners:function(C){var B,D;if(this.rendered){try{B=this.getDoc();if(B){Ext.get(B).un(this._docListeners);if(C){for(D in B){if(B.hasOwnProperty&&B.hasOwnProperty(D)){delete B[D]}}}}}catch(A){}}},onLoad:function(){var B=this,D=B.getDoc(),A=B.onRelayedEvent;if(D){try{Ext.get(D).on(B._docListeners={mousedown:A,mousemove:A,mouseup:A,click:A,dblclick:A,scope:B})}catch(C){}Ext.get(this.getWin()).on("beforeunload",B.cleanupListeners,B);this.el.unmask();this.fireEvent("load",this)}else{if(B.src){this.el.unmask();this.fireEvent("error",this)}}},onRelayedEvent:function(C){var B=this.iframeEl,D=B.getTrueXY(),E=C.getXY(),A=C.getTrueXY();C.xy=[D[0]+A[0],D[1]+A[1]];C.injectEvent(B);C.xy=E},load:function(D){var A=this,C=A.loadMask,B=A.getFrame();if(A.fireEvent("beforeload",A,D)!==false){if(C&&A.el){A.el.mask(C)}B.src=A.src=(D||A.src)}}})