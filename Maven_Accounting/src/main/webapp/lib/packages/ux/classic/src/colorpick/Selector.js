Ext.define("Ext.ux.colorpick.Selector",{extend:"Ext.container.Container",xtype:"colorselector",mixins:["Ext.ux.colorpick.Selection"],controller:"colorpick-selectorcontroller",requires:["Ext.layout.container.HBox","Ext.form.field.Text","Ext.form.field.Number","Ext.ux.colorpick.ColorMap","Ext.ux.colorpick.SelectorModel","Ext.ux.colorpick.SelectorController","Ext.ux.colorpick.ColorPreview","Ext.ux.colorpick.Slider","Ext.ux.colorpick.SliderAlpha","Ext.ux.colorpick.SliderSaturation","Ext.ux.colorpick.SliderValue","Ext.ux.colorpick.SliderHue"],width:580,height:337,cls:Ext.baseCSSPrefix+"colorpicker",padding:10,layout:{type:"hbox",align:"stretch"},defaultBindProperty:"value",twoWayBindable:["value"],fieldWidth:50,fieldPad:5,showPreviousColor:false,showOkCancelButtons:false,listeners:{resize:"onResize"},constructor:function(B){var C=this,A=Ext.Factory.viewModel("colorpick-selectormodel");C.childViewModel=A;C.items=[C.getMapAndHexRGBFields(A),C.getSliderAndHField(A),C.getSliderAndSField(A),C.getSliderAndVField(A),C.getSliderAndAField(A),C.getPreviewAndButtons(A,B)];C.callParent(arguments)},updateColor:function(A){var B=this;B.mixins.colorselection.updateColor.call(B,A);B.childViewModel.set("selectedColor",A)},updatePreviousColor:function(A){this.childViewModel.set("previousColor",A)},getMapAndHexRGBFields:function(A){var C=this,D={top:0,right:C.fieldPad,bottom:0,left:0},B=C.fieldWidth;return{xtype:"container",viewModel:A,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",flex:1,layout:{type:"vbox",align:"stretch"},margin:"0 10 0 0",items:[{xtype:"colorpickercolormap",reference:"colorMap",flex:1,bind:{position:{bindTo:"{selectedColor}",deep:true},hue:"{selectedColor.h}"},listeners:{handledrag:"onColorMapHandleDrag"}},{xtype:"container",layout:"hbox",defaults:{labelAlign:"top",labelSeparator:"",allowBlank:false,onChange:function(){if(this.isValid()){Ext.form.field.Base.prototype.onChange.apply(this,arguments)}}},items:[{xtype:"textfield",fieldLabel:"HEX",flex:1,bind:"{hex}",margin:D,readOnly:true},{xtype:"numberfield",fieldLabel:"R",bind:"{red}",width:B,hideTrigger:true,maxValue:255,minValue:0,margin:D},{xtype:"numberfield",fieldLabel:"G",bind:"{green}",width:B,hideTrigger:true,maxValue:255,minValue:0,margin:D},{xtype:"numberfield",fieldLabel:"B",bind:"{blue}",width:B,hideTrigger:true,maxValue:255,minValue:0,margin:0}]}]}},getSliderAndHField:function(A){var B=this;return{xtype:"container",viewModel:A,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:B.fieldWidth,layout:{type:"vbox",align:"stretch"},items:[{xtype:"colorpickersliderhue",reference:"hueSlider",flex:1,bind:{hue:"{selectedColor.h}"},listeners:{handledrag:"onHueSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"H",labelAlign:"top",width:B.fieldWidth,labelSeparator:"",bind:"{hue}",hideTrigger:true,maxValue:360,minValue:0,allowBlank:false,margin:0}]}},getSliderAndSField:function(A){var B=this;return{xtype:"container",viewModel:A,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:B.fieldWidth,layout:{type:"vbox",align:"stretch"},margin:{right:B.fieldPad,left:B.fieldPad},items:[{xtype:"colorpickerslidersaturation",reference:"satSlider",flex:1,bind:{saturation:"{saturation}",hue:"{selectedColor.h}"},listeners:{handledrag:"onSaturationSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"S",labelAlign:"top",labelSeparator:"",bind:"{saturation}",hideTrigger:true,maxValue:100,minValue:0,allowBlank:false,margin:0}]}},getSliderAndVField:function(A){var B=this;return{xtype:"container",viewModel:A,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:B.fieldWidth,layout:{type:"vbox",align:"stretch"},items:[{xtype:"colorpickerslidervalue",reference:"valueSlider",flex:1,bind:{value:"{value}",hue:"{selectedColor.h}"},listeners:{handledrag:"onValueSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"V",labelAlign:"top",labelSeparator:"",bind:"{value}",hideTrigger:true,maxValue:100,minValue:0,allowBlank:false,margin:0}]}},getSliderAndAField:function(A){var B=this;return{xtype:"container",viewModel:A,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:B.fieldWidth,layout:{type:"vbox",align:"stretch"},margin:{left:B.fieldPad},items:[{xtype:"colorpickerslideralpha",reference:"alphaSlider",flex:1,bind:{alpha:"{alpha}",color:{bindTo:"{selectedColor}",deep:true}},listeners:{handledrag:"onAlphaSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"A",labelAlign:"top",labelSeparator:"",bind:"{alpha}",hideTrigger:true,maxValue:100,minValue:0,allowBlank:false,margin:0}]}},getPreviewAndButtons:function(A,C){var B=[{xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{selectedColor}",deep:true}}}];if(C.showPreviousColor){B.push({xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{previousColor}",deep:true}},listeners:{click:"onPreviousColorSelected"}})}if(C.showOkCancelButtons){B.push({xtype:"button",text:"OK",margin:"10 0 0 0",handler:"onOK"},{xtype:"button",text:"Cancel",margin:"10 0 0 0",handler:"onCancel"})}return{xtype:"container",viewModel:A,width:70,margin:"0 0 0 10",items:B,layout:{type:"vbox",align:"stretch"}}}})