Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",alternateClassName:"Ext.ux.StatusBar",alias:"widget.statusbar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5000,emptyText:"&#160;",activeThreadId:0,initComponent:function(){var A=this.statusAlign==="right";this.callParent(arguments);this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""});if(A){this.cls+=" x-status-right";this.add("->");this.add(this.statusEl)}else{this.insert(0,this.statusEl);this.insert(1,"->")}},setStatus:function(D){var A=this;D=D||{};Ext.suspendLayouts();if(Ext.isString(D)){D={text:D}}if(D.text!==undefined){A.setText(D.text)}if(D.iconCls!==undefined){A.setIcon(D.iconCls)}if(D.clear){var E=D.clear,C=A.autoClear,B={useDefaults:true,anim:true};if(Ext.isObject(E)){E=Ext.applyIf(E,B);if(E.wait){C=E.wait}}else{if(Ext.isNumber(E)){C=E;E=B}else{if(Ext.isBoolean(E)){E=B}}}E.threadId=this.activeThreadId;Ext.defer(A.clearStatus,C,A,[E])}Ext.resumeLayouts(true);return A},clearStatus:function(E){E=E||{};var C=this,B=C.statusEl;if(E.threadId&&E.threadId!==C.activeThreadId){return C}var D=E.useDefaults?C.defaultText:C.emptyText,A=E.useDefaults?(C.defaultIconCls?C.defaultIconCls:""):"";if(E.anim){B.el.puff({remove:false,useDisplay:true,callback:function(){B.el.show();C.setStatus({text:D,iconCls:A})}})}else{C.setStatus({text:D,iconCls:A})}return C},setText:function(B){var A=this;A.activeThreadId++;A.text=B||"";if(A.rendered){A.statusEl.setText(A.text)}return A},getText:function(){return this.text},setIcon:function(A){var B=this;B.activeThreadId++;A=A||"";if(B.rendered){if(B.currIconCls){B.statusEl.removeCls(B.currIconCls);B.currIconCls=null}if(A.length>0){B.statusEl.addCls(A);B.currIconCls=A}}else{B.currIconCls=A}return B},showBusy:function(A){if(Ext.isString(A)){A={text:A}}A=Ext.applyIf(A||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(A)}})